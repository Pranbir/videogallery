webpackJsonpjwplayer([3,13],{8:function(t,e,i){var n,r;n=[i(1),i(11),i(2),i(13),i(12)],r=function(t,e,i,n,r){function a(e){if(this._currentTextTrackIndex=-1,e){if(this._textTracks?(this._textTracks=t.reject(this._textTracks,function(t){if(this.renderNatively&&"nativecaptions"===t._id)return delete this._tracksById[t._id],!0},this),delete this._tracksById.nativemetadata):this._initTextTracks(),e.length){var n=0,a=e.length;for(n;n<a;n++){var s=e[n];if(!s._id){if("captions"===s.kind||"metadata"===s.kind){if(s._id="native"+s.kind,!s.label&&"captions"===s.kind){var o=r.createLabel(s,this._unknownCount);s.name=o.label,this._unknownCount=o.unknownCount}}else s._id=r.createId(s,this._textTracks.length);if(this._tracksById[s._id])continue;s.inuse=!0}if(s.inuse&&!this._tracksById[s._id])if("metadata"===s.kind)s.mode="hidden",s.oncuechange=P.bind(this),this._tracksById[s._id]=s;else if(S(s.kind)){var u,h=s.mode;if(s.mode="hidden",!s.cues.length&&s.embedded)continue;if(s.mode=h,this._cuesByTrackId[s._id]&&!this._cuesByTrackId[s._id].loaded){for(var c=this._cuesByTrackId[s._id].cues;u=c.shift();)E(this.renderNatively,s,u);s.mode=h,this._cuesByTrackId[s._id].loaded=!0}x.call(this,s)}}}this.renderNatively&&(this.textTrackChangeHandler=this.textTrackChangeHandler||b.bind(this),this.addTracksListener(this.video.textTracks,"change",this.textTrackChangeHandler),(i.isEdge()||i.isFF()||i.isSafari())&&(this.addTrackHandler=this.addTrackHandler||y.bind(this),this.addTracksListener(this.video.textTracks,"addtrack",this.addTrackHandler))),this._textTracks.length&&this.trigger("subtitlesTracks",{tracks:this._textTracks})}}function s(t){if(this.renderNatively){var e=t===this._itemTracks;e||n.cancelXhr(this._itemTracks),this._itemTracks=t,t&&(e||(this.disableTextTrack(),_.call(this),this.addTextTracks(t)))}}function o(){return this._currentTextTrackIndex}function u(e){return this.renderNatively?void(this._textTracks&&(0===e&&t.each(this._textTracks,function(t){t.mode=t.embedded?"hidden":"disabled"}),this._currentTextTrackIndex!==e-1&&(this.disableTextTrack(),this._currentTextTrackIndex=e-1,this._textTracks[this._currentTextTrackIndex]&&(this._textTracks[this._currentTextTrackIndex].mode="showing"),this.trigger("subtitlesTrackChanged",{currentTrack:this._currentTextTrackIndex+1,tracks:this._textTracks})))):void(this.setCurrentSubtitleTrack&&this.setCurrentSubtitleTrack(e-1))}function h(t){if(t.text&&t.begin&&t.end){var e=t.trackid.toString(),i=this._tracksById&&this._tracksById[e];i||(i={kind:"captions",_id:e,data:[]},this.addTextTracks([i]),this.trigger("subtitlesTracks",{tracks:this._textTracks}));var r;t.useDTS&&(i.source||(i.source=t.source||"mpegts")),r=t.begin+"_"+t.text;var a=this._metaCuesByTextTime[r];if(!a){a={begin:t.begin,end:t.end,text:t.text},this._metaCuesByTextTime[r]=a;var s=n.convertToVTTCues([a])[0];i.data.push(s)}}}function c(t){this._tracksById||this._initTextTracks();var e=t.track?t.track:"native"+t.type,i=this._tracksById[e],n="captions"===t.type?"Unknown CC":"ID3 Metadata",r=t.cue;if(!i){var a={kind:t.type,_id:e,label:n,embedded:!0};i=A.call(this,a),this.renderNatively||"metadata"===i.kind?this.setTextTracks(this.video.textTracks):T.call(this,[i])}C.call(this,i,r)&&(this.renderNatively||"metadata"===i.kind?E(this.renderNatively,i,r):i.data.push(r))}function d(t){var e=this._tracksById[t.name];if(e){e.source=t.source;for(var i=t.captions||[],r=[],a=!1,s=0;s<i.length;s++){var o=i[s],u=t.name+"_"+o.begin+"_"+o.end;this._metaCuesByTextTime[u]||(this._metaCuesByTextTime[u]=o,r.push(o),a=!0)}a&&r.sort(function(t,e){return t.begin-e.begin});var h=n.convertToVTTCues(r);Array.prototype.push.apply(e.data,h)}}function l(t,e,i){t&&(f(t,e,i),this.instreamMode||(t.addEventListener?t.addEventListener(e,i):t["on"+e]=i))}function f(t,e,i){t&&(t.removeEventListener?t.removeEventListener(e,i):t["on"+e]=null)}function p(){n.cancelXhr(this._itemTracks);var t=this._tracksById&&this._tracksById.nativemetadata;(this.renderNatively||t)&&(k(this.renderNatively,this.video.textTracks),t&&(t.oncuechange=null)),this._itemTracks=null,this._textTracks=null,this._tracksById=null,this._cuesByTrackId=null,this._metaCuesByTextTime=null,this._unknownCount=0,this._activeCuePosition=null,this.renderNatively&&(this.removeTracksListener(this.video.textTracks,"change",this.textTrackChangeHandler),k(this.renderNatively,this.video.textTracks))}function m(t){this._cachedVTTCues[t]&&(this._cachedVTTCues[t]={},this._tracksById[t].data=[])}function v(){if(this._textTracks){var t=this._textTracks[this._currentTextTrackIndex];t&&(t.mode="disabled",(t.embedded||"nativecaptions"===t._id)&&(t.mode="hidden"))}}function g(){if(this._textTracks){var t=this._textTracks[this._currentTextTrackIndex];t&&(t.mode="showing")}}function b(){var e=this.video.textTracks,i=t.filter(e,function(t){return(t.inuse||!t._id)&&S(t.kind)});if(!this._textTracks||N.call(this,i))return void this.setTextTracks(e);for(var n=-1,r=0;r<this._textTracks.length;r++)if("showing"===this._textTracks[r].mode){n=r;break}n!==this._currentTextTrackIndex&&this.setSubtitlesTrack(n+1)}function y(){this.setTextTracks(this.video.textTracks)}function T(t){if(t){this._textTracks||this._initTextTracks();for(var e=0;e<t.length;e++){var i=t[e];if(!i.kind||S(i.kind)){var r=A.call(this,i);x.call(this,r),i.file&&(i.data=[],n.loadFile(i,this.addVTTCuesToTrack.bind(this,r),R))}}this._textTracks&&this._textTracks.length&&this.trigger("subtitlesTracks",{tracks:this._textTracks})}}function w(t,e){if(this.renderNatively){var i=this._tracksById[t._id];if(!i)return this._cuesByTrackId||(this._cuesByTrackId={}),void(this._cuesByTrackId[t._id]={cues:e,loaded:!1});if(!this._cuesByTrackId[t._id]||!this._cuesByTrackId[t._id].loaded){var n;for(this._cuesByTrackId[t._id]={cues:e,loaded:!0};n=e.shift();)E(this.renderNatively,i,n)}}}function E(t,e,n){if(!i.isIE()||!t||!window.TextTrackCue)return void e.addCue(n);var r=new window.TextTrackCue(n.startTime,n.endTime,n.text);e.addCue(r)}function k(e,n){n&&n.length&&t.each(n,function(t){if(!(i.isIE()&&e&&/^(native|subtitle|cc)/.test(t._id))){t.mode="disabled",t.mode="hidden";for(var n=t.cues.length;n--;)t.removeCue(t.cues[n]);t.embedded||(t.mode="disabled"),t.inuse=!1}})}function S(t){return"subtitles"===t||"captions"===t}function I(){this._textTracks=[],this._tracksById={},this._metaCuesByTextTime={},this._cuesByTrackId={},this._cachedVTTCues={},this._unknownCount=0}function A(e){var i,n=r.createLabel(e,this._unknownCount),a=n.label;if(this._unknownCount=n.unknownCount,this.renderNatively||"metadata"===e.kind){var s=this.video.textTracks;i=t.findWhere(s,{label:a}),i?(i.kind=e.kind,i.language=e.language||""):i=this.video.addTextTrack(e.kind,a,e.language||""),i["default"]=e["default"],i.mode="disabled",i.inuse=!0}else i=e,i.data=i.data||[];return i._id||(i._id=r.createId(e,this._textTracks.length)),i}function x(t){this._textTracks.push(t),this._tracksById[t._id]=t}function _(){if(this._textTracks){var e=t.filter(this._textTracks,function(t){return t.embedded||"subs"===t.groupid});this._initTextTracks(),t.each(e,function(t){this._tracksById[t._id]=t}),this._textTracks=e}}function P(i){var n=i.currentTarget.activeCues;if(n&&n.length){var r=n[n.length-1].startTime;if(this._activeCuePosition!==r){var a=[];if(t.each(n,function(t){t.startTime<r||(t.data||t.value?a.push(t):t.text&&this.trigger("meta",{metadataTime:r,metadata:JSON.parse(t.text)}))},this),a.length){var s=e.parseID3(a);this.trigger("meta",{metadataTime:r,metadata:s})}this._activeCuePosition=r}}}function C(t,e){var i=t.kind;this._cachedVTTCues[t._id]||(this._cachedVTTCues[t._id]={});var n,r=this._cachedVTTCues[t._id];switch(i){case"captions":case"subtitles":n=Math.floor(20*e.startTime);var a="_"+e.line,s=Math.floor(20*e.endTime),o=r[n+a]||r[n+1+a]||r[n-1+a];return!(o&&Math.abs(o-s)<=1)&&(r[n+a]=s,!0);case"metadata":var u=e.data?new Uint8Array(e.data).join(""):e.text;return n=e.startTime+u,!r[n]&&(r[n]=e.endTime,!0);default:return!1}}function N(t){if(t.length>this._textTracks.length)return!0;for(var e=0;e<t.length;e++){var i=t[e];if(!i._id||!this._tracksById[i._id])return!0}return!1}function R(t){i.log("CAPTIONS("+t+")")}var D={_itemTracks:null,_textTracks:null,_tracksById:null,_cuesByTrackId:null,_cachedVTTCues:null,_metaCuesByTextTime:null,_currentTextTrackIndex:-1,_unknownCount:0,_activeCuePosition:null,_initTextTracks:I,addTracksListener:l,clearTracks:p,clearCueData:m,disableTextTrack:v,enableTextTrack:g,getSubtitlesTrack:o,removeTracksListener:f,addTextTracks:T,setTextTracks:a,setupSideloadedTracks:s,setSubtitlesTrack:u,textTrackChangeHandler:null,addTrackHandler:null,addCuesToTrack:d,addCaptionsCue:h,addVTTCue:c,addVTTCuesToTrack:w,renderNatively:!1};return D}.apply(e,n),!(void 0!==r&&(t.exports=r))},9:function(t,e){"use strict";function i(t){return{bitrate:t.bitrate,label:t.label,width:t.width,height:t.height}}Object.defineProperty(e,"__esModule",{value:!0}),e.qualityLevel=i},17:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.PLAYER=1,e.SETUP=2,e.MEDIA=3,e.NETWORK=4,e.AD=5},18:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.BAD_HTTP_STATUS=4001,e.CROSSDOMAIN_ERROR=4002,e.BLOCKED_MIXED_CONTENT=4003},19:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.RECOVERABLE=1,e.FATAL=2},24:function(t,e,i){var n,r;n=[],r=function(){function t(t){return t&&t.length?t.end(t.length-1):0}return{endOfRange:t}}.apply(e,n),!(void 0!==r&&(t.exports=r))},25:function(t,e,i){var n,r;n=[i(36)],r=function(t){function e(){return{decode:function(t){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}}function i(t){function e(t,e,i,n){return 3600*(0|t)+60*(0|e)+(0|i)+(0|n)/1e3}var i=t.match(s);return i?i[3]?e(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?e(i[1],i[2],0,i[4]):e(0,i[1],i[2],i[4]):null}function n(){this.values=Object.create(null)}function r(t,e,i,n){for(var r=n?t.split(n):[t],a=0;a<=r.length;a+=1)if("string"==typeof r[a]){var s=r[a].split(i);if(2===s.length){var o=s[0],u=s[1];e(o,u)}}}function a(t,e,a){function s(){var e=i(t);if(null===e)throw new Error("Malformed timestamp: "+h);return t=t.replace(c,""),e}function o(t,e){var i=new n;r(t,function(t,e){switch(t){case"region":for(var n=a.length-1;n>=0;n--)if(a[n].id===e){i.set(t,a[n].region);break}break;case"vertical":i.alt(t,e,["rl","lr"]);break;case"line":var r=e.split(","),s=r[0];i.integer(t,s),i.percent(t,s)&&i.set("snapToLines",!1),i.alt(t,s,["auto"]),2===r.length&&i.alt("lineAlign",r[1],["start",y,"end"]);break;case"position":r=e.split(","),i.percent(t,r[0]),2===r.length&&i.alt("positionAlign",r[1],["start",y,"end","line-left","line-right","auto"]);break;case"size":i.percent(t,e);break;case"align":i.alt(t,e,["start",y,"end","left","right"])}},d,l),e.region=i.get("region",null),e.vertical=i.get("vertical","");var s=i.get("line","auto");"auto"===s&&b.line===-1&&(s=-1),e.line=s,e.lineAlign=i.get("lineAlign","start"),e.snapToLines=i.get("snapToLines",!0),e.size=i.get("size",100),e.align=i.get("align",y);var o=i.get("position","auto");"auto"===o&&50===b.position&&(o="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=o}function u(){t=t.replace(f,"")}var h=t;if(u(),e.startTime=s(),u(),"-->"!==t.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+h);t=t.substr(3),u(),e.endTime=s(),u(),o(t,e)}var s=/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/,o=/^-?\d+$/,u=/\r\n|\n/,h=/^NOTE($|[ \t])/,c=/^[^\sa-zA-Z-]+/,d=/:/,l=/\s/,f=/^\s+/,p=/-->/,m=/^WEBVTT([ \t].*)?$/,v=window.requestAnimationFrame||function(t){return window.setTimeout(t,17)},g=function(t,i){this.window=t,this.state="INITIAL",this.buffer="",this.decoder=i||new e,this.regionList=[],this.maxCueBatch=1e3};n.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,i){return i?this.has(t)?this.values[t]:e[i]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,i){for(var n=0;n<i.length;++n)if(e===i[n]){this.set(t,e);break}},integer:function(t,e){o.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return e=parseFloat(e),e>=0&&e<=100&&(this.set(t,e),!0)}};var b=new t(0,0,0),y="middle"===b.align?"middle":"center";return g.prototype={parse:function(e,i){function n(){for(var t=l.buffer,e=0;e<t.length&&"\r"!==t[e]&&"\n"!==t[e];)++e;var i=t.substr(0,e);return"\r"===t[e]&&++e,"\n"===t[e]&&++e,l.buffer=t.substr(e),i}function s(t){r(t,function(t,e){switch(t){case"Region":console.log("parse region",e)}},d)}function o(){"CUETEXT"===l.state&&l.cue&&l.oncue&&l.oncue(l.cue),l.cue=null,l.state="INITIAL"===l.state?"BADWEBVTT":"BADCUE"}function c(){try{for(;l.buffer&&T<=l.maxCueBatch;){if(!u.test(l.buffer))return l.flush(),this;switch(y?y=!1:f=n(),l.state){case"HEADER":d.test(f)?s(f):f||(l.state="ID");break;case"NOTE":f||(l.state="ID");break;case"ID":if(h.test(f)){l.state="NOTE";break}if(!f)break;if(l.cue=new t(0,0,""),l.state="CUE",!p.test(f)){l.cue.id=f;break}case"CUE":try{a(f,l.cue,l.regionList)}catch(e){l.cue=null,l.state="BADCUE";break}l.state="CUETEXT";break;case"CUETEXT":var r=p.test(f);if(!f||r&&(y=!0)){l.oncue&&(T+=1,l.oncue(l.cue)),l.cue=null,l.state="ID";break}l.cue.text&&(l.cue.text+="\n"),l.cue.text+=f;break;case"BADCUE":f||(l.state="ID")}}if(T=0,l.buffer)v(c);else if(!i)return l.flush(),this}catch(e){return o(e),this}}var l=this;e&&(l.buffer+=l.decoder.decode(e,{stream:!0}));try{var f;if("INITIAL"===l.state){if(!u.test(l.buffer))return this;f=n();var g=f.match(m);if(!g||!g[0])throw new Error("Malformed WebVTT signature.");l.state="HEADER"}}catch(b){return o(),this}var y=!1,T=0;c()},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse(void 0,!0)),"INITIAL"===t.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return t.onflush&&t.onflush(),this}},g}.apply(e,n),!(void 0!==r&&(t.exports=r))},30:function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.Severity=e.Code=e.Category=e.NetworkError=void 0;var r=i(32);Object.defineProperty(e,"NetworkError",{enumerable:!0,get:function(){return r.NetworkError}});var a=i(17),s=n(a),o=i(18),u=n(o),h=i(19),c=n(h);e.Category=s,e.Code=u,e.Severity=c},31:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.JWError=function(t,e,i,n){return{category:t,code:e,severity:i,message:n}}},32:function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e["default"]=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.badStatusMessage=e.networkErrorMessage=e.networkErrorCode=e.NetworkError=void 0;var r=i(17),a=n(r),s=i(18),o=n(s),u=i(19),h=n(u),c=i(31),d=(e.NetworkError=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=d(t,e);return(0,c.JWError)(a.NETWORK,n,h.FATAL,l(n,t,i))},e.networkErrorCode=function(t,e){var i=void 0;return i=t>0?o.BAD_HTTP_STATUS:e&&"http:"===e.substring(0,5)&&"https:"===document.location.protocol?o.BLOCKED_MIXED_CONTENT:o.CROSSDOMAIN_ERROR}),l=e.networkErrorMessage=function(t,e,i){var n="";switch(t){case o.BAD_HTTP_STATUS:n=f(e,i);break;case o.CROSSDOMAIN_ERROR:n="Crossdomain access denied";break;case o.BLOCKED_MIXED_CONTENT:n="Unable to fetch HTTP resource over HTTPS";break;default:n="Unknown Network Error"}return n},f=e.badStatusMessage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i="";switch(t){case 403:i="You do not have permission to access this content";break;case 404:i="404 Not Found";break;default:i=t+" "+e}return i}},46:function(t,e,i){var n,r;n=[i(2)],r=function(t){return{container:null,volume:function(e){e=t.between(e/100,0,1),this.video.volume=e},mute:function(t){this.video.muted=!!t,this.video.muted||this.video.removeAttribute("muted")},resize:function(e,i,n){if(!(e&&i&&this.video.videoWidth&&this.video.videoHeight))return!1;if("uniform"===n){var r=e/i,a=this.video.videoWidth/this.video.videoHeight,s=null;Math.abs(r-a)<.09&&(s="fill"),t.style(this.video,{objectFit:s})}return!1},getContainer:function(){return this.container},setContainer:function(t){this.container=t,t.insertBefore(this.video,t.firstChild)},remove:function(){this.stop(),this.destroy(),this.container===this.video.parentNode&&this.container.removeChild(this.video)},getVideo:function(e,i){var n=i||document.getElementById(e),r=n?n.querySelector("video"):null;return r||(r=document.createElement("video"),t.isMobile()&&r.setAttribute("jw-gesture-required","")),r.className="jw-video jw-reset",this.video=r,r}}}.apply(e,n),!(void 0!==r&&(t.exports=r))},47:function(t,e,i){var n,r;n=[i(3),i(10),i(5),i(1),i(24)],r=function(t,e,i,n,r){var a=256;return{stallCheckTimeout_:-1,lastStalledTime_:NaN,trigger:function(e,i){return t.trigger.call(this,e,i)},setState:function(t){return e.setState.call(this,t)},attachMedia:function(){this.eventsOn_()},detachMedia:function(){return this.stopStallCheck(),this.eventsOff_(),this.video},stopStallCheck:function(){clearTimeout(this.stallCheckTimeout_)},startStallCheck:function(){this.stopStallCheck(),this.stallCheckTimeout_=setTimeout(this.stalledHandler.bind(this,this.video.currentTime),a)},stalledHandler:function(t){t===this.video.currentTime&&(this.video.paused||this.video.ended||this.state!==i.LOADING&&this.state!==i.ERROR&&(this.seeking||(this.atEdgeOfLiveStream()&&this.setPlaybackRate(1),this.setState(i.STALLED))))},atEdgeOfLiveStream:function(){if(!this.isLive())return!1;var t=2;return r.endOfRange(this.video.buffered)-this.video.currentTime<=t},setAutoplayAttributes:function(){this.video.setAttribute("autoplay",""),this.video.setAttribute("muted","")},removeAutoplayAttributes:function(){this.video.removeAttribute("autoplay"),this.video.removeAttribute("muted")}}}.apply(e,n),!(void 0!==r&&(t.exports=r))},48:function(t,e,i){var n,r;n=[i(2),i(5)],r=function(t,e){return{seeking:!1,loadedmetadata:function(){var t={duration:this.getDuration(),height:this.video.videoHeight,width:this.video.videoWidth},e=this.drmUsed;e&&(t.drm=e),this.trigger("meta",t)},timeupdate:function(){this.stopStallCheck();var t=this.video.videoHeight;t!==this._helperLastVideoHeight&&this.adaptation&&this.adaptation({size:{width:this.video.videoWidth,height:t}}),this._helperLastVideoHeight=t,this.state!==e.STALLED&&this.state!==e.LOADING||this.setState(e.PLAYING),this.startStallCheck();var i=this.getCurrentTime(),n={position:i,duration:this.getDuration()};if(this.getPtsOffset){var r=this.getPtsOffset();r>=0&&(n.metadata={mpegts:r+i})}(this.state===e.PLAYING||this.seeking)&&this.trigger("time",n)},click:function(t){this.trigger("click",t)},volumechange:function(){var t=this.video;this.trigger("volume",{volume:Math.round(100*t.volume)}),this.trigger("mute",{mute:t.muted})},seeked:function(){this.seeking&&(this.seeking=!1,this.trigger("seeked"))},playing:function(){this.setState(e.PLAYING),this.video.hasAttribute("jw-gesture-required")&&this.video.removeAttribute("jw-gesture-required"),this.trigger("providerFirstFrame")},pause:function(){this.state!==e.COMPLETE&&(this.video.ended||this.video.currentTime!==this.video.duration&&this.setState(e.PAUSED))},progress:function(){var e=this.getDuration();if(!(e<=0||e===1/0)){var i=this.video.buffered;if(i&&0!==i.length){var n=t.between(i.end(i.length-1)/e,0,1);this.trigger("bufferChange",{bufferPercent:100*n,position:this.getCurrentTime(),duration:e})}}},ratechange:function(){this.trigger("ratechange",{playbackRate:this.video.playbackRate})},ended:function(){this.stopStallCheck(),this._helperLastVideoHeight=0,this.state!==e.IDLE&&this.state!==e.COMPLETE&&this.trigger("complete")},loadeddata:function(){this.renderNatively&&this.setTextTracks(this.video.textTracks),this.video.setAttribute("jw-loaded","data")},error:function(){var t=this.video.error&&this.video.error.code||-1,e={1:"Unknown operation aborted",2:"Unknown network error",3:"Unknown decode error",4:"Source not supported"}[t]||"Unknown";this.trigger("mediaError",{code:t,message:"Error playing file: "+e})}}}.apply(e,n),!(void 0!==r&&(t.exports=r))},78:function(t,e,i){function n(t){return t&&t.__esModule?t:{"default":t}}var r,a,s=i(9),o=i(172),u=n(o),h=i(30);r=[i(1),i(23),i(116),i(2),i(5),i(4),i(3),i(48),i(46),i(47),i(8),i(29),i(183)],a=function(t,e,i,n,r,a,c,d,l,f,p,m,v){function g(u,g){function y(){ct.addEventListener("error",I),ct.addEventListener("trackschanged",j),ct.addEventListener("buffering",ht),t.each(pt,function(t,e){mt.video.addEventListener(e,t,!1)}),o.CueDispatcher.on("cues",st)}function T(t,e){return n.generateLabel(t,g.qualityLabels,e)}function w(t,e){for(var i=0,n=Math.abs(e),r=1;r<mt.jwLevels.length;r++){var a=Math.abs(e-mt.jwLevels[r].bitrate);a<n&&mt.jwLevels[r].height===t&&(n=a,i=r)}return i}function E(){ct.removeEventListener("error",I),ct.removeEventListener("trackschanged",j),ct.removeEventListener("buffering",ht),t.each(pt,function(t,e){mt.video.removeEventListener(e,t)}),o.CueDispatcher.off("cues",st)}function k(){var t=mt.video;E(),ct.destroy(),mt.video=mt.video=t,window.VTTCue=b}function S(t,e){var i=t.headers,n=t.customData;if(i)for(var r=0;r<i.length;r++){var a=i[r];e.headers[a.name]=a.value}n&&(e.headers.customData=n)}function I(t){var e=t.detail?t.detail.category:t.category,i=t.detail?t.detail.code:t.code;if(e===v.util.Error.Category.NETWORK){var n=ut(i,t.data);return void mt.trigger(a.JWPLAYER_MEDIA_ERROR,{message:"Error loading media: "+n})}if(i===v.util.Error.Code.MP4_SIDX_WRONG_BOX_TYPE){var r=tt();return q(r,mt.jwLevels)&&et(r),void console.error("The MP4 SIDX parser found the wrong box type.")}Z(),mt.trigger(a.JWPLAYER_MEDIA_ERROR,{message:"Error playing file: Unknown playback error"})}function A(){return t.map(mt.jwLevels,function(t){return(0,s.qualityLevel)(t)})}function x(){return mt.currentQuality}function _(t){return mt._helperLastVideoHeight=0,v.polyfill.installAll(),new v.Player(t)}function P(t){ct||(ct=_(mt.video)),mt.currentAudioIndex=-1,(n.isAndroid()||t.preload&&"none"!==t.preload)&&(E(),y(),D(t))}function C(t){E(),y(),mt.setState(r.LOADING),mt.loadedItem!==t?(mt.clearTracks(),mt.drmUsed=null,D(t)):(N(t.tracks),mt.video.currentTime=0,R())}function N(t){mt.video.textTracks&&(t&&t.length&&mt.setupSideloadedTracks(t),mt.setTextTracks(mt.video.textTracks))}function R(){var t=mt.video.play();t&&t["catch"]?t["catch"](function(t){console.warn(t),"NotAllowedError"===t.name&&mt.video.hasAttribute("jw-gesture-required")&&mt.trigger("autoplayFailed")}):mt.video.hasAttribute("jw-gesture-required")&&mt.trigger("autoplayFailed")}function D(e){lt=!0,dt=e.sources[0].drm||{},mt.loadedItem=e,mt.setupSideloadedTracks(e.tracks),mt.on(a.JWPLAYER_PLAYER_STATE,function(){var t=mt.video;mt.state===r.STALLED&&t&&t.buffered&&t.buffered.length>0&&t.currentTime<t.buffered.start(0)&&mt.seek(t.buffered.start(0))}),(e.withCredentials||gt.withCredentials)&&ct.getNetworkingEngine().registerRequestFilter(function(t,e){e.allowCrossSiteCredentials=!0});var i=dt.widevine?dt.widevine.serverCertificateUrl:void 0;i?n.ajax({url:i,responseType:"arraybuffer"},t.partial(L,e),I):L(e)}function L(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sources:[]},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0;e.response&&(n=new Uint8Array(e.response)),ct.configure({drm:F(n),preferredTextLanguage:gt.selectedCaptionCode||i.getCode(gt.captionLabel),abr:{enabled:mt.abr}});var r=t.sources[0].file,a=t.starttime||0;ct.load(r,a).then(M,I)}function M(){mt.trigger(a.JWPLAYER_MEDIA_BUFFER_FULL)}function O(e){var i=0===e;if(q(e,mt.jwLevels)){var n=mt.jwLevels[e].shakaId,r=t.findWhere(mt.shakaLevels,{id:n});if(mt.abr=i,ct.configure({abr:{enabled:mt.abr}}),r){var a=r.bandwidth>yt,s=r.language!==bt;yt=r.bandwidth,ct.selectVariantTrack(r,a||s)}U()}}function U(t){var e=mt.audioTracks[t||G()];if(e){var i=mt.shakaAudioTracks[e.shakaIndex];i&&(bt=i.language,ct.selectAudioLanguage(bt))}}function j(){var e=ct.getTextTracks();mt._tracksById&&e.length===Object.keys(mt._tracksById).length||(e=e.filter(function(t){return"Shaka Player TextTrack"!==t.label}).map(function(t){var e=t;return e.kind+="s",e.embedded=!0,e.label=i.getLabel(e.language),e}),mt.addTextTracks(e));var n=ct.getVariantTracks(),r=t.findWhere(n,{active:!0}),s=t.groupBy(n,"language"),o="video";mt.tracksByLang=s,t.size(s)&&(B(s,r.language),U(mt.currentAudioIndex),r&&(V(s[r.language]),O(mt.currentQuality),mt.trigger(a.JWPLAYER_MEDIA_LEVELS,{levels:mt.jwLevels,currentQuality:mt.currentQuality})),r.mimeType.indexOf("audio")>-1&&(o="audio")),mt.trigger(a.JWPLAYER_MEDIA_TYPE,{mediaType:o})}function B(e,i){var n=t.find(e[i],function(t){return t.active}),r=[];t.forEach(t.keys(e),function(t){t===i?r.push(n):r.push(e[t][0])}),t.isArray(r)&&W(r),mt.trigger(a.JWPLAYER_AUDIO_TRACKS,{tracks:mt.audioTracks,currentTrack:mt.currentAudioIndex})}function F(t){var e,i,n={},r="";if(m.isSupported("clearkey")&&dt.clearkey)return i=dt.clearkey,i.keyId=i.keyId?i.keyId.replace(/-/g,""):null,n.clearKeys={},n.clearKeys[i.keyId]=i.key,n;if(m.isSupported("widevine"))mt.drmUsed="widevine",e="com.widevine.alpha",r="http://widevine-proxy.appspot.com/proxy";else{if(!m.isSupported("playready"))return n;mt.drmUsed="playready",e="com.microsoft.playready",r="http://microsoft-proxy.appspot.com/proxy"}return(i=dt[mt.drmUsed])?(t&&(n.advanced={},n.advanced[e]={serverCertificate:t}),n.servers=n.servers||{},n.servers[e]=i.url||r,ct.getNetworkingEngine().registerRequestFilter(function(t,e){t===v.net.NetworkingEngine.RequestType.LICENSE&&i&&S(i,e)}),n):n}function V(e){mt.currentQuality=0,mt.shakaLevels=e,mt.shakaLevels.sort(function(t,e){return t.height<e.height||t.bandwidth<e.bandwidth?1:-1});var i=n.hasRedundantLevels(mt.shakaLevels);mt.jwLevels=t.reduce(mt.shakaLevels,function(t,e){return t.push({shakaId:e.id,bitrate:e.bandwidth,label:T(e,i),height:e.height,width:e.width}),t},[]),mt.shakaLevels.length>1&&mt.jwLevels.unshift({label:"Auto",shakaId:"auto"})}function H(e){return t.map(e,function(r,a){var s=r.language,o=t.where(e,{language:s}).length>1,u=i.getLabel(s);return"und"===s?u="Unknown":"dv"===s&&(u="Audio Description"),o&&(u+=" ("+n.toKbps(r.bandwidth)+" kbps)"),{autoselect:!1,defaulttrack:!!r.active,groupid:"default",language:r.language,name:u,shakaIndex:a,shakaId:r.id}})}function K(){var e;return q(mt.currentAudioIndex,mt.audioTracks)?mt.currentAudioIndex:(e=t.find(mt.audioTracks,function(t){return t.defaulttrack&&"dv"!==t.language}),e||(e=t.find(mt.audioTracks,function(t){return"dv"!==t.language})),e?e.shakaIndex:0)}function q(e,i){return t.isNumber(e)&&!t.isNaN(e)&&e>=0&&e<t.size(i)}function G(){return q(mt.currentAudioIndex,mt.audioTracks)?mt.currentAudioIndex:-1}function X(){return t.isArray(mt.audioTracks)?mt.audioTracks:[]}function Y(t){mt.currentAudioIndex=t,q(mt.currentQuality,mt.jwLevels)&&et(mt.currentQuality)}function W(e){t.isArray(e)&&(mt.shakaAudioTracks=e,mt.audioTracks=H(e),mt.currentAudioIndex=K())}function z(){mt.video.pause(),mt.setState(r.PAUSED)}function $(){return mt.seeking?(mt.setState(r.LOADING),void mt.once(a.JWPLAYER_MEDIA_SEEKED,mt.play)):(R(),void mt.setVisibility(mt))}function J(t){if("LIVE"!==vt){var e=ct.seekRange(),i=t,n=t;t<0&&(i=e.end-e.start+t,n=e.end+t),mt.trigger(a.JWPLAYER_MEDIA_SEEK,{position:mt.getCurrentTime(),offset:i}),mt.seeking=!0,mt.video.currentTime=n}}function Q(t){t=!!t,t?e.style(this.container,{visibility:"visible",opacity:1}):e.style(this.container,{visibility:"",opacity:0})}function Z(){E(),mt.video.pause(),mt.setState(r.IDLE)}function tt(){var e=t.findWhere(mt.shakaLevels,{active:!0});if(e)for(var i=0;i<mt.jwLevels.length;i+=1)if(e.id===mt.jwLevels[i].shakaId)return i;return null}function et(t){V(mt.tracksByLang[mt.audioTracks[mt.currentAudioIndex].language]),O(t),mt.currentQuality=t}function it(t){mt.video.playbackRate=mt.video.defaultPlaybackRate=t,ct&&ct.trickPlay(t)}function nt(){return ct?ct.getPlaybackRate():mt.video.playbackRate}function rt(){return!!ct&&ct.isLive()}function at(t){ct=t}function st(e){var i=ct.getTextTracks(),n=mt.getSubtitlesTrack();if(n<0){var r=t.findWhere(i,{active:!0});n=t.indexOf(i,r)}var a=i[n];if(a){var s=void 0,o=t.findWhere(mt._tracksById,{language:a.language});s=o?o._id:a.kind+"s"+n,mt.renderNatively||mt.clearCueData(s),e.forEach(function(t){mt.renderNatively&&(t.align="center"),mt.addVTTCue({type:a.kind+"s",cue:t,track:s})})}return[]}function ot(t){return n.isChrome()&&t}function ut(t,e){var i=void 0,n=v.util.Error.Code;switch(t){case n.BAD_HTTP_STATUS:i=(0,h.NetworkError)(e[1],e[0],e[2]).message;break;default:i="File could not be played"}return i}function ht(e){mt.video.paused||mt.video.ended||(!t.isUndefined(mt.state)&&e.buffering?mt.setState(r.LOADING):mt.setState(r.PLAYING))}var ct,dt,lt,ft=this,pt={},mt=this,vt="VOD",gt=g,bt=void 0,yt=void 0;this.video=l.getVideo.call(mt,u),this.loadedItem=null,this.drmUsed=null,this.position=0,this.levels=[],this.currentQuality=-1,this.abr=!0,this.supportsPlaybackRate=!0,t.each(d,function(t,e){"function"==typeof t?pt[e]=t.bind(mt):mt[e]=t}),mt.adaptation=function(t){mt.shakaLevels||j();var e=ct.getStats(),i=w(t.size.height,e.streamBandwidth),n={level:{index:i,label:mt.jwLevels[i].label,bitrate:e.streamBandwidth,width:t.size.width,height:t.size.height},bandwidth:e.estimatedBandwidth,type:"visualQuality"};lt?(n.reason="initial choice",n.mode="auto",lt=!1):0===mt.currentQuality?n.reason=n.mode="auto":(n.reason="api",n.mode="manual"),mt.trigger("visualQuality",n)},t.extend(mt,c,l,f,p,{eventsOn_:function(){ct=_(mt.video),y()},eventsOff_:function(){dt&&n.isFF()?(mt.remove(),mt.video=mt.getVideo(u,mt.container),mt.setContainer(mt.container)):k()},init:P,load:C,pause:z,getQualityLevels:A,getCurrentQuality:x,getAudioTracks:X,getCurrentAudioTrack:G,play:$,seek:J,setCurrentQuality:function(t){q(t,mt.jwLevels)&&t!==mt.currentQuality&&(et(t),mt.trigger(a.JWPLAYER_MEDIA_LEVEL_CHANGED,{currentQuality:t,levels:mt.jwLevels}))},setAudioTracks:function(e){t.isArray(e)&&(W(e),mt.trigger(a.JWPLAYER_AUDIO_TRACKS,{tracks:mt.audioTracks,currentTrack:mt.currentAudioIndex}))},setCurrentAudioTrack:function(t){q(t,mt.audioTracks)&&(Y(t),mt.trigger(a.JWPLAYER_AUDIO_TRACKS,{tracks:mt.audioTracks,currentTrack:t}),mt.trigger(a.JWPLAYER_AUDIO_TRACK_CHANGED,{tracks:mt.audioTracks,currentTrack:t}))},setPlaybackRate:it,getPlaybackRate:nt,isLive:rt,setVisibility:Q,stop:Z,getCurrentTime:function(){var t=mt.video.currentTime;return ct.isLive()&&"DVR"===vt&&(t=-(ct.seekRange().end-t)),t},getDuration:function(){var t=mt.loadedItem.minDvrWindow,e=mt.video.duration;if(ct.isLive()){var i=ct.seekRange();e=-(i.end-i.start),e=n.isDvr(e,t)?e:1/0}return vt=n.streamType(e,t),e},setShakaPlayer:at,supportsFullscreen:t.constant(!0),getName:t.constant({name:"shaka"}),destroy:k,renderNatively:ot(gt.renderCaptionsNatively),setSubtitlesTrack:function(t){p.setSubtitlesTrack.call(ft,t);var e=ct.getTextTracks(),i=e[t-1];mt.renderNatively||(mt._currentTextTrackIndex=t-1),i&&(ct.selectTextLanguage(i.language),gt.selectedCaptionCode=i.language)}}),pt.loadeddata=function(){if(mt.video.textTracks&&"Shaka Player TextTrack"===mt.video.textTracks[0].label){var t=mt.video.textTracks[0];t.inuse=!1,t.mode="hidden",t.embedded=!0}d.loadeddata.call(mt)},pt.playing=function(){ct.isBuffering()||d.playing.call(mt)},pt.timeupdate=function(){ct.isBuffering()||d.timeupdate.call(mt)}}var b=window.VTTCue;return v.media.TextEngine.registerParser("text/vtt",u["default"]),v.media.TextEngine.registerParser('text/vtt; codecs="vtt"',u["default"]),g.getName=t.constant({name:"shaka"}),g}.apply(e,r),!(void 0!==a&&(t.exports=a))},116:function(t,e,i){var n,r,a=i(1);n=[],r=function(){function t(t){if(t)return 3===t.length?t:i[t.slice(0,2)]||t;
}function e(t){return n[t]||""}var i={zh:"Chinese",nl:"Dutch",en:"English",fr:"French",de:"German",it:"Italian",ja:"Japanese",pt:"Portuguese",ru:"Russian",es:"Spanish",el:"Greek"},n=a.invert(i);return{getLabel:t,getCode:e}}.apply(e,n),!(void 0!==r&&(t.exports=r))},171:function(t,e,i){var n,r;n=[i(25)],r=function(t){var e=this;return e.parser=new t(window),e.arrayBufferToString=function(t){var e,i="";if(!t)return"";e=new Uint8Array(t),239===e[0]&&187===e[1]&&191===e[2]&&(e=e.subarray(3));for(var n=65535,r=0;r<e.length;r+=n)i+=String.fromCharCode.apply(null,e.subarray(r,r+n));return window.decodeURIComponent(window.escape(i))},e.parseCuesFromText=function(t){var i=[];return e.parser.oncue=function(t){i.push(t)},e.parser.parse(t),i},e}.apply(e,n),!(void 0!==r&&(t.exports=r))},172:function(t,e,i){"use strict";function n(){}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n;var r=i(171),a=i(3),s=e.CueDispatcher=Object.create(a);n.prototype.parseInit=function(){},n.prototype.parseMedia=function(t){var e=r.arrayBufferToString(t),i=void 0;return e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n"),i=r.parseCuesFromText(e),s.trigger("cues",i),[]}},183:function(t,e,i){var n;!function(){var r={};(function(t){function e(t,e){var i=t.split("."),n=ds;i[0]in n||!n.execScript||n.execScript("var "+i[0]);for(var r;i.length&&(r=i.shift());)i.length||void 0===e?n=n[r]?n[r]:n[r]={}:n[r]=e}function i(t){function e(){}var i=le;e.prototype=i.prototype,t.ne=i.prototype,t.prototype=new e,t.prototype.constructor=t,t.ke=function(t,e,n){return i.prototype[e].apply(t,Array.prototype.slice.call(arguments,2))}}function n(t){this.c=Math.exp(Math.log(.5)/t),this.b=this.a=0}function r(t,e,i){var n=Math.pow(t.c,e);i=i*(1-n)+n*t.a,isNaN(i)||(t.a=i,t.b+=e)}function a(t){return t.a/(1-Math.pow(t.c,t.b))}function s(){this.c=new n(2),this.f=new n(5),this.a=0,this.b=5e5}function o(){}function u(t,e,i,n){this.severity=t,this.category=e,this.code=i,this.data=Array.prototype.slice.call(arguments,3)}function h(t){var e;t instanceof h?(c(this,t.X),this.xa=t.xa,this.Z=t.Z,d(this,t.Fa),this.U=t.U,l(this,g(t.a)),this.qa=t.qa):t&&(e=String(t).match(ls))?(c(this,e[1]||"",!0),this.xa=f(e[2]||""),this.Z=f(e[3]||"",!0),d(this,e[4]),this.U=f(e[5]||"",!0),l(this,e[6]||"",!0),this.qa=f(e[7]||"")):this.a=new v(null)}function c(t,e,i){t.X=i?f(e,!0):e,t.X&&(t.X=t.X.replace(/:$/,""))}function d(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.Fa=e}else t.Fa=null}function l(t,e,i){e instanceof v?t.a=e:(i||(e=p(e,vs)),t.a=new v(e))}function f(t,e){return t?e?decodeURI(t):decodeURIComponent(t):""}function p(t,e,i){return"string"==typeof t?(t=encodeURI(t).replace(e,m),i&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function m(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}function v(t){this.b=t||null}function g(t){var e=new v;if(e.b=t.b,t.a){var i,n={};for(i in t.a)n[i]=t.a[i].concat();e.a=n,e.c=t.c}return e}function b(t,e){return t.reduce(function(t,e,i){return e["catch"](t.bind(null,i))}.bind(null,e),Promise.reject())}function y(t,e){return t.concat(e)}function T(){}function w(t){return null!=t}function E(t){return function(e){return e!=t}}function k(t,e,i){return i.indexOf(t)==e}function S(t,e){if(!e.length)return t;var i=e.map(function(t){return new h(t)});return t.map(function(t){return new h(t)}).map(function(t){return i.map(t.resolve.bind(t))}).reduce(y,[]).map(function(t){return t.toString()})}function I(t,e){return{keySystem:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:e||[],keyIds:[]}}function A(t,e,i,n,r){var a,s=r in n;for(a in e){var o=r+"."+a,u=s?n[r]:i[a],h=!!{".abr.manager":!0}[o]||!!{serverCertificate:!0}[a];(s||a in t)&&(void 0===e[a]?void 0===u||s?delete t[a]:t[a]=u:h?t[a]=e[a]:"object"==typeof t[a]&&"object"==typeof e[a]?A(t[a],e[a],u,n,o):typeof e[a]==typeof u&&(t[a]=e[a]))}}function x(t){return JSON.parse(JSON.stringify(t))}function _(){var t,e,i=new Promise(function(i,n){t=i,e=n});return i.resolve=t,i.reject=e,i}function P(t){this.f=!1,this.a=[],this.b=[],this.c=[],this.h=t||null}function C(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0}}function N(t,e){return{uris:t,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:e}}function R(t,e,i){for(var n=0;n<t.length;++n)if(i(t[n],e))return n;return-1}function D(){this.a={}}function L(){this.a=new D}function M(t,e,i,n){t.a&&(e=new j(e,i,n),t.a.push(i,e))}function O(t,e,i,n){M(t,e,i,function(t){this.ea(e,i),n(t)}.bind(t))}function U(t){if(t.a){var e,i=t.a,n=[];for(e in i.a)n.push.apply(n,i.a[e]);for(i=0;i<n.length;++i)n[i].ea();t.a.a={}}}function j(t,e,i){this.target=t,this.type=e,this.a=i,this.target.addEventListener(e,i,!1)}function B(t){return!t||!Object.keys(t).length}function F(t){return Object.keys(t).map(function(e){return t[e]})}function V(t,e){return Object.keys(t).reduce(function(i,n){return i[n]=e(t[n],n),i},{})}function H(t,e){return Object.keys(t).every(function(i){return e(i,t[i])})}function K(t){if(!t)return"";t=new Uint8Array(t),239==t[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3)),t=escape(Y(t));try{return decodeURIComponent(t)}catch(e){throw new u(2,2,2004)}}function q(t,e){if(!t)return"";if(t.byteLength%2)throw new u(2,2,2004);var i;if(t instanceof ArrayBuffer)i=t;else{var n=new Uint8Array(t.byteLength);n.set(new Uint8Array(t)),i=n.buffer}var n=t.byteLength/2,r=new Uint16Array(n);i=new DataView(i);for(var a=0;a<n;a++)r[a]=i.getUint16(2*a,e);return Y(r)}function G(t){var e=new Uint8Array(t);if(239==e[0]&&187==e[1]&&191==e[2])return K(e);if(254==e[0]&&255==e[1])return q(e.subarray(2),!1);if(255==e[0]&&254==e[1])return q(e.subarray(2),!0);var i=function(t,e){return t.byteLength<=e||32<=t[e]&&126>=t[e]}.bind(null,e);if(!e[0]&&!e[2])return q(t,!1);if(!e[1]&&!e[3])return q(t,!0);if(i(0)&&i(1)&&i(2)&&i(3))return K(t);throw new u(2,2,2003)}function X(t){t=unescape(encodeURIComponent(t));for(var e=new Uint8Array(t.length),i=0;i<t.length;++i)e[i]=t.charCodeAt(i);return e.buffer}function Y(t){for(var e="",i=0;i<t.length;i+=16e3)e+=String.fromCharCode.apply(null,t.subarray(i,i+16e3));return e}function W(t){this.a=null,this.b=function(){this.a=null,t()}.bind(this)}function z(t){t.cancel(),t.a=setTimeout(t.b,100)}function $(e,i){var n=void 0==i||i,r=t.btoa(String.fromCharCode.apply(null,e)).replace(/\+/g,"-").replace(/\//g,"_");return n?r:r.replace(/=*$/,"")}function J(e){e=t.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var i=new Uint8Array(e.length),n=0;n<e.length;++n)i[n]=e.charCodeAt(n);return i}function Q(e){for(var i=new Uint8Array(e.length/2),n=0;n<e.length;n+=2)i[n/2]=t.parseInt(e.substr(n,2),16);return i}function Z(t){for(var e="",i=0;i<t.length;++i){var n=t[i].toString(16);1==n.length&&(n="0"+n),e+=n}return e}function tt(t,e){if(!t&&!e)return!0;if(!t||!e||t.length!=e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!=e[i])return!1;return!0}function et(t,e,i,n){this.j=this.i=this.v=null,this.F=!1,this.b=null,this.f=new L,this.a=[],this.o=[],this.l=new _,this.ha=t,this.h=null,this.g=function(t){this.l.reject(t),e(t)}.bind(this),this.M={},this.ya=i,this.ia=n,this.A=new W(this.yd.bind(this)),this.ga=this.c=!1,this.B=[],this.fa=!1,this.I=setInterval(this.xd.bind(this),1e3),this.l["catch"](function(){})}function it(t,e){if(!t.i)return O(t.f,e,"encrypted",function(){this.g(new u(2,6,6010))}.bind(t)),Promise.resolve();t.j=e,O(t.f,t.j,"play",t.dd.bind(t));var i=t.j.setMediaKeys(t.i),i=i["catch"](function(t){return Promise.reject(new u(2,6,6003,t.message))}),n=null;return t.b.serverCertificate&&(n=t.i.setServerCertificate(t.b.serverCertificate).then(function(){})["catch"](function(t){return Promise.reject(new u(2,6,6004,t.message))})),Promise.all([i,n]).then(function(){return this.c?Promise.reject():(rt(this),void(this.b.initData.length||this.o.length||M(this.f,this.j,"encrypted",this.Uc.bind(this))))}.bind(t))["catch"](function(t){return this.c?Promise.resolve():Promise.reject(t)}.bind(t))}function nt(t,e){return Promise.all(e.map(function(t){return lt(this,t).then(function(t){if(t){for(var e=new _,i=0;i<this.a.length;i++)if(this.a[i].Y==t){this.a[i].cb=e;break}return Promise.all([t.remove(),e])}}.bind(this))}.bind(t)))}function rt(t){var e=t.b?t.b.initData:[];return e.forEach(function(t){ft(this,t.initDataType,t.initData)}.bind(t)),t.o.forEach(function(t){lt(this,t)}.bind(t)),e.length||t.o.length||t.l.resolve(),t.l}function at(t){return t.a.map(function(t){return t.Y.sessionId})}function st(t,e,i,n,r){var a=ht(t);e.periods.forEach(function(t){t.variants.forEach(function(t){a&&(t.drmInfos=[a]),t.drmInfos.forEach(function(e){ut(this,e);var a=n[e.keySystem];a||(a={audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:i?"required":"optional",sessionTypes:[i?"persistent-license":"temporary"],label:e.keySystem,drmInfos:[]},n[e.keySystem]=a,r.push(e.keySystem)),a.drmInfos.push(e),e.distinctiveIdentifierRequired&&(a.distinctiveIdentifier="required"),e.persistentStateRequired&&(a.persistentState="required");var s=[];t.video&&s.push(t.video),t.audio&&s.push(t.audio),s.forEach(function(t){var i="video"==t.type?a.videoCapabilities:a.audioCapabilities,n=("video"==t.type?e.videoRobustness:e.audioRobustness)||"",r=t.mimeType;t.codecs&&(r+='; codecs="'+t.codecs+'"'),i.push({robustness:n,contentType:r})}.bind(this))}.bind(this))}.bind(this))}.bind(t))}function ot(t,e,i){if(1==i.length&&""==i[0])return Promise.reject(new u(2,6,6e3));var n=new _,r=n;return[!0,!1].forEach(function(t){i.forEach(function(i){var n=e[i];n.drmInfos.some(function(t){return!!t.licenseServerUri})==t&&(n.audioCapabilities.length||delete n.audioCapabilities,n.videoCapabilities.length||delete n.videoCapabilities,r=r["catch"](function(){return this.c?Promise.reject():navigator.requestMediaKeySystemAccess(i,[n])}.bind(this)))}.bind(this))}.bind(t)),r=r["catch"](function(){return Promise.reject(new u(2,6,6001))}),r=r.then(function(t){if(this.c)return Promise.reject();var i=0<=navigator.userAgent.indexOf("Edge/"),n=t.getConfiguration();return this.v=(n.audioCapabilities||[]).concat(n.videoCapabilities||[]).map(function(t){return t.contentType}),i&&(this.v=null),i=e[t.keySystem],ct(this,t.keySystem,i,i.drmInfos),this.b.licenseServerUri?t.createMediaKeys():Promise.reject(new u(2,6,6012))}.bind(t)).then(function(t){return this.c?Promise.reject():(this.i=t,void(this.F=!0))}.bind(t))["catch"](function(t){return this.c?Promise.resolve():(this.v=this.b=null,t instanceof u?Promise.reject(t):Promise.reject(new u(2,6,6002,t.message)))}.bind(t)),n.reject(),r}function ut(t,e){var i=e.keySystem;if(i){if(!e.licenseServerUri){var n=t.h.servers[i];n&&(e.licenseServerUri=n)}e.keyIds||(e.keyIds=[]),(i=t.h.advanced[i])&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=i.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=i.persistentStateRequired),e.videoRobustness||(e.videoRobustness=i.videoRobustness),e.audioRobustness||(e.audioRobustness=i.audioRobustness),e.serverCertificate||(e.serverCertificate=i.serverCertificate))}}function ht(e){if(B(e.h.clearKeys))return null;var i,n=[],r=[];for(i in e.h.clearKeys){var a=e.h.clearKeys[i],s=Q(i),a=Q(a),s={kty:"oct",kid:$(s,!1),k:$(a,!1)};n.push(s),r.push(s.kid)}return e=JSON.stringify({keys:n}),r=JSON.stringify({kids:r}),r=[{initData:new Uint8Array(X(r)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+t.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:r,keyIds:[]}}function ct(t,e,i,n){var r=[],a=[],s=[],o=[];dt(n,r,a,s,o),t.b={keySystem:e,licenseServerUri:r[0],distinctiveIdentifierRequired:"required"==i.distinctiveIdentifier,persistentStateRequired:"required"==i.persistentState,audioRobustness:i.audioCapabilities?i.audioCapabilities[0].robustness:"",videoRobustness:i.videoCapabilities?i.videoCapabilities[0].robustness:"",serverCertificate:a[0],initData:s,keyIds:o}}function dt(t,e,i,n,r){function a(t,e){return!(!t.keyId||t.keyId!=e.keyId)||t.initDataType==e.initDataType&&tt(t.initData,e.initData)}t.forEach(function(t){if(-1==e.indexOf(t.licenseServerUri)&&e.push(t.licenseServerUri),t.serverCertificate&&-1==R(i,t.serverCertificate,tt)&&i.push(t.serverCertificate),t.initData&&t.initData.forEach(function(t){-1==R(n,t,a)&&n.push(t)}),t.keyIds)for(var s=0;s<t.keyIds.length;++s)-1==r.indexOf(t.keyIds[s])&&r.push(t.keyIds[s])})}function lt(t,e){var i;try{i=t.i.createSession("persistent-license")}catch(n){var r=new u(2,6,6005,n.message);return t.g(r),Promise.reject(r)}M(t.f,i,"message",t.bc.bind(t)),M(t.f,i,"keystatuseschange",t.Wb.bind(t));var a={initData:null,Y:i,loaded:!1,sb:1/0,cb:null};return t.a.push(a),i.load(e).then(function(t){if(!this.c){if(t)return a.loaded=!0,this.a.every(function(t){return t.loaded})&&this.l.resolve(),i;this.a.splice(this.a.indexOf(a),1),this.g(new u(2,6,6013))}}.bind(t),function(t){this.c||(this.a.splice(this.a.indexOf(a),1),this.g(new u(2,6,6005,t.message)))}.bind(t))}function ft(t,e,i){var n;try{n=t.ga?t.i.createSession("persistent-license"):t.i.createSession()}catch(r){return void t.g(new u(2,6,6005,r.message))}M(t.f,n,"message",t.bc.bind(t)),M(t.f,n,"keystatuseschange",t.Wb.bind(t)),t.a.push({initData:i,Y:n,loaded:!1,sb:1/0,cb:null}),n.generateRequest(e,i.buffer)["catch"](function(t){if(!this.c){for(var e=0;e<this.a.length;++e)if(this.a[e].Y==n){this.a.splice(e,1);break}this.g(new u(2,6,6006,t.message))}}.bind(t))}function pt(t,e){for(var i,n=e.target,r=0;r<t.a.length;r++)if(t.a[r].Y==n){i=t.a[r].cb;break}r=N([t.b.licenseServerUri],t.h.retryParameters),r.body=e.message,r.method="POST","com.microsoft.playready"==t.b.keySystem&&mt(r),t.ha.request(2,r).then(function(t){return this.c?Promise.reject():n.update(t.data).then(function(){i&&i.resolve()})}.bind(t),function(t){return this.c?Promise.resolve():(t=new u(2,6,6007,t),this.g(t),void(i&&i.reject(t)))}.bind(t))["catch"](function(t){return this.c?Promise.resolve():(t=new u(2,6,6008,t.message),this.g(t),void(i&&i.reject(t)))}.bind(t))}function mt(t){for(var e=q(t.body,!0),e=(new DOMParser).parseFromString(e,"application/xml"),i=e.getElementsByTagName("HttpHeader"),n=0;n<i.length;++n)t.headers[i[n].querySelector("name").textContent]=i[n].querySelector("value").textContent;t.body=J(e.querySelector("Challenge").textContent).buffer}function vt(){var t=[],e=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],i=[{videoCapabilities:e,persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:e}],n={};return"org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").forEach(function(e){var r=navigator.requestMediaKeySystemAccess(e,i).then(function(t){var i=t.getConfiguration().sessionTypes;return n[e]={persistentState:!!i&&0<=i.indexOf("persistent-license")},t.createMediaKeys()})["catch"](function(){n[e]=null});t.push(r)}),Promise.all(t).then(function(){return n})}function gt(t,e){var i=t.keySystem();return!e.drmInfos.length||e.drmInfos.some(function(t){return t.keySystem==i})}function bt(t,e){if(!t.length)return e;if(!e.length)return t;for(var i=[],n=0;n<t.length;n++)for(var r=0;r<e.length;r++)if(t[n].keySystem==e[r].keySystem){var a=t[n],r=e[r],s=[],s=s.concat(a.initData||[]),s=s.concat(r.initData||[]),o=[],o=o.concat(a.keyIds),o=o.concat(r.keyIds);i.push({keySystem:a.keySystem,licenseServerUri:a.licenseServerUri||r.licenseServerUri,distinctiveIdentifierRequired:a.distinctiveIdentifierRequired||r.distinctiveIdentifierRequired,persistentStateRequired:a.persistentStateRequired||r.persistentStateRequired,videoRobustness:a.videoRobustness||r.videoRobustness,audioRobustness:a.audioRobustness||r.audioRobustness,serverCertificate:a.serverCertificate||r.serverCertificate,initData:s,keyIds:o});break}return i}function yt(t){this.f=null,this.c=t,this.h=0,this.g=1/0,this.a=this.b=null}function Tt(t,e){ys[t]=e.length?St.bind(null,e):e}function wt(t,e,i){return t>=e?null:new VTTCue(t,e,i)}function Et(t,e,i,n){return Promise.resolve().then(function(){if(this.c)if(null==i||null==n)this.f.parseInit(e);else{for(var t=this.f.parseMedia(e,{periodStart:this.h,segmentStart:i,segmentEnd:n}),r=0;r<t.length&&!(t[r].startTime>=this.g);++r)this.c.addCue(t[r]);null==this.b&&(this.b=i),this.a=Math.min(n,this.g)}}.bind(t))}function kt(t,e){for(var i=t.c.cues,n=[],r=0;r<i.length;++r)e(i[r])&&n.push(i[r]);for(r=0;r<n.length;++r)t.c.removeCue(n[r])}function St(t){this.Ja=t}function It(t){return!t||1==t.length&&1e-6>t.end(0)-t.start(0)?null:t.length?t.end(t.length-1):null}function At(t,e){return!(!t||!t.length||1==t.length&&1e-6>t.end(0)-t.start(0))&&(e>=t.start(0)&&e<=t.end(t.length-1))}function xt(t,e){if(!t||!t.length||1==t.length&&1e-6>t.end(0)-t.start(0))return 0;for(var i=0,n=t.length-1;0<=n&&t.end(n)>e;--n)i+=t.end(n)-Math.max(t.start(n),e);return i}function _t(t,e,i){this.f=t,this.K=e,this.i=i,this.c={},this.a=null,this.b={},this.g=new L,this.h=!1}function Pt(){var t={};return'video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hvc1.1.6.L93.90",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="av1",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",video/mp2t; codecs="mp4a.40.2",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").forEach(function(e){t[e]=!!ys[e]||MediaSource.isTypeSupported(e);var i=e.split(";")[0];t[i]=t[i]||t[e]}),t}function Ct(t,e){t.a||(t.a=new yt(t.i)),t.a.f=new ys[e]}function Nt(t,e){var i;return"text"==e?i=t.a.b:(i=Rt(t,e),i=!i||1==i.length&&1e-6>i.end(0)-i.start(0)?null:1==i.length&&0>i.start(0)?0:i.length?i.start(0):null),i}function Rt(t,e){try{return t.c[e].buffered}catch(i){return null}}function Dt(t,e,i,n,r){return"text"==e?Et(t.a,i,n,r):Ot(t,e,t.Xd.bind(t,e,i))}function Lt(t,e){return"text"==e?t.a.remove(0,1/0):Ot(t,e,t.fc.bind(t,e,0,t.K.duration))}function Mt(t,e,i,n){return"text"==e?(t.a.h=i,null!=n&&(t.a.g=n),Promise.resolve()):(null==n&&(n=1/0),Promise.all([Ot(t,e,t.tc.bind(t,e)),Ot(t,e,t.Nd.bind(t,e,i)),Ot(t,e,t.Ld.bind(t,e,n))]))}function Ot(t,e,i){if(t.h)return Promise.reject();if(i={start:i,p:new _},t.b[e].push(i),1==t.b[e].length)try{i.start()}catch(n){"QuotaExceededError"==n.name?i.p.reject(new u(2,3,3017,e)):i.p.reject(new u(2,3,3015,n)),jt(t,e)}return i.p}function Ut(t,e){if(t.h)return Promise.reject();var i,n=[];for(i in t.c){var r=new _,a={start:function(t){t.resolve()}.bind(null,r),p:r};t.b[i].push(a),n.push(r),1==t.b[i].length&&a.start()}return Promise.all(n).then(function(){var t,i;try{e()}catch(n){i=Promise.reject(new u(2,3,3015,n))}for(t in this.c)jt(this,t);return i}.bind(t),function(){return Promise.reject()}.bind(t))}function jt(t,e){t.b[e].shift();var i=t.b[e][0];if(i)try{i.start()}catch(n){i.p.reject(new u(2,3,3015,n)),jt(t,e)}}function Bt(t,e,i){return i==e||t>=Ts&&i==e.split("-")[0]||t>=ws&&i.split("-")[0]==e.split("-")[0]}function Ft(t){t=t.toLowerCase().split("-");var e=Es[t[0]];return e&&(t[0]=e),t.join("-")}function Vt(t,e,i){var n=t.video;return!(n&&(n.width<e.minWidth||n.width>e.maxWidth||n.width>i.width||n.height<e.minHeight||n.height>e.maxHeight||n.height>i.height||n.width*n.height<e.minPixels||n.width*n.height>e.maxPixels)||t.bandwidth<e.minBandwidth||t.bandwidth>e.maxBandwidth)}function Ht(t,e,i){var n=!1;return t.variants.forEach(function(t){var r=t.allowedByApplication;t.allowedByApplication=Vt(t,e,i),r!=t.allowedByApplication&&(n=!0)}),n}function Kt(t,e,i){var n=e.video,r=e.audio;for(e=0;e<i.variants.length;++e){var a=i.variants[e],s=t,o=r,u=n;(s&&s.F&&!gt(s,a)?0:qt(a.audio,s,o)&&qt(a.video,s,u))||(i.variants.splice(e,1),--e)}for(e=0;e<i.textStreams.length;++e)t=i.textStreams[e],ys[te(t.mimeType,t.codecs)]||(i.textStreams.splice(e,1),--e)}function qt(t,e,i){if(!t)return!0;var n=null;return e&&e.F&&(n=e.v),e=te(t.mimeType,t.codecs),!(!ys[e]&&!MediaSource.isTypeSupported(e)||n&&t.encrypted&&0>n.indexOf(e)||i&&(t.mimeType!=i.mimeType||t.codecs.split(".")[0]!=i.codecs.split(".")[0]))}function Gt(t,e,i){return zt(t.variants).map(function(t){var n;n=t.video&&t.audio?i==t.video.id&&e==t.audio.id:t.video&&i==t.video.id||t.audio&&e==t.audio.id;var r="";t.video&&(r+=t.video.codecs),t.audio&&(""!=r&&(r+=", "),r+=t.audio.codecs);var a=t.audio?t.audio.codecs:null,s=t.video?t.video.codecs:null,o=null;t.video?o=t.video.mimeType:t.audio&&(o=t.audio.mimeType);var u=null;return t.audio?u=t.audio.kind:t.video&&(u=t.video.kind),{id:t.id,active:n,type:"variant",bandwidth:t.bandwidth,language:t.language,kind:u||null,width:t.video?t.video.width:null,height:t.video?t.video.height:null,frameRate:t.video?t.video.frameRate:void 0,mimeType:o,codecs:r,audioCodec:a,videoCodec:s,primary:t.primary}})}function Xt(t,e){return t.textStreams.map(function(t){return{id:t.id,active:e==t.id,type:"text",language:t.language,kind:t.kind,mimeType:t.mimeType,codecs:t.codecs||null,audioCodec:null,videoCodec:null,primary:t.primary}})}function Yt(t,e){for(var i=0;i<t.variants.length;i++)if(t.variants[i].id==e.id)return t.variants[i];return null}function Wt(t,e){for(var i=0;i<t.textStreams.length;i++)if(t.textStreams[i].id==e.id)return t.textStreams[i];return null}function zt(t){return t.filter(function(t){return t.allowedByApplication&&t.allowedByKeySystem})}function $t(t,e,i){var n=zt(t.variants),r=n.filter(function(t){return t.language==n[0].language});if(t=n.filter(function(t){return t.primary}),t.length&&(r=t),e){var a=Ft(e);[ws,Ts,0].forEach(function(t){var e=!1;n.forEach(function(n){a=Ft(a);var s=Ft(n.language);Bt(t,a,s)&&(e?r.push(n):(r=[n],e=!0),i&&(i.audio=!0))})})}return r}function Jt(t,e,i){var n=t.textStreams,r=n;if(t=n.filter(function(t){return t.primary}),t.length&&(r=t),e){var a=Ft(e);[ws,Ts,0].forEach(function(t){var e=!1;n.forEach(function(n){var s=Ft(n.language);Bt(t,a,s)&&(e?r.push(n):(r=[n],e=!0),i&&(i.text=!0))})})}return r}function Qt(t,e,i){for(var n=0;n<i.length;n++)if(i[n].audio==t&&i[n].video==e)return i[n];return null}function Zt(t,e,i){function n(t,e){return null==t?null==e:e.id==t}for(var r=0;r<i.length;r++)if(n(t,i[r].audio)&&n(e,i[r].video))return i[r];return null}function te(t,e){var i=t;return e&&(i+='; codecs="'+e+'"'),i}function ee(t,e){for(var i=t.periods.length-1;0<i;--i)if(e>=t.periods[i].startTime)return i;return 0}function ie(t,e){for(var i=0;i<t.periods.length;++i){var n=t.periods[i];if("text"==e.type){for(var r=0;r<n.textStreams.length;++r)if(n.textStreams[r]==e)return i}else for(r=0;r<n.variants.length;++r){var a=n.variants[r];if(a.audio==e||a.video==e||a.video&&a.video.trickModeVideo==e)return i}}return-1}function ne(){this.f=null,this.b=!1,this.a=new s,this.h=[],this.g=[],this.j=!1,this.c=null,this.i={minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0}}function re(t,e){return e.filter(function(e){return Vt(e,t,{width:1/0,height:1/0})}).sort(function(t,e){return t.bandwidth-e.bandwidth})}function ae(e,i){var n,r=i||{};for(n in r)this[n]=r[n];this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=t.performance&&t.performance.now?t.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}function se(t){return JSON.stringify(t,function(t,e){if("manager"!=t&&"function"!=typeof e){if(e instanceof Event||e instanceof ae){var i,n={};for(i in e){var r=e[i];r&&"object"==typeof r||i in Event||(n[i]=r)}return n}if(e instanceof TimeRanges)for(n={__type__:"TimeRanges",length:e.length,start:[],end:[]},i=0;i<e.length;++i)n.start.push(e.start(i)),n.end.push(e.end(i));else n="number"==typeof e?isNaN(e)?"NaN":isFinite(e)?e:0>e?"-Infinity":"Infinity":e;return n}})}function oe(t){return JSON.parse(t,function(t,e){return"NaN"==e?NaN:"-Infinity"==e?-(1/0):"Infinity"==e?1/0:e&&"object"==typeof e&&"TimeRanges"==e.__type__?ue(e):e})}function ue(t){return{length:t.length,start:function(e){return t.start[e]},end:function(e){return t.end[e]}}}function he(t,e,i,n,r){this.I=t,this.l=e,this.B=i,this.F=n,this.v=r,this.c=this.j=this.h=!1,this.A="",this.a=this.i=null,this.b={video:{},player:{}},this.o=0,this.f={},this.g=null}function ce(t){for(var e in t.f){var i=t.f[e];delete t.f[e],i.reject(new u(1,7,7e3))}}function de(t,e){var i=se(e);t.a.sendMessage("urn:x-cast:com.google.shaka.v2",i,function(){},o)}function le(){this.gb=new D,this.Oa=this}function fe(t,e,i){le.call(this),this.c=t,this.b=e,this.h=this.f=this.g=this.i=this.j=null,this.a=new he(i,this.Td.bind(this),this.Ud.bind(this),this.Vd.bind(this),this.Mb.bind(this)),pe(this)}function pe(t){t.a.init(),t.h=new L,ks.forEach(function(t){M(this.h,this.c,t,this.he.bind(this))}.bind(t)),xs.forEach(function(t){M(this.h,this.b,t,this.wd.bind(this))}.bind(t)),t.j={};for(var e in t.c)Object.defineProperty(t.j,e,{configurable:!1,enumerable:!0,get:t.ge.bind(t,e),set:t.ie.bind(t,e)});t.i={};for(e in t.b)Object.defineProperty(t.i,e,{configurable:!1,enumerable:!0,get:t.vd.bind(t,e)});t.g=new le,t.g.Oa=t.j,t.f=new le,t.f.Oa=t.i}function me(t,e,i,n){le.call(this),this.a=t,this.b=e,this.j={video:t,player:e},this.l=i||function(){},this.o=n||function(t){return t},this.i=!1,this.f=!0,this.h=this.g=this.c=null,ve(this)}function ve(e){var i=cast.receiver.CastReceiverManager.getInstance();i.onSenderConnected=e.ac.bind(e),i.onSenderDisconnected=e.ac.bind(e),i.onSystemVolumeChanged=e.Bc.bind(e),e.g=i.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.g.onMessage=e.Wc.bind(e),e.c=i.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.c.onMessage=e.jd.bind(e),i.start(),ks.forEach(function(t){this.a.addEventListener(t,this.dc.bind(this,"video"))}.bind(e)),xs.forEach(function(t){this.b.addEventListener(t,this.dc.bind(this,"player"))}.bind(e)),cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.b.Ab(3840,2160):e.b.Ab(1920,1080),e.b.addEventListener("loading",function(){this.f=!1,ge(this)}.bind(e)),e.a.addEventListener("playing",function(){this.f=!1,ge(this)}.bind(e)),e.a.addEventListener("pause",function(){ge(this)}.bind(e)),e.b.addEventListener("unloading",function(){this.f=!0,ge(this)}.bind(e)),e.a.addEventListener("ended",function(){t.setTimeout(function(){this.a&&this.a.ended&&(this.f=!0,ge(this))}.bind(this),5e3)}.bind(e))}function ge(t){Promise.resolve().then(function(){this.dispatchEvent(new ae("caststatuschanged")),Te(this,0)}.bind(t))}function be(t,e,i){for(var n in e.player)t.b[n](e.player[n]);t.l(i),i=Promise.resolve();var r=t.a.autoplay;e.manifest&&(t.a.autoplay=!1,i=t.b.load(e.manifest,e.startTime),i["catch"](function(t){this.b.dispatchEvent(new ae("error",{detail:t}))}.bind(t))),i.then(function(){for(var t in e.video){var i=e.video[t];this.a[t]=i}for(t in e.playerAfterLoad)i=e.playerAfterLoad[t],this.b[t](i);this.a.autoplay=r,e.manifest&&(this.a.play(),Te(this,0))}.bind(t))}function ye(t,e,i,n){t.i&&(t=se(e),n?i.getCastChannel(n).send(t):i.broadcast(t))}function Te(t,e,i){var n=Ds,n={mediaSessionId:0,playbackRate:t.a.playbackRate,playerState:t.f?n.IDLE:t.b.ha?n.pc:t.a.paused?n.qc:n.rc,currentTime:t.a.currentTime,supportedMediaCommands:15,volume:{level:t.a.volume,muted:t.a.muted}};i&&(n.media=i),ye(t,{requestId:e,type:"MEDIA_STATUS",status:[n]},t.g)}function we(t,e){var i=Ee(t,e);return 1!=i.length?null:i[0]}function Ee(t,e){return Array.prototype.filter.call(t.childNodes,function(t){return t.tagName==e})}function ke(t){var e=t.firstChild;return e&&e.nodeType==Node.TEXT_NODE?t.textContent.trim():null}function Se(t,e,i,n){var r=null;return t=t.getAttribute(e),null!=t&&(r=i(t)),null==r?void 0!=n?n:null:r}function Ie(t){return t?(t=Date.parse(t),isNaN(t)?null:Math.floor(t/1e3)):null}function Ae(t){return t&&(t=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(t))?(t=31536e3*Number(t[1]||null)+2592e3*Number(t[2]||null)+86400*Number(t[3]||null)+3600*Number(t[4]||null)+60*Number(t[5]||null)+Number(t[6]||null),isFinite(t)?t:null):null}function xe(t){var e=/([0-9]+)-([0-9]+)/.exec(t);return e?(t=Number(e[1]),isFinite(t)?(e=Number(e[2]),isFinite(e)?{start:t,end:e}:null):null):null}function _e(t){return t=Number(t),t%1?null:t}function Pe(t){return t=Number(t),!(t%1)&&0<t?t:null}function Ce(t){return t=Number(t),!(t%1)&&0<=t?t:null}function Ne(t){var e;return t=(e=t.match(/^(\d+)\/(\d+)$/))?Number(e[1]/e[2]):Number(t),isNaN(t)?null:t}function Re(t,e,i){t=Me(t);var n=null,r=null,a=[],s=[],o=t.map(function(t){return t.keyId}).filter(w);if(0<o.length&&(r=o[0],o.some(E(r))))throw new u(2,4,4010);return i||(s=t.filter(function(t){return"urn:mpeg:dash:mp4protection:2011"!=t.hc||(n=t.init||n,!1)}),0<s.length&&(a=Le(n,e,s),a.length||(a=[I("",n)]))),0<t.length&&(i||!s.length)&&(a=F(Ls).map(function(t){return I(t,n)})),r&&a.forEach(function(t){t.initData.forEach(function(t){t.keyId=r})}),{Jb:r,le:n,drmInfos:a,Lb:!0}}function De(t,e,i,n){var r=Re(t,e,n);if(i.Lb)t=1==i.drmInfos.length&&!i.drmInfos[0].keySystem,e=!r.drmInfos.length,(!i.drmInfos.length||t&&!e)&&(i.drmInfos=r.drmInfos),i.Lb=!1;else if(0<r.drmInfos.length&&(i.drmInfos=i.drmInfos.filter(function(t){return r.drmInfos.some(function(e){return e.keySystem==t.keySystem})}),!i.drmInfos.length))throw new u(2,4,4008);return r.Jb||i.Jb}function Le(t,e,i){return i.map(function(i){var n=Ls[i.hc];return n?[I(n,i.init||t)]:e(i.node)||[]}).reduce(y,[])}function Me(t){return t.map(function(t){var e=t.getAttribute("schemeIdUri"),i=t.getAttribute("cenc:default_KID"),n=Ee(t,"cenc:pssh").map(ke);if(!e)return null;if(e=e.toLowerCase(),i&&(i=i.replace(/-/g,"").toLowerCase(),0<=i.indexOf(" ")))throw new u(2,4,4009);var r=[];try{r=n.map(function(t){return{initDataType:"cenc",initData:J(t),keyId:null}})}catch(a){throw new u(2,4,4007)}return{node:t,hc:e,keyId:i,init:0<r.length?r:null}}).filter(w)}function Oe(e,i,n,r,a){null!=a&&(a=Math.round(a));var s={RepresentationID:i,Number:n,Bandwidth:r,Time:a};return e.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(e,i,n){if("$$"==e)return"$";var r=s[i];return null==r?e:("RepresentationID"==i&&n&&(n=void 0),e=r.toString(),n=t.parseInt(n,10)||1,Array(Math.max(0,n-e.length)+1).join("0")+e)})}function Ue(t,e){var i=je(t,e,"timescale"),n=1;i&&(n=Pe(i)||1),i=je(t,e,"duration"),(i=Pe(i||""))&&(i/=n);var r=je(t,e,"startNumber"),a=je(t,e,"presentationTimeOffset"),s=Ce(r||"");null!=r&&null!=s||(s=1);var o=Be(t,e,"SegmentTimeline"),r=null;if(o){for(var r=n,u=Number(a),h=t.N.duration||1/0,o=Ee(o,"S"),c=[],d=0,l=0;l<o.length;++l){var f=o[l],p=Se(f,"t",Ce),m=Se(f,"d",Ce),f=Se(f,"r",_e);if(null!=p&&(p-=u),!m)break;if(p=null!=p?p:d,f=f||0,0>f)if(l+1<o.length){if(f=Se(o[l+1],"t",Ce),null==f)break;if(p>=f)break;f=Math.ceil((f-p)/m)-1}else{if(1/0==h)break;if(p/r>=h)break;f=Math.ceil((h*r-p)/m)-1}0<c.length&&p!=d&&(c[c.length-1].end=p/r);for(var v=0;v<=f;++v)d=p+m,c.push({start:p/r,end:d/r,ee:p}),p=d}r=c}return{timescale:n,L:i,va:s,presentationTimeOffset:Number(a)/n||0,Gb:Number(a),D:r}}function je(t,e,i){return[e(t.w),e(t.P),e(t.R)].filter(w).map(function(t){return t.getAttribute(i)}).reduce(function(t,e){return t||e})}function Be(t,e,i){return[e(t.w),e(t.P),e(t.R)].filter(w).map(function(t){return we(t,i)}).reduce(function(t,e){return t||e})}function Fe(t,e,i){this.a=t,this.V=e,this.J=i}function Ve(t,e,i,n,r,a){this.position=t,this.startTime=e,this.endTime=i,this.a=n,this.V=r,this.J=a}function He(t){this.H=t,this.a=0==Ms,this.u=0}function Ke(t){return t.u<t.H.byteLength}function qe(t){try{var e=t.H.getUint8(t.u)}catch(i){Je()}
return t.u+=1,e}function Ge(t){try{var e=t.H.getUint16(t.u,t.a)}catch(i){Je()}return t.u+=2,e}function Xe(t){try{var e=t.H.getUint32(t.u,t.a)}catch(i){Je()}return t.u+=4,e}function Ye(t){var e,i;try{t.a?(e=t.H.getUint32(t.u,!0),i=t.H.getUint32(t.u+4,!0)):(i=t.H.getUint32(t.u,!1),e=t.H.getUint32(t.u+4,!1))}catch(n){Je()}if(2097151<i)throw new u(2,3,3001);return t.u+=8,i*Math.pow(2,32)+e}function We(t,e){t.u+e>t.H.byteLength&&Je();var i=t.H.buffer.slice(t.u,t.u+e);return t.u+=e,new Uint8Array(i)}function ze(t,e){t.u+e>t.H.byteLength&&Je(),t.u+=e}function $e(t){for(var e=t.u;Ke(t)&&t.H.getUint8(t.u);)t.u+=1;return e=t.H.buffer.slice(e,t.u),t.u+=1,K(e)}function Je(){throw new u(2,3,3e3)}function Qe(){this.b=[],this.a=[]}function Ze(t){for(;Ke(t.s);)t.Ja.Za(t.start,t.s)}function ti(t){for(var e=Xe(t.s);0<e;--e)t.Ja.Za(t.start,t.s)}function ei(t){return function(e){t(We(e.s,e.s.H.byteLength-e.s.u))}}function ii(t){for(var e=0,i=0;i<t.length;i++)e=e<<8|t.charCodeAt(i);return e}function ni(t,e,i,n){var r,a=(new Qe).$("sidx",function(t){r=ri(e,n,i,t)});if(t&&a.parse(t),r)return r;throw new u(2,3,3004)}function ri(t,e,i,n){var r=[];ze(n.s,4);var a=Xe(n.s);if(!a)throw new u(2,3,3005);var s,o;n.version?(s=Ye(n.s),o=Ye(n.s)):(s=Xe(n.s),o=Xe(n.s)),ze(n.s,2);var h=Ge(n.s);for(e=s-e,t=t+n.size+o,o=0;o<h;o++){var c=Xe(n.s);s=(2147483648&c)>>>31;var c=2147483647&c,d=Xe(n.s);if(ze(n.s,4),1==s)throw new u(2,3,3006);r.push(new Ve(r.length,e/a,(e+d)/a,function(){return i},t,t+c-1)),e+=d,t+=c}return r}function ai(t){this.a=t}function si(t,e){if(t.a.length){var i=t.a[t.a.length-1];i.startTime>e||(t.a[t.a.length-1]=new Ve(i.position,i.startTime,e,i.a,i.V,i.J))}}function oi(t){this.b=t,this.a=new He(t),Os||(Os=[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])])}function ui(t){var e;if(e=hi(t),7<e.length)throw new u(2,3,3002);for(var i=0,n=0;n<e.length;n++)i=256*i+e[n];e=i,i=hi(t);t:{for(n=0;n<Os.length;n++)if(tt(i,Os[n])){n=!0;break t}n=!1}if(n)i=t.b.byteLength-t.a.u;else{if(8==i.length&&224&i[1])throw new u(2,3,3001);for(var n=i[0]&(1<<8-i.length)-1,r=1;r<i.length;r++)n=256*n+i[r];i=n}return i=t.a.u+i<=t.b.byteLength?i:t.b.byteLength-t.a.u,n=new DataView(t.b.buffer,t.b.byteOffset+t.a.u,i),ze(t.a,i),new ci(e,n)}function hi(t){var e,i=qe(t.a);for(e=1;8>=e&&!(i&1<<8-e);e++);if(8<e)throw new u(2,3,3002);var n=new Uint8Array(e);for(n[0]=i,i=1;i<e;i++)n[i]=qe(t.a);return n}function ci(t,e){this.id=t,this.a=e}function di(t){if(8<t.a.byteLength)throw new u(2,3,3002);if(8==t.a.byteLength&&224&t.a.getUint8(0))throw new u(2,3,3001);for(var e=0,i=0;i<t.a.byteLength;i++)var n=t.a.getUint8(i),e=256*e+n;return e}function li(){}function fi(t,e,i,n,r,a){function s(){return r}var o=[];t=new oi(t.a);for(var u=-1,h=-1;Ke(t.a);){var c=ui(t);if(187==c.id){var d=pi(c);d&&(c=i*(d.fe-a),d=e+d.Bd,0<=u&&o.push(new Ve(o.length,u,c,s,h,d-1)),u=c,h=d)}}return 0<=u&&o.push(new Ve(o.length,u,n,s,h,null)),o}function pi(t){var e=new oi(t.a);if(t=ui(e),179!=t.id)throw new u(2,3,3013);if(t=di(t),e=ui(e),183!=e.id)throw new u(2,3,3012);for(var e=new oi(e.a),i=0;Ke(e.a);){var n=ui(e);if(241==n.id){i=di(n);break}}return{fe:t,Bd:i}}function mi(t,e){var i=Be(t,e,"Initialization");if(!i)return null;var n=t.w.S,r=i.getAttribute("sourceURL");r&&(n=S(t.w.S,[r]));var r=0,a=null;return(i=Se(i,"range",xe))&&(r=i.start,a=i.end),new Fe(function(){return n},r,a)}function vi(t,e){var i,n=je(t,bi,"presentationTimeOffset"),r=mi(t,bi);i=Number(n);var a=t.w.contentType,s=t.w.mimeType.split("/")[1];if("text"!=a&&"mp4"!=s&&"webm"!=s)throw new u(2,4,4006);if("webm"==s&&!r)throw new u(2,4,4005);var a=Be(t,bi,"RepresentationIndex"),o=je(t,bi,"indexRange"),h=t.w.S,o=xe(o||"");if(a){var c=a.getAttribute("sourceURL");c&&(h=S(t.w.S,[c])),o=Se(a,"range",xe,o)}if(!o)throw new u(2,4,4002);return i=gi(t,e,r,h,o.start,o.end,s,i),{createSegmentIndex:i.createSegmentIndex,findSegmentPosition:i.findSegmentPosition,getSegmentReference:i.getSegmentReference,initSegmentReference:r,presentationTimeOffset:Number(n)||0}}function gi(t,e,i,n,r,a,s,o){var u=t.presentationTimeline,h=!t.za||!t.N.nb,c=t.N.duration,d=e,l=null;return{createSegmentIndex:function(){var t=[d(n,r,a),"webm"==s?d(i.a(),i.V,i.J):null];return d=null,Promise.all(t).then(function(t){var e=t[0];t=t[1]||null,e="mp4"==s?ni(e,r,n,o):(new li).parse(e,t,n,o),u.Da(0,e),l=new ai(e),h&&si(l,c)})},findSegmentPosition:function(t){return l.find(t)},getSegmentReference:function(t){return l.get(t)}}}function bi(t){return t.La}function yi(t,e){var i,n=mi(t,Ti);i=Ei(t);var r=Ue(t,Ti),a=r.va;a||(a=1);var s=0;if(r.L?s=r.L*(a-1):r.D&&0<r.D.length&&(s=r.D[0].start),i={L:r.L,startTime:s,va:a,presentationTimeOffset:r.presentationTimeOffset,D:r.D,Ca:i},!i.L&&!i.D&&1<i.Ca.length)throw new u(2,4,4002);if(!i.L&&!t.N.duration&&!i.D&&1==i.Ca.length)throw new u(2,4,4002);if(i.D&&!i.D.length)throw new u(2,4,4002);return a=r=null,t.R.id&&t.w.id&&(a=t.R.id+","+t.w.id,r=e[a]),s=wi(t.N.duration,i.va,t.w.S,i),r?(r.qb(s),r.jb(t.presentationTimeline.ja()-t.N.start)):(t.presentationTimeline.Da(0,s),r=new ai(s),a&&t.za&&(e[a]=r)),t.za&&t.N.nb||si(r,t.N.duration),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:r.find.bind(r),getSegmentReference:r.get.bind(r),initSegmentReference:n,presentationTimeOffset:i.presentationTimeOffset}}function Ti(t){return t.la}function wi(t,e,i,n){var r=n.Ca.length;n.D&&n.D.length!=n.Ca.length&&(r=Math.min(n.D.length,n.Ca.length));for(var a=[],s=n.startTime,o=0;o<r;o++){var u,h=n.Ca[o],c=S(i,[h.Rc]);u=null!=n.L?s+n.L:n.D?n.D[o].end:s+t,a.push(new Ve(o+e,s,u,function(t){return t}.bind(null,c),h.start,h.end)),s=u}return a}function Ei(t){return[t.w.la,t.P.la,t.R.la].filter(w).map(function(t){return Ee(t,"SegmentURL")}).reduce(function(t,e){return 0<t.length?t:e}).map(function(e){e.getAttribute("indexRange")&&!t.Rb&&(t.Rb=!0);var i=e.getAttribute("media");return e=Se(e,"mediaRange",xe,{start:0,end:null}),{Rc:i,start:e.start,end:e.end}})}function ki(t,e,i,n){var r,a=xi(t);r=Ue(t,Si);var s=je(t,Si,"media"),o=je(t,Si,"index");if(r={L:r.L,timescale:r.timescale,va:r.va,presentationTimeOffset:r.presentationTimeOffset,Gb:r.Gb,D:r.D,pb:s,Ha:o},s=0+(r.Ha?1:0),s+=r.D?1:0,s+=r.L?1:0,!s)throw new u(2,4,4002);if(1!=s&&(r.Ha&&(r.D=null),r.L=null),!r.Ha&&!r.pb)throw new u(2,4,4002);if(r.Ha){if(i=t.w.mimeType.split("/")[1],"mp4"!=i&&"webm"!=i)throw new u(2,4,4006);if("webm"==i&&!a)throw new u(2,4,4005);n=Oe(r.Ha,t.w.id,null,t.bandwidth||null,null),n=S(t.w.S,[n]),t=gi(t,e,a,n,0,null,i,r.presentationTimeOffset)}else r.L?(n||t.presentationTimeline.rb(r.L),t=Ii(t,r)):(n=e=null,t.R.id&&t.w.id&&(n=t.R.id+","+t.w.id,e=i[n]),s=Ai(t,r),e?(e.qb(s),e.jb(t.presentationTimeline.ja()-t.N.start)):(t.presentationTimeline.Da(0,s),e=new ai(s),n&&t.za&&(i[n]=e)),t.za&&t.N.nb||si(e,t.N.duration),t={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:e.find.bind(e),getSegmentReference:e.get.bind(e)});return{createSegmentIndex:t.createSegmentIndex,findSegmentPosition:t.findSegmentPosition,getSegmentReference:t.getSegmentReference,initSegmentReference:a,presentationTimeOffset:r.presentationTimeOffset}}function Si(t){return t.Ma}function Ii(t,e){var i=t.N.duration,n=e.L,r=e.va,a=e.timescale,s=e.pb,o=t.bandwidth||null,u=t.w.id,h=t.w.S;return{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(t){return 0>t||i&&t>=i?null:Math.floor(t/n)},getSegmentReference:function(t){var e=t*n;return 0>e||i&&e>=i?null:new Ve(t,e,e+n,function(){var i=Oe(s,u,t+r,o,e*a);return S(h,[i])},0,null)}}}function Ai(t,e){for(var i=[],n=0;n<e.D.length;n++){var r=n+e.va;i.push(new Ve(r,e.D[n].start,e.D[n].end,function(t,e,i,n,r,a){return t=Oe(t,e,r,i,a),S(n,[t]).map(function(t){return t.toString()})}.bind(null,e.pb,t.w.id,t.bandwidth||null,t.w.S,r,e.D[n].ee+e.Gb),0,null))}return i}function xi(t){var e=je(t,Si,"initialization");if(!e)return null;var i=t.w.id,n=t.bandwidth||null,r=t.w.S;return new Fe(function(){var t=Oe(e,i,null,n,null);return S(r,[t])},0,null)}function _i(){var t,e={};for(t in Us)e[t]=!0;for(t in js)e[t]=!0;return["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"].forEach(function(t){e[t]=!!Us[t]}),["mpd","m3u8","ism"].forEach(function(t){e[t]=!!js[t]}),e}function Pi(t,e,i,n){var r=n;return r||(n=new h(t).U.split("/").pop().split("."),1<n.length&&(n=n.pop().toLowerCase(),r=js[n])),r?Promise.resolve(r):(i=N([t],i),i.method="HEAD",e.request(0,i).then(function(e){return(e=e.headers["content-type"])&&(e=e.toLowerCase()),(r=Us[e])?r:Promise.reject(new u(2,4,4e3,t))},function(t){return t.severity=2,Promise.reject(t)}))}function Ci(t,e){this.f=t,this.i=e,this.c=this.a=1/0,this.b=1,this.h=0,this.g=!0}function Ni(){this.a=this.b=null,this.g=[],this.c=null,this.i=[],this.h=1,this.j={},this.l=0,this.f=null}function Ri(t){return t.a.networkingEngine.request(0,N(t.g,t.b.retryParameters)).then(function(t){if(this.a)return Di(this,t.data,t.uri)}.bind(t))}function Di(t,e,i){var n=K(e),r=new DOMParser,a=null;e=null;try{a=r.parseFromString(n,"text/xml")}catch(s){}if(a&&"MPD"==a.documentElement.tagName&&(e=a.documentElement),e&&0<e.getElementsByTagName("parsererror").length&&(e=null),!e)throw new u(2,4,4001);i=[i],n=Ee(e,"Location").map(ke).filter(w),0<n.length&&(i=t.g=n),n=Ee(e,"BaseURL").map(ke),i=S(i,n);var o=Se(e,"minBufferTime",Ae);t.l=Se(e,"minimumUpdatePeriod",Ae,-1);var h,c=Se(e,"availabilityStartTime",Ie),n=Se(e,"timeShiftBufferDepth",Ae),d=Se(e,"suggestedPresentationDelay",Ae),r=Se(e,"maxSegmentDuration",Ae),a=e.getAttribute("type")||"static";if(t.c)h=t.c.presentationTimeline;else{var l=Math.max(10,1.5*o);h=new Ci(c,null!=d?d:l)}var c=Li(t,{za:"static"!=a,presentationTimeline:h,R:null,N:null,P:null,w:null,bandwidth:void 0,Rb:!1},i,e),d=c.duration,f=c.periods;return h.nc("static"==a),h.ma(d||1/0),h.mc(null!=n?n:1/0),h.rb(r||1),t.c?Promise.resolve():(e=Ee(e,"UTCTiming"),Hi(t,i,e,h.aa()).then(function(t){this.a&&(h.lc(t),this.c={presentationTimeline:h,periods:f,offlineSessionIds:[],minBufferTime:o||0})}.bind(t)))}function Li(t,e,i,n){var r=Se(n,"mediaPresentationDuration",Ae),a=[],s=0;n=Ee(n,"Period");for(var o=0;o<n.length;o++){var u=n[o],s=Se(u,"start",Ae,s),h=Se(u,"duration",Ae),c=null;if(o!=n.length-1){var d=Se(n[o+1],"start",Ae);null!=d&&(c=d-s)}else null!=r&&(c=r-s);if(null==c&&(c=h),u=Mi(t,e,i,{start:s,duration:c,node:u,nb:null==c||o==n.length-1}),a.push(u),h=e.R.id,t.i.every(E(h))&&(t.a.filterPeriod(u),t.i.push(h),t.c&&t.c.periods.push(u)),null==c){s=null;break}s+=c}return null!=r?{periods:a,duration:r}:{periods:a,duration:s}}function Mi(t,e,i,n){e.R=Bi(n.node,null,i),e.N=n,e.R.id||(e.R.id="__shaka_period_"+n.start),Ee(n.node,"EventStream").forEach(t.td.bind(t,n.start,n.duration)),i=Ee(n.node,"AdaptationSet").map(t.rd.bind(t,e)).filter(w);var r=i.map(function(t){return t.Dd}).reduce(y,[]),a=r.filter(k);if(e.za&&r.length!=a.length)throw new u(2,4,4018);var s=i.filter(function(t){return!t.Fb});if(i.filter(function(t){return t.Fb}).forEach(function(t){var e=t.streams[0],i=t.Fb;s.forEach(function(t){t.id==i&&t.streams.forEach(function(t){t.trickModeVideo=e})})}),r=Oi(s,"video"),a=Oi(s,"audio"),!r.length&&!a.length)throw new u(2,4,4004);for(a.length||(a=[null]),r.length||(r=[null]),e=[],i=0;i<a.length;i++)for(var o=0;o<r.length;o++)Ui(t,a[i],r[o],e);for(t=Oi(s,"text"),r=[],i=0;i<t.length;i++)r.push.apply(r,t[i].streams);return{startTime:n.start,textStreams:r,variants:e}}function Oi(t,e){return t.filter(function(t){return t.contentType==e})}function Ui(t,e,i,n){var r;if(e||i)if(e&&i){var a=e.drmInfos;if(r=i.drmInfos,a.length&&r.length?0<bt(a,r).length:1)for(var s=bt(e.drmInfos,i.drmInfos),a=0;a<e.streams.length;a++)for(var o=0;o<i.streams.length;o++)r=i.streams[o].bandwidth+e.streams[a].bandwidth,r={id:t.h++,language:e.language,primary:e.ob||i.ob,audio:e.streams[a],video:i.streams[o],bandwidth:r,drmInfos:s,allowedByApplication:!0,allowedByKeySystem:!0},n.push(r)}else for(s=e||i,a=0;a<s.streams.length;a++)r=s.streams[a].bandwidth,r={id:t.h++,language:s.language||"und",primary:s.ob,audio:e?s.streams[a]:null,video:i?s.streams[a]:null,bandwidth:r,drmInfos:s.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},n.push(r)}function ji(e,i){0>e.l||(e.f=t.setTimeout(e.Wd.bind(e),1e3*Math.max(Math.max(3,e.l)-i,0)))}function Bi(t,e,i){e=e||{contentType:"",mimeType:"",codecs:"",containsEmsgBoxes:!1,frameRate:void 0},i=i||e.S;var n=Ee(t,"BaseURL").map(ke),r=t.getAttribute("contentType")||e.contentType,a=t.getAttribute("mimeType")||e.mimeType,s=t.getAttribute("codecs")||e.codecs,o=Se(t,"frameRate",Ne)||e.frameRate,u=!!Ee(t,"InbandEventStream").length;return r||(r=Ki(a,s)),{S:S(i,n),La:we(t,"SegmentBase")||e.La,la:we(t,"SegmentList")||e.la,Ma:we(t,"SegmentTemplate")||e.Ma,width:Se(t,"width",Ce)||e.width,height:Se(t,"height",Ce)||e.height,contentType:r,mimeType:a,codecs:s,frameRate:o,containsEmsgBoxes:u||e.containsEmsgBoxes,id:t.getAttribute("id")}}function Fi(t){var e;return e=0+(t.La?1:0),e+=t.la?1:0,(e+=t.Ma?1:0)?(1!=e&&(t.La&&(t.la=null),t.Ma=null),!0):"text"==t.contentType||"application"==t.contentType}function Vi(t,e,i,n){return e=S(e,[i]),e=N(e,t.b.retryParameters),e.method=n,t.a.networkingEngine.request(0,e).then(function(t){if("HEAD"==n){if(!t.headers||!t.headers.date)return 0;t=t.headers.date}else t=K(t.data);return t=Date.parse(t),isNaN(t)?0:t-Date.now()})}function Hi(t,e,i,n){i=i.map(function(t){return{scheme:t.getAttribute("schemeIdUri"),value:t.getAttribute("value")}});var r=t.b.dash.clockSyncUri;return n&&!i.length&&r&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),b(i,function(t){var i=t.value;switch(t.scheme){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return Vi(this,e,i,"HEAD");case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return Vi(this,e,i,"GET");case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return t=Date.parse(i),isNaN(t)?0:t-Date.now();case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":return Promise.reject();default:return Promise.reject()}}.bind(t))["catch"](function(){return 0})}function Ki(t,e){return ys[te(t,e)]?"text":t.split("/")[0]}function qi(t,e,i,n){this.uri=t,this.type=e,this.da=i,this.segments=n||null}function Gi(t,e,i,n){this.id=t,this.name=e,this.a=i,this.value=n||null}function Xi(t,e){this.name=t,this.value=e}function Yi(t,e){this.da=e,this.uri=t}function Wi(t,e){return t.filter(function(t){return t.name==e})}function zi(t,e){var i=Wi(t,e);return i.length?i[0]:null}function $i(t,e,i){return t.filter(function(t){var n=t.getAttribute("TYPE");return t=t.getAttribute("GROUP-ID"),n.value==e&&t.value==i})}function Ji(t){this.b=t,this.a=0}function Qi(t,e){var i;return e.lastIndex=t.a,i=(i=e.exec(t.b))?{position:i.index,length:i[0].length,Gd:i}:null,t.a!=t.b.length&&i&&i.position==t.a?(t.a+=i.length,i.Gd):null}function Zi(t){return t.a==t.b.length?null:(t=Qi(t,/[^ \t\n]*/gm))?t[0]:null}function tn(){this.a=0}function en(t,e,i){e=K(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var n=e.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new u(2,4,4015);e=0;for(var r=[],a=1;a<n.length;)if(/^#(?!EXT)/m.test(n[a]))a+=1;else{var s;if(s=n[a],s=rn(t.a++,s),0<=Bs.indexOf(s.name))e=1;else if(0<=Fs.indexOf(s.name)){if(1!=e)throw new u(2,4,4017);return n=n.splice(a,n.length-a),t=nn(t,n),new qi(i,e,r,t)}r.push(s),a+=1,"EXT-X-STREAM-INF"==s.name&&(s.a.push(new Xi("URI",n[a])),a+=1)}return new qi(i,e,r)}function nn(t,e){var i=[],n=[];return e.forEach(function(t){/^(#EXT)/.test(t)?(t=rn(this.a++,t),n.push(t)):/^#(?!EXT)/m.test(t)||(i.push(new Yi(t.trim(),n)),n=[])}.bind(t)),i}function rn(t,e){var i=e.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!i)throw new u(2,4,4016);var n=i[1],r=i[2],i=[];if(r&&0<=r.indexOf("="))for(var a,r=new Ji(r),s=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;a=Qi(r,s);)i.push(new Xi(a[1],a[2]||a[3]));else if(r)return new Gi(t,n,i,r);return new Gi(t,n,i)}function an(t){return new Promise(function(e){var i=an.parse(t);e({uri:t,data:i.data,headers:{"content-type":i.contentType}})})}function sn(){this.b=this.c=null,this.i=1,this.g={},this.f={},this.a=null,this.j="",this.h=new tn}function on(t,e,i){if(e=en(t.h,e,i),0!=e.type)throw new u(2,4,4022);return t.a=new Ci(null,0),un(t,e).then(function(t){return this.c.filterPeriod(t),{presentationTimeline:this.a,periods:[t],offlineSessionIds:[],minBufferTime:0}}.bind(t))}function un(t,e){var i=Wi(e.da,"EXT-X-STREAM-INF").map(function(t){return hn(this,t,e)}.bind(t)),n=Wi(e.da,"EXT-X-MEDIA").filter(function(t){return"SUBTITLES"==wn(t,"TYPE")}.bind(t)).map(function(t){return ln(this,t,e)}.bind(t));return Promise.all(i).then(function(t){return Promise.all(n).then(function(e){var i=t.reduce(y,[]);return gn(this,i),{startTime:0,variants:i,textStreams:e}}.bind(this))}.bind(t))}function hn(t,e,i){var n,r,a,s=Number(wn(e,"BANDWIDTH")),o=wn(e,"CODECS").split(","),u=e.getAttribute("RESOLUTION"),h=e.getAttribute("FRAME-RATE");h&&(a=h.value),u&&(u=u.value.split("x"),n=u[0],r=u[1]);var c=Tn(t,i);i=Wi(i.da,"EXT-X-MEDIA");var u=e.getAttribute("AUDIO"),h=e.getAttribute("VIDEO"),d=[],l=[];u&&(d=$i(i,"AUDIO",u.value).map(function(t){return fn(this,t,o,c)}.bind(t))),h&&(l=$i(i,"VIDEO",h.value).map(function(t){return fn(this,t,o,c)}.bind(t)));var f=[],p=[];return Promise.all([Promise.all(d),Promise.all(l)]).then(function(t){return f=t[0],p=t[1],p.length&&f.length?t=null:p.length&&!f.length?(t=wn(e,"URI"),t=pn(this,t,o,"audio",c,"und",!1)):(t=wn(e,"URI"),t=pn(this,t,o,"video",c,"und",!1)),t}.bind(t)).then(function(t){return t&&("audio"==t.stream.type?f=[t]:p=[t]),cn(this,f,p,s,n,r,a)}.bind(t))}function cn(t,e,i,n,r,a,s){i.forEach(function(t){(t=t.stream)&&(t.width=Number(r)||void 0,t.height=Number(a)||void 0,t.frameRate=Number(s)||void 0)}.bind(t)),e.length||(e=[null]),i.length||(i=[null]);for(var o=[],u=0;u<e.length;u++)for(var h=0;h<i.length;h++){var c,d=e[u]?e[u].stream:null,l=i[h]?i[h].stream:null,f=e[u]?e[u].drmInfos:null,p=i[h]?i[h].drmInfos:null;if(d&&l){if(!(f.length&&p.length?0<bt(f,p).length:1))continue;c=bt(f,p)}else d?c=f:l&&(c=p);o.push(dn(t,d,l,n,c))}return o}function dn(t,e,i,n,r){return{id:t.i++,language:e?e.language:"und",primary:!!e&&e.primary||!!i&&i.primary,audio:e,video:i,bandwidth:n,drmInfos:r,allowedByApplication:!0,allowedByKeySystem:!0}}function ln(t,e,i){return wn(e,"TYPE"),i=Tn(t,i),fn(t,e,[],i).then(function(t){return t.stream})}function fn(t,e,i,n){if(t.g[e.id])return Promise.resolve().then(function(){return this.g[e.id]}.bind(t));var r=wn(e,"TYPE").toLowerCase();"subtitles"==r&&(r="text");var a=e.getAttribute("LANGUAGE"),a=a?Ft(a.value):"und",s=e.getAttribute("DEFAULT"),o=e.getAttribute("AUTOSELECT"),u=wn(e,"URI");return pn(t,u,i,r,n,a,!!s||!!o).then(function(t){return this.g[e.id]=t}.bind(t))}function pn(t,e,i,n,r,a,s){return e=S([t.j],[e])[0],t.c.networkingEngine.request(0,N([e],t.b.retryParameters)).then(function(t){if(t=en(this.h,t.data,t.uri),1!=t.type)throw new u(2,4,4017);r=Tn(this,t)||r;var e=null;"text"!=n&&(e=mn(t));var o=zi(t.da,"EXT-X-MEDIA-SEQUENCE"),o=vn(this,t,o?Number(o.value):0);this.a.Da(0,o);var h=o[o.length-1].endTime-o[0].startTime,c=this.a.W();(1/0==c||c<h)&&this.a.ma(h);var d=bn(n,i),l=void 0;"text"==n&&(l="subtitle");var f=new ai(o),p=[];t.segments.forEach(function(t){t=Wi(t.da,"EXT-X-KEY"),p.push.apply(p,t)});var m=!1,v=[],g=null;if(p.forEach(function(t){if("NONE"!=wn(t,"METHOD")){m=!0;var e=wn(t,"KEYFORMAT");(t=(e=Gs[e])?e(t):null)&&(t.keyIds.length&&(g=t.keyIds[0]),v.push(t))}}),m&&!v.length)throw new u(2,4,4026);return yn(this,n,o[0].a()[0]).then(function(t){return t={id:this.i++,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:f.find.bind(f),getSegmentReference:f.get.bind(f),initSegmentReference:e,presentationTimeOffset:r||0,mimeType:t,codecs:d,kind:l,encrypted:m,keyId:g,language:a,type:n,primary:s,trickModeVideo:null,containsEmsgBoxes:!1,frameRate:void 0,width:void 0,height:void 0,bandwidth:void 0},this.f[t.id]=f,{stream:t,me:f,drmInfos:v}}.bind(this))}.bind(t))}function mn(t){var e=Wi(t.da,"EXT-X-MAP");if(!e.length)return null;if(1<e.length)throw new u(2,4,4020);var e=e[0],i=wn(e,"URI"),n=S([t.uri],[i])[0];return t=0,i=null,(e=e.getAttribute("BYTERANGE"))&&(t=e.value.split("@"),e=Number(t[0]),t=Number(t[1]),i=t+e-1),new Fe(function(){return[n]},t,i)}function vn(t,e,i){var n=e.segments,r=[];return n.forEach(function(t){var a,s=t.da,o=S([e.uri],[t.uri])[0],u=En(s).value.split(","),u=Number(u[0]);a=(t=n.indexOf(t))?r[t-1].endTime:0;var u=a+u,h=0,c=null;(s=zi(s,"EXT-X-BYTERANGE"))&&(s=s.value.split("@"),c=Number(s[0]),h=s[1]?Number(s[1]):r[t-1].J,c=h+c-1,t==n.length-1&&(c=null)),r.push(new Ve(i+t,a,u,function(){return[o]},h,c))}.bind(t)),r}function gn(t,e){e.forEach(function(t){var e=this.a.W(),i=t.video;t=t.audio,i&&this.f[i.id]&&si(this.f[i.id],e),t&&this.f[t.id]&&si(this.f[t.id],e)}.bind(t))}function bn(t,e){if(1==e.length)return e[0];if("text"==t)return"";var i=Vs;"audio"==t&&(i=Hs);for(var n=0;n<i.length;n++)for(var r=0;r<e.length;r++)if(i[n].test(e[r].trim()))return e[r].trim();throw new u(2,4,4025,e)}function yn(t,e,i){var n=i.split("."),r=n[n.length-1];return"text"==e?Promise.resolve("text/vtt"):(n=Ks,"video"==e&&(n=qs),(e=n[r])?Promise.resolve(e):(i=N([i],t.b.retryParameters),i.method="HEAD",t.c.networkingEngine.request(1,i).then(function(t){if(t=t.headers["content-type"],!t)throw new u(2,4,4021,r);return t})))}function Tn(t,e){var i=zi(e.da,"EXT-X-START");return i?Number(wn(i,"TIME-OFFSET")):t.b.hls.defaultTimeOffset}function wn(t,e){var i=t.getAttribute(e);if(!i)throw new u(2,4,4023,e);return i.value}function En(t){if(t=zi(t,"EXTINF"),!t)throw new u(2,4,4024,"EXTINF");return t}function kn(){}function Sn(t){var e=[];if(!t)return e;for(var i=t.childNodes,n=0;n<i.length;n++){var r="span"==i[n].nodeName&&"p"==t.nodeName;i[n].nodeType!=Node.ELEMENT_NODE||"br"==i[n].nodeName||r||(r=Sn(i[n]),e=e.concat(r))}return e.length||e.push(t),e}function In(t,e){for(var i=t.childNodes,n=0;n<i.length;n++)if("br"==i[n].nodeName&&0<n)i[n-1].textContent+="\n";else if(0<i[n].childNodes.length)In(i[n],e);else if(e){var r=i[n].textContent.trim(),r=r.replace(/\s+/g," ");i[n].textContent=r}}function An(t,e,i,n){for(var r=Sn(e),a=0;a<r.length;a++){var s=r[a].getAttribute(n);if(s)return s}return r=xn,(t=r(e,"style",i)||r(t,"style",i))?t.getAttribute(n):null}function xn(t,e,i){if(!t||1>i.length)return null;var n=null,r=t;for(t=null;r&&!(t=r.getAttribute(e))&&(r=r.parentNode,r instanceof Element););if(e=t)for(t=0;t<i.length;t++)if(i[t].getAttribute("xml:id")==e){n=i[t];break}return n}function _n(t,e){var i=null;if(Xs.test(t))var i=Xs.exec(t),n=Number(i[1]),r=Number(i[2]),a=Number(i[3]),s=Number(i[4]),s=s+(Number(i[5])||0)/e.b,a=a+s/e.frameRate,i=a+60*r+3600*n;else Ys.test(t)?i=Pn(Ys,t):Ws.test(t)?i=Pn(Ws,t):zs.test(t)?(i=zs.exec(t),i=Number(i[1])/e.frameRate):$s.test(t)?(i=$s.exec(t),i=Number(i[1])/e.a):Js.test(t)&&(i=Pn(Js,t));return i}function Pn(t,e){var i=t.exec(e);return i&&""!=i[0]?(Number(i[4])||0)/1e3+(Number(i[3])||0)+60*(Number(i[2])||0)+3600*(Number(i[1])||0):null}function Cn(t,e,i,n){this.frameRate=Number(t)||30,this.b=Number(e)||1,this.a=Number(n),this.a||(this.a=t?this.frameRate*this.b:1),i&&(t=/^(\d+) (\d+)$/g.exec(i))&&(this.frameRate*=t[1]/t[2])}function Nn(){this.a=new kn}function Rn(){}function Dn(t,e){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(e))?(t.align=i[1],"center"==i[1]&&"center"!=t.align&&(t.position="auto",t.align="middle")):(i=/^vertical:(lr|rl)$/.exec(e))?t.vertical=i[1]:(i=/^size:(\d{1,2}|100)%$/.exec(e))?t.size=Number(i[1]):(i=/^position:(\d{1,2}|100)%(?:,(line-left|line-right|center|start|end))?$/.exec(e))?(t.position=Number(i[1]),i[2]&&(t.positionAlign=i[2])):(i=/^line:(\d{1,2}|100)%(?:,(start|end|center))?$/.exec(e))?(t.snapToLines=!1,t.line=Number(i[1]),i[2]&&(t.lineAlign=i[2])):(i=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(e))&&(t.snapToLines=!0,t.line=Number(i[1]),i[2]&&(t.lineAlign=i[2]))}function Ln(t){if(t=Qi(t,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g),!t)return null;var e=Number(t[2]),i=Number(t[3]);return 59<e||59<i?null:Number(t[4])/1e3+i+60*e+3600*(Number(t[1])||0)}function Mn(){this.a=null}function On(t,e,i){var n,r,a;return(new Qe).C("payl",ei(function(t){n=K(t)})).C("iden",ei(function(t){r=K(t)})).C("sttg",ei(function(t){a=K(t)})).parse(t),n?Un(n,r,a,e,i):null}function Un(t,e,i,n,r){if((t=wt(n,r,t))&&e&&(t.id=e),t&&i)for(e=new Ji(i),i=Zi(e);i;)Dn(t,i),Qi(e,/[ \t]+/gm),i=Zi(e);return t}function jn(t,e,i,n,r,a){this.a=t,this.c=e,this.l=i,this.A=n,this.I=r,this.F=a,this.b=new L,this.h=!1,this.g=1,this.j=this.f=null,this.B=t.readyState,this.i=!1,this.M=this.v=-1,this.o=!1,0<t.readyState?this.Xb():O(this.b,t,"loadedmetadata",this.Xb.bind(this)),e=this.Zb.bind(this),M(this.b,t,"ratechange",this.ed.bind(this)),M(this.b,t,"waiting",e),this.j=setInterval(e,250)}function Bn(t,e){0<t.a.readyState?t.a.currentTime=Gn(t,e):t.A=e}function Fn(t){return 0<t.a.readyState?Gn(t,t.a.currentTime):Vn(t)}function Vn(t){return t.A?Gn(t,t.A):(t=t.c.presentationTimeline,1/0>t.W()?t.ja():t.Xa())}function Hn(e,i){null!=e.f&&(t.clearInterval(e.f),e.f=null),e.g=i,e.a.playbackRate=e.h||0>i?0:i,!e.h&&0>i&&(e.f=t.setInterval(function(){this.a.currentTime+=i/4}.bind(e),250))}function Kn(t,e){var i=At.bind(null,t.a.buffered),n=1*Math.max(t.c.minBufferTime||0,t.l.rebufferingGoal),r=t.c.presentationTimeline,a=r.ra(),s=r.Aa(n),o=r.Aa(5),n=r.Aa(n+5);return e>a?a:e<r.Aa(0)?i(o)?o:n:e>=s||i(e)?e:n}function qn(t,e,i){t.a.currentTime=i;var n=0,r=function(){!this.a||10<=n++||this.a.currentTime!=e||(this.a.currentTime=i,setTimeout(r,100))}.bind(t);setTimeout(r,100)}function Gn(t,e){var i=t.c.presentationTimeline.ja();return e<i?i:(i=t.c.presentationTimeline.ra(),e>i?i:e)}function Xn(t,e,i,n,r,a){this.a=t,this.g=e,this.A=i,this.l=n,this.h=r,this.B=a,this.c=[],this.j=new L,this.b=!1,this.i=-1,this.f=null,Wn(this)}function Yn(t){var e=x(t);return e.eventElement=t.eventElement,e}function Wn(e){zn(e),e.f=t.setTimeout(e.F.bind(e),250)}function zn(e){e.f&&(t.clearTimeout(e.f),e.f=null)}function $n(t,e){this.a=e,this.b=t,this.h=null,this.i=1,this.o=Promise.resolve(),this.g=[],this.j={},this.c={},this.f=this.l=this.v=!1}function Jn(t){return t.b.periods[ee(t.b,Fn(t.a.Ka))]}function Qn(t){return V(t.c,function(t){return t.ka||t.stream})}function Zn(t,e){var i={};return i.text=e,nr(t,i)}function tr(t,e){var i=t.c.video;if(i){var n=i.stream;if(n)if(e){var r=n.trickModeVideo;if(r){var a=i.ka;a||(er(t,"video",r,!1),i.ka=n)}}else(a=i.ka)&&(i.ka=null,er(t,"video",a,!0))}}function er(t,e,i,n){var r=t.c[e];!r&&"text"==e&&t.h.ignoreTextStreamFailures?Zn(t,i):r&&(r.ka&&(i.trickModeVideo?(r.ka=i,i=i.trickModeVideo):r.ka=null),"text"==e&&Ct(t.a.G,te(i.mimeType,i.codecs)),(e=t.g[ie(t.b,i)])&&e.Ga&&(e=t.j[i.id])&&e.Ga&&r.stream!=i&&(r.stream=i,r.Ya=!0,n&&(r.pa?r.fb=!0:r.ta?(r.oa=!0,r.fb=!0):(Tr(r),br(t,r,!0)))))}function ir(t){var e=Fn(t.a.Ka);if(!Object.keys(t.c).every(function(t){var i=this.a.G;return"text"==t?(t=i.a,t=e>=t.b&&e<t.a):(t=Rt(i,t),t=At(t,e)),t}.bind(t)))for(var i in t.c){var n=t.c[i];n.pa||n.oa||(n.ta?n.oa=!0:null==Nt(t.a.G,i)?null==n.na&&yr(t,n,0):(Tr(n),br(t,n,!1)))}}function nr(t,e,i){var n=ee(t.b,Fn(t.a.Ka)),r=V(e,function(t){return te(t.mimeType,t.codecs)});return t.a.G.init(r),sr(t),r=F(e),ar(t,r).then(function(){if(!this.f)for(var t in e){var r=e[t];this.c[t]||(this.c[t]={stream:r,type:t,Ba:null,ba:null,ka:null,Ya:!0,Ia:n,endOfStream:!1,ta:!1,na:null,oa:!1,fb:!1,pa:!1,xb:!1,mb:!1,gc:i||0},yr(this,this.c[t],0))}}.bind(t))}function rr(t,e){var i=t.g[e];if(i)return i.O;i={O:new _,Ga:!1},t.g[e]=i;var n=t.b.periods[e].variants.map(function(t){var e=[];return t.audio&&e.push(t.audio),t.video&&e.push(t.video),t.video&&t.video.trickModeVideo&&e.push(t.video.trickModeVideo),e}).reduce(y,[]).filter(k);return n.push.apply(n,t.b.periods[e].textStreams),t.o=t.o.then(function(){if(!this.f)return ar(this,n)}.bind(t)).then(function(){this.f||(this.g[e].O.resolve(),this.g[e].Ga=!0)}.bind(t))["catch"](function(t){this.f||(this.g[e].O.reject(),delete this.g[e],this.a.onError(t))}.bind(t)),i.O}function ar(t,e){e.map(function(t){return t.id}).filter(k);for(var i=[],n=0;n<e.length;++n){var r=e[n],a=t.j[r.id];a?i.push(a.O):(t.j[r.id]={O:new _,Ga:!1},i.push(r.createSegmentIndex()))}return Promise.all(i).then(function(){if(!this.f)for(var t=0;t<e.length;++t){var i=this.j[e[t].id];i.Ga||(i.O.resolve(),i.Ga=!0)}}.bind(t))["catch"](function(t){if(!this.f)return this.j[r.id].O.reject(),delete this.j[r.id],Promise.reject(t)}.bind(t))}function sr(t){var e=t.b.presentationTimeline.W();1/0>e?t.a.G.ma(e):t.a.G.ma(Math.pow(2,32))}function or(t,e){var i=Fn(t.a.Ka),n=e.Ba&&e.ba?t.b.periods[ie(t.b,e.Ba)].startTime+e.ba.endTime:Math.max(i,e.gc);e.gc=0;var r,a=ie(t.b,e.stream),s=ee(t.b,n);r=t.a.G;var o=e.type;return"text"==o?(r=r.a,r=null==r.a||r.a<i?0:r.a-Math.max(i,r.b)):(r=Rt(r,o),r=xt(r,i)),o=Math.max(t.i*Math.max(t.b.minBufferTime||0,t.h.rebufferingGoal),t.i*t.h.bufferingGoal),n>=t.b.presentationTimeline.W()?(e.endOfStream=!0,null):(e.endOfStream=!1,e.Ia=s,s!=a?null:r>=o?.5:(n=t.a.G,s=e.type,n="text"==s?n.a.a:It(Rt(n,s)),e.ba&&e.stream==e.Ba?(s=e.ba.position+1,n=ur(t,e,a,s)):(s=e.ba?e.stream.findSegmentPosition(Math.max(0,t.b.periods[ie(t.b,e.Ba)].startTime+e.ba.endTime-t.b.periods[a].startTime)):e.stream.findSegmentPosition(Math.max(0,(n||i)-t.b.periods[a].startTime)),null==s?n=null:(r=null,null==n&&(r=ur(t,e,a,Math.max(0,s-1))),n=r||ur(t,e,a,s))),n?(hr(t,e,i,a,n),null):1))}function ur(t,e,i,n){return i=t.b.periods[i],(e=e.stream.getSegmentReference(n))?(t=t.b.presentationTimeline,n=t.ra(),i.startTime+e.endTime<t.ja()||i.startTime+e.startTime>n?null:e):null}function hr(t,e,i,n,r){var a=t.b.periods[n],s=e.stream,o=t.b.periods[n+1],u=null,u=o?o.startTime:t.b.presentationTimeline.W();n=dr(t,e,n,u),e.ta=!0,e.Ya=!1,o=gr(t,r),Promise.all([n,o]).then(function(t){if(!this.f&&!this.l)return lr(this,e,i,a,s,r,t[1])}.bind(t)).then(function(){this.f||this.l||(e.ta=!1,e.xb=!1,e.oa||this.a.tb(),yr(this,e,0),pr(this,s))}.bind(t))["catch"](function(t){this.f||this.l||(e.ta=!1,1001==t.code||1002==t.code||1003==t.code?"text"==e.type&&this.h.ignoreTextStreamFailures&&1001==t.code?delete this.c.text:(t.severity=1,this.a.onError(t),yr(this,e,4)):3017==t.code?cr(this,e,t):"text"==e.type&&this.h.ignoreTextStreamFailures?delete this.c.text:(e.mb=!0,t.severity=2,this.a.onError(t)))}.bind(t))}function cr(t,e,i){if(!F(t.c).some(function(t){return t!=e&&t.xb})){var n=Math.round(100*t.i);if(20<n)t.i-=.2;else{if(!(4<n))return e.mb=!0,t.l=!0,void t.a.onError(i);t.i-=.04}e.xb=!0}yr(t,e,4)}function dr(t,e,i,n){return e.Ya?(i=Mt(t.a.G,e.type,t.b.periods[i].startTime-e.stream.presentationTimeOffset,n),e.stream.initSegmentReference?(t=gr(t,e.stream.initSegmentReference).then(function(t){if(!this.f)return Dt(this.a.G,e.type,t,null,null)}.bind(t))["catch"](function(t){return e.Ya=!0,Promise.reject(t)}),Promise.all([i,t])):i):Promise.resolve()}function lr(t,e,i,n,r,a,s){return r.containsEmsgBoxes&&(new Qe).$("emsg",t.sd.bind(t,n,a)).parse(s),fr(t,e,i).then(function(){if(!this.f)return Dt(this.a.G,e.type,s,a.startTime+n.startTime,a.endTime+n.startTime)}.bind(t)).then(function(){if(!this.f)return e.Ba=r,e.ba=a,Promise.resolve()}.bind(t))}function fr(t,e,i){var n=Nt(t.a.G,e.type);return null==n?Promise.resolve():(i=i-n-t.h.bufferBehind,0>=i?Promise.resolve():t.a.G.remove(e.type,n,n+i).then(function(){}.bind(t)))}function pr(t,e){if(!t.v&&(t.v=F(t.c).every(function(t){return"text"==t.type||!t.oa&&!t.pa&&t.ba}),t.v)){var i=ie(t.b,e);for(t.g[i]||rr(t,i).then(function(){this.a.Sb()}.bind(t))["catch"](T),i=0;i<t.b.periods.length;++i)rr(t,i)["catch"](T);t.a.kd&&t.a.kd()}}function mr(t,e){
if(e.Ia!=ie(t.b,e.stream)){var i=e.Ia,n=F(t.c);n.every(function(t){return t.Ia==i})&&n.every(vr)&&rr(t,i).then(function(){if(!this.f&&n.every(function(t){var e=ie(this.b,t.stream);return vr(t)&&t.Ia==i&&e!=i}.bind(this))){var t,e=this.b.periods[i],r=this.a.Tb(e);for(t in this.c)if(!r[t]&&"text"!=t)return void this.a.onError(new u(2,5,5005));for(t in r)if(!this.c[t]){if("text"!=t)return void this.a.onError(new u(2,5,5005));nr(this,{text:r.text},e.startTime),delete r[t]}for(t in this.c)(e=r[t])?(er(this,t,e,!1),yr(this,this.c[t],0)):delete this.c[t];this.a.Sb()}}.bind(t))["catch"](T)}}function vr(t){return!t.ta&&null==t.na&&!t.oa&&!t.pa}function gr(t,e){var i=N(e.a(),t.h.retryParameters);if(e.V||null!=e.J){var n="bytes="+e.V+"-";null!=e.J&&(n+=e.J),i.headers.Range=n}return t.a.Sc.request(1,i).then(function(t){return t.data})}function br(t,e,i){e.oa=!1,e.fb=!1,e.pa=!0,Lt(t.a.G,e.type).then(function(){if(!this.f&&i){var t=this.a.G,n=e.type;return"text"==n?Promise.resolve():Ot(t,n,t.Dc.bind(t,n))}}.bind(t)).then(function(){this.f||(e.Ba=null,e.ba=null,e.pa=!1,e.endOfStream=!1,yr(this,e,0))}.bind(t))}function yr(e,i,n){i.na=t.setTimeout(e.Zd.bind(e,i),1e3*n)}function Tr(e){null!=e.na&&(t.clearTimeout(e.na),e.na=null)}function wr(t,e){return new Promise(function(i,n){var r=new XMLHttpRequest;r.open(e.method,t,!0),r.responseType="arraybuffer",r.timeout=e.retryParameters.timeout,r.withCredentials=e.allowCrossSiteCredentials,r.onload=function(e){e=e.target;var r=e.getAllResponseHeaders().split("\r\n").reduce(function(t,e){var i=e.split(": ");return t[i[0].toLowerCase()]=i.slice(1).join(": "),t},{});if(200<=e.status&&299>=e.status&&202!=e.status)e.responseURL&&(t=e.responseURL),i({uri:t,data:e.response,headers:r,fromCache:!!r["x-shaka-from-cache"]});else{var a=null;try{a=G(e.response)}catch(s){}n(new u(401==e.status||403==e.status?2:1,1,1001,t,e.status,a,r))}},r.onerror=function(){n(new u(1,1,1002,t))},r.ontimeout=function(){n(new u(1,1,1003,t))};for(var a in e.headers)r.setRequestHeader(a,e.headers[a]);r.send(e.body)})}function Er(){this.a=null,this.c=[],this.b={}}function kr(t,e,i){return Ar(t,e,"readwrite",function(t){return t.put(i)})}function Sr(t,e){var i=[];return Ar(t,"segment","readwrite",function(t){return t.openCursor()},function(t){if(t){if(e(t.value)){var n=t["delete"](),r=new _;n.onsuccess=r.resolve,n.onerror=_r.bind(null,n,r),i.push(r)}t["continue"]()}}).then(function(){return Promise.all(i)}).then(function(){return i.length})}function Ir(t,e){var i=0;return Ar(t,e,"readonly",function(t){return t.openCursor(null,"prev")},function(t){t&&(i=t.key+1)}).then(function(){return i})}function Ar(t,e,i,n,r){i=t.a.transaction([e],i);var a=n(i.objectStore(e)),s=new _;r&&(a.onsuccess=function(t){r(t.target.result)}),a.onerror=function(){};var o={transaction:i,O:s};t.c.push(o);var u=function(){this.c.splice(this.c.indexOf(o),1)}.bind(t);return i.oncomplete=function(){u(),s.resolve(a.result)},i.onerror=function(t){t.preventDefault()},i.onabort=function(t){u(),_r(a,s,t)},s}function xr(e,i,n){var r=t.indexedDB.open("shaka_offline_db",1),a=!1,s=new _;return r.onupgradeneeded=function(t){a=!0,t=t.target.result;for(var e in i)t.createObjectStore(e,{keyPath:i[e]})},r.onsuccess=function(t){n&&!a?(t.target.result.close(),setTimeout(function(){xr(this,i,n-1).then(s.resolve,s.reject)}.bind(this),1e3)):(this.a=t.target.result,s.resolve())}.bind(e),r.onerror=_r.bind(null,r,s),s}function _r(t,e,i){t.error&&"AbortError"!=t.error.name?e.reject(new u(2,9,9001,t.error)):e.reject(new u(2,9,9002)),i.preventDefault()}function Pr(t){var e=Cr(t.periods[0],[],new Ci(null,0)),i=Gt(e,null,null),e=Xt(e,null);return i.push.apply(i,e),{offlineUri:"offline:"+t.key,originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:void 0==t.expiration?1/0:t.expiration,tracks:i,appMetadata:t.appMetadata}}function Cr(t,e,i){var n=t.streams.filter(function(t){return"text"==t.contentType}),r=t.streams.filter(function(t){return"audio"==t.contentType}),a=t.streams.filter(function(t){return"video"==t.contentType});return e=Rr(r,a,e),n=n.map(Lr),t.streams.forEach(function(t){t=Nr(t),i.Da(0,t)}),{startTime:t.startTime,variants:e,textStreams:n}}function Nr(t){return t.segments.map(function(t,e){return new Ve(e,t.startTime,t.endTime,function(){return[t.uri]},0,null)})}function Rr(t,e,i){var n=[];if(!t.length&&!e.length)return n;t.length?e.length||(e=[null]):t=[null];for(var r=0,a=0;a<t.length;a++)for(var s=0;s<e.length;s++)if(Dr(t[a],e[s])){var o;o=t[a];var u=e[s],h=i;o={id:r++,language:o?o.language:"",primary:!!o&&o.primary||!!u&&u.primary,audio:Lr(o),video:Lr(u),bandwidth:0,drmInfos:h,allowedByApplication:!0,allowedByKeySystem:!0},n.push(o)}return n}function Dr(t,e){if(!(t&&e&&t.variantIds&&e.variantIds))return!0;for(var i=0;i<t.variantIds.length;i++)if(e.variantIds.some(function(e){return e==t.variantIds[i]}))return!0;return!1}function Lr(t){if(!t)return null;var e=Nr(t),e=new ai(e);return{id:t.id,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:e.find.bind(e),getSegmentReference:e.get.bind(e),initSegmentReference:t.initSegmentUri?new Fe(function(){return[t.initSegmentUri]},0,null):null,presentationTimeOffset:t.presentationTimeOffset,mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate||void 0,kind:t.kind,encrypted:t.encrypted,keyId:t.keyId,language:t.language,type:t.contentType,primary:t.primary,trickModeVideo:null,containsEmsgBoxes:!1}}function Mr(){return t.indexedDB?new Er:null}function Or(t,e,i,n){this.b={},this.l=[],this.o=n,this.j=t,this.v=e,this.A=i,this.i=this.a=null,this.f=this.g=this.h=this.c=0}function Ur(t,e,i,n,r){t.b[e]=t.b[e]||[],t.b[e].push({uris:i.a(),V:i.V,J:i.J,Ib:n,yb:r})}function jr(t,e){t.c=0,t.h=0,t.g=0,t.f=0,F(t.b).forEach(function(t){t.forEach(function(t){null!=t.J?this.c+=t.J-t.V+1:this.g+=t.Ib}.bind(this))}.bind(t)),t.a=e,t.a.size=t.c;var i=F(t.b).map(function(t){var e=0,i=function(){if(!this.o)return Promise.reject(new u(2,9,9002));if(e>=t.length)return Promise.resolve();var n=t[e++];return Br(this,n).then(i)}.bind(this);return i()}.bind(t));return t.b={},t.i=Promise.all(i).then(function(){return kr(this.j,"manifest",e)}.bind(t)).then(function(){this.l=[]}.bind(t)),t.i}function Br(t,e){var i=N(e.uris,t.A);(e.V||null!=e.J)&&(i.headers.Range="bytes="+e.V+"-"+(null==e.J?"":e.J));var n;return t.v.request(1,i).then(function(t){return this.a?(n=t.data.byteLength,this.l.push(e.yb.key),e.yb.data=t.data,kr(this.j,"segment",e.yb)):Promise.reject(new u(2,9,9002))}.bind(t)).then(function(){if(!this.a)return Promise.reject(new u(2,9,9002));null==e.J?(this.a.size+=n,this.f+=e.Ib):this.h+=n;var t=(this.h+this.f)/(this.c+this.g),i=Pr(this.a);this.o.progressCallback(i,t)}.bind(t))}function Fr(){this.a=-1}function Vr(t){var e=new Ci(null,0);e.ma(t.duration);var i=t.drmInfo?[t.drmInfo]:[];return{presentationTimeline:e,minBufferTime:10,offlineSessionIds:t.sessionIds,periods:t.periods.map(function(t){return Cr(t,i,e)})}}function Hr(t){if(/^offline:([0-9]+)$/.exec(t)){var e={uri:t,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}};return Promise.resolve(e)}if(e=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(t)){var i=Number(e[1]),n=Mr();return n?n.init(eo).then(function(){return n.get("segment",i)}).then(function(e){return n.m().then(function(){if(!e)throw new u(2,9,9003,i);return{uri:t,data:e.data,headers:{}}})}):Promise.reject(new u(2,9,9e3))}return Promise.reject(new u(2,1,9004,t))}function Kr(){this.a=Promise.resolve(),this.c=this.b=this.f=!1,this.g=new Promise(function(t){this.h=t}.bind(this))}function qr(t){return t.f||(t.a=t.a.then(function(t){return this.b=!0,Promise.resolve(t)}.bind(t),function(t){return this.b=!0,Promise.reject(t)}.bind(t))),t.f=!0,t.a}function Gr(t,e){le.call(this),this.I=!1,this.f=t,this.A=null,this.l=new L,this.Hb=new ne,this.Ta=this.c=this.h=this.a=this.v=this.g=this.Ra=this.ga=this.K=this.j=this.o=null,this.sc=1e9,this.Qa=[],this.ha=!1,this.Ua=!0,this.ia=this.F=null,this.B={},this.Sa=[],this.M={},this.b=Zr(this),this.hb={width:1/0,height:1/0},this.i=ta(),this.Pa=0,this.fa=this.b.preferredAudioLanguage,this.ya=this.b.preferredTextLanguage,e&&e(this),this.o=new P(this.Sd.bind(this)),this.Ra=Xr(this);for(var i=0;i<this.f.textTracks.length;++i){var n=this.f.textTracks[i];n.mode="disabled","Shaka Player TextTrack"==n.label&&(this.A=n)}this.A||(this.A=this.f.addTextTrack("subtitles","Shaka Player TextTrack")),this.A.mode="hidden",M(this.l,this.f,"error",this.md.bind(this))}function Xr(e){e.K=new MediaSource;var i=new _;return M(e.l,e.K,"sourceopen",i.resolve),e.f.src=t.URL.createObjectURL(e.K),i}function Yr(t){if(t.h&&t.h.configure(t.b.manifest),t.j&&t.j.configure(t.b.drm),t.a){t.a.configure(t.b.streaming);try{t.c.periods.forEach(t.$a.bind(t))}catch(e){t.ua(e)}aa(t,Jn(t.a))}t.b.abr.enabled&&!t.Ua?t.b.abr.manager.enable():t.b.abr.manager.disable(),t.b.abr.manager.setDefaultEstimate(t.b.abr.defaultBandwidthEstimate),t.b.abr.manager.setRestrictions(t.b.abr.restrictions)}function Wr(t,e,i){t.i.switchHistory.push({timestamp:Date.now()/1e3,id:e.id,type:e.type,fromAdaptation:i}),zr(t,e)}function zr(t,e){var i=ie(t.c,e);t.M[i]||(t.M[i]={}),t.M[i][e.type]=e.id}function $r(t){t.l&&(t.l.ea(t.K,"sourceopen"),t.l.ea(t.f,"loadeddata"),t.l.ea(t.f,"playing"),t.l.ea(t.f,"pause"),t.l.ea(t.f,"ended")),t.f&&(t.f.removeAttribute("src"),t.f.load());var e=Promise.all([t.b?t.b.abr.manager.stop():null,t.j?t.j.m():null,t.ga?t.ga.m():null,t.g?t.g.m():null,t.v?t.v.m():null,t.a?t.a.m():null,t.h?t.h.stop():null]);return t.j=null,t.ga=null,t.g=null,t.v=null,t.a=null,t.h=null,t.c=null,t.Ta=null,t.Ra=null,t.K=null,t.Sa=[],t.M={},t.B={},t.i=ta(),e}function Jr(t){return t.h?$r(t).then(function(){this.I||(this.oc(!1),this.Ra=Xr(this))}.bind(t)):Promise.resolve()}function Qr(){return{".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:null}}}function Zr(t){return{drm:{retryParameters:C(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1},manifest:{retryParameters:C(),dash:{customScheme:function(t){if(t)return null},clockSyncUri:"",ignoreDrmInfo:!1},hls:{defaultTimeOffset:0}},streaming:{retryParameters:C(),rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1},abr:{manager:t.Hb,enabled:!0,defaultBandwidthEstimate:5e5,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0}}}function ta(){return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:0,bufferingTime:0,switchHistory:[],stateHistory:[]}}function ea(t,e,i){for(var n in e){var r=e[n],a=i||!1;"text"==n&&(a=!0),t.Ua?t.B[n]={stream:r,zc:a}:er(t.a,n,r,a)}}function ia(t){if(t.c){var e=Date.now()/1e3;t.ha?t.i.bufferingTime+=e-t.Pa:t.i.playTime+=e-t.Pa,t.Pa=e}}function na(t,e){function i(t,e){if(!t)return null;var i=t.findSegmentPosition(e-r.startTime);return null==i?null:(i=t.getSegmentReference(i))?i.startTime+r.startTime:null}var n=Qn(t.a),r=Jn(t.a),a=i(n.video,e),n=i(n.audio,e);return null!=a&&null!=n?Math.max(a,n):null!=a?a:null!=n?n:e}function ra(t,e,i,n,r){if(!i||1>i.length)return t.ua(new u(2,4,4012)),{};t.b.abr.manager.setVariants(i),t.b.abr.manager.setTextStreams(n);var a=[];if(r&&(a=["video","audio"],e.textStreams.length&&a.push("text")),r=Qn(t.a),e=Qt(r.audio,r.video,e.variants)){e.allowedByApplication&&e.allowedByKeySystem||(a.push("audio"),a.push("video"));for(var s in r)e=r[s],"audio"==e.type&&e.language!=i[0].language?a.push(s):"text"==e.type&&0<n.length&&e.language!=n[0].language&&a.push(s)}if(a=a.filter(k),0<a.length){i={};try{i=t.b.abr.manager.chooseStreams(a)}catch(o){t.ua(o)}return i}return{}}function aa(t,e){var i,n={audio:!1,text:!1},r=$t(e,t.fa,n),a=Jt(e,t.ya,n),r=ra(t,e,r,a);for(i in r)Wr(t,r[i],!0);ea(t,r,!0),sa(t),r.text&&r.audio&&n.text&&r.text.language!=r.audio.language&&(t.A.mode="showing",ua(t))}function sa(t){Promise.resolve().then(function(){this.I||this.dispatchEvent(new ae("adaptation"))}.bind(t))}function oa(t){Promise.resolve().then(function(){this.I||this.dispatchEvent(new ae("trackschanged"))}.bind(t))}function ua(t){t.dispatchEvent(new ae("texttrackvisibility"))}function ha(t){this.a=Mr(),this.f=t,this.i=la(this),this.b=null,this.v=!1,this.j=null,this.g=-1,this.l=0,this.c=null,this.h=new Or(this.a,t.o,t.getConfiguration().streaming.retryParameters,this.i)}function ca(){return!!t.indexedDB}function da(t,e,i,n){function r(){}var a,s,o,u=t.f.o,h=t.f.getConfiguration();return Pi(e,u,h.manifest.retryParameters,n).then(function(t){return ga(this),o=new t,o.configure(h.manifest),o.start(e,{networkingEngine:u,filterPeriod:this.o.bind(this),onTimelineRegionAdded:function(){},onEvent:function(){},onError:i})}.bind(t)).then(function(t){return ga(this),a=t,s=new et(u,i,r,function(){}),s.configure(h.drm),s.init(a,!0)}.bind(t)).then(function(){return ga(this),ma(a)}.bind(t)).then(function(){return ga(this),rt(s)}.bind(t)).then(function(){return ga(this),o.stop()}.bind(t)).then(function(){return ga(this),{manifest:a,Ac:s}}.bind(t))["catch"](function(t){if(o)return o.stop().then(function(){throw t});throw t})}function la(t){return{trackSelectionCallback:t.A.bind(t),progressCallback:function(t,e){if(t||e)return null}}}function fa(t){return t.a?t.a.a?Promise.resolve():t.a.init(eo):Promise.reject(new u(2,9,9e3))}function pa(t){var e=t.b?t.b.m():Promise.resolve();return t.b=null,t.c=null,t.v=!1,t.j=null,t.g=-1,e}function ma(t){var e=t.periods.map(function(t){return t.variants}).reduce(y,[]).map(function(t){var e=[];return t.audio&&e.push(t.audio),t.video&&e.push(t.video),e}).reduce(y,[]).filter(k);return t=t.periods.map(function(t){return t.textStreams}).reduce(y,[]),e.push.apply(e,t),Promise.all(e.map(function(t){return t.createSegmentIndex()}))}function va(t,e,i,n,r){for(var a=[],s=t.c.presentationTimeline.ja(),o=s,u=i.findSegmentPosition(s),h=null!=u?i.getSegmentReference(u):null;h;)o=t.a.b.segment++,Ur(t.h,i.type,h,(h.endTime-h.startTime)*n/8,{key:o,data:null,manifestKey:t.g,streamNumber:i.id,segmentNumber:o}),a.push({startTime:h.startTime,endTime:h.endTime,uri:"offline:"+t.g+"/"+i.id+"/"+o}),o=h.endTime+e.startTime,h=i.getSegmentReference(++u);return t.l=Math.max(t.l,o-s),e=null,i.initSegmentReference&&(o=t.a.b.segment++,e="offline:"+t.g+"/"+i.id+"/"+o,Ur(t.h,i.contentType,i.initSegmentReference,0,{key:o,data:null,manifestKey:t.g,streamNumber:i.id,segmentNumber:-1})),t=[],null!=r&&t.push(r),{id:i.id,primary:i.primary,presentationTimeOffset:i.presentationTimeOffset||0,contentType:i.type,mimeType:i.mimeType,codecs:i.codecs,frameRate:i.frameRate,kind:i.kind,language:i.language,width:i.width||null,height:i.height||null,initSegmentUri:e,encrypted:i.encrypted,keyId:i.keyId,segments:a,variantIds:t}}function ga(t){if(!t.f)throw new u(2,9,9002)}function ba(t){no.push(t)}function ya(t){var e,i=t.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();"function"==typeof Event?e=new Event(i,t):(e=document.createEvent("Event"),e.initEvent(i,t.bubbles,t.cancelable)),t.target.dispatchEvent(e)}function Ta(t){this.f=[],this.b=[],this.a=[],(new Qe).$("pssh",this.c.bind(this)).parse(t.buffer)}function wa(t,e){try{var i=new Ea(t,e);return Promise.resolve(i)}catch(n){return Promise.reject(n)}}function Ea(t,e){this.keySystem=t;for(var i=!1,n=0;n<e.length;++n){var r=e[n],a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label},s=!1;if(r.audioCapabilities)for(var o=0;o<r.audioCapabilities.length;++o){var u=r.audioCapabilities[o];if(u.contentType){var s=!0,h=u.contentType.split(";")[0];MSMediaKeys.isTypeSupported(this.keySystem,h)&&(a.audioCapabilities.push(u),i=!0)}}if(r.videoCapabilities)for(o=0;o<r.videoCapabilities.length;++o)u=r.videoCapabilities[o],u.contentType&&(s=!0,h=u.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,h)&&(a.videoCapabilities.push(u),i=!0));if(s||(i=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==r.persistentState&&(a.persistentState="required",a.sessionTypes=["persistent-license"]),i)return void(this.a=a)}throw i=Error("Unsupported keySystem"),i.name="NotSupportedError",i.code=DOMException.NOT_SUPPORTED_ERR,i}function ka(t){var e=this.mediaKeys;return e&&e!=t&&Ia(e,null),delete this.mediaKeys,(this.mediaKeys=t)?Ia(t,this):Promise.resolve()}function Sa(t){this.a=new MSMediaKeys(t),this.b=new L}function Ia(t,e){function i(){e.msSetMediaKeys(n.a),e.removeEventListener("loadedmetadata",i)}if(U(t.b),!e)return Promise.resolve();M(t.b,e,"msneedkey",xa);var n=t;try{return 1<=e.readyState?e.msSetMediaKeys(t.a):e.addEventListener("loadedmetadata",i),Promise.resolve()}catch(r){return Promise.reject(r)}}function Aa(t){le.call(this),this.c=null,this.g=t,this.b=this.a=null,this.f=new L,this.sessionId="",this.expiration=NaN,this.closed=new _,this.keyStatuses=new Ca}function xa(t){var e=document.createEvent("CustomEvent");if(e.initCustomEvent("encrypted",!1,!1,null),e.initDataType="cenc",t=t.initData){var i=new Ta(t);if(!(1>=i.a.length)){for(var n=[],r=0;r<i.a.length;r++)n.push(t.subarray(i.a[r].start,i.a[r].end+1));for(r=_a,t=[],i=0;i<n.length;++i){for(var a=!1,s=0;s<t.length&&!(a=r?r(n[i],t[s]):n[i]===t[s]);++s);a||t.push(n[i])}for(r=n=0;r<t.length;r++)n+=t[r].length;for(n=new Uint8Array(n),r=i=0;r<t.length;r++)n.set(t[r],i),i+=t[r].length;t=n}}e.initData=t,this.dispatchEvent(e)}function _a(t,e){return tt(t,e)}function Pa(t,e){t.keyStatuses.Bb(e),t.dispatchEvent(new ae("keystatuseschange"))}function Ca(){this.size=0,this.a=void 0}function Na(){return Promise.reject(Error("The key system specified is not supported."))}function Ra(t){return t?Promise.reject(Error("MediaKeys not supported.")):Promise.resolve()}function Da(){throw new TypeError("Illegal constructor.")}function La(){throw new TypeError("Illegal constructor.")}function Ma(e){ao=e,so=new Uint8Array([0]).buffer,navigator.requestMediaKeySystemAccess=Ua,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ja,t.MediaKeys=Fa,t.MediaKeySystemAccess=Ba}function Oa(t){var e=ao;return e?e+t.charAt(0).toUpperCase()+t.slice(1):t}function Ua(t,e){try{var i=new Ba(t,e);return Promise.resolve(i)}catch(n){return Promise.reject(n)}}function ja(t){var e=this.mediaKeys;return e&&e!=t&&Va(e,null),delete this.mediaKeys,(this.mediaKeys=t)&&Va(t,this),Promise.resolve()}function Ba(t,e){this.a=this.keySystem=t;var i=!0;"org.w3.clearkey"==t&&(this.a="webkit-org.w3.clearkey",i=!1);var n,r=!1;n=document.getElementsByTagName("video"),n=n.length?n[0]:document.createElement("video");for(var a=0;a<e.length;++a){var s=e[a],o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:s.initDataTypes,sessionTypes:["temporary"],label:s.label},u=!1;if(s.audioCapabilities)for(var h=0;h<s.audioCapabilities.length;++h){var c=s.audioCapabilities[h];if(c.contentType){var u=!0,d=c.contentType.split(";")[0];n.canPlayType(d,this.a)&&(o.audioCapabilities.push(c),r=!0)}}if(s.videoCapabilities)for(h=0;h<s.videoCapabilities.length;++h)c=s.videoCapabilities[h],c.contentType&&(u=!0,n.canPlayType(c.contentType,this.a)&&(o.videoCapabilities.push(c),r=!0));if(u||(r=n.canPlayType("video/mp4",this.a)||n.canPlayType("video/webm",this.a)),"required"==s.persistentState&&(i?(o.persistentState="required",o.sessionTypes=["persistent-license"]):r=!1),r)return void(this.b=o)}throw i="Unsupported keySystem","org.w3.clearkey"!=t&&"com.widevine.alpha"!=t||(i="None of the requested configurations were supported."),i=Error(i),i.name="NotSupportedError",i.code=DOMException.NOT_SUPPORTED_ERR,i}function Fa(t){this.g=t,this.b=null,this.a=new L,this.c=[],this.f={}}function Va(t,e){t.b=e,U(t.a);var i=ao;e&&(M(t.a,e,i+"needkey",t.qd.bind(t)),M(t.a,e,i+"keymessage",t.pd.bind(t)),M(t.a,e,i+"keyadded",t.nd.bind(t)),M(t.a,e,i+"keyerror",t.od.bind(t)))}function Ha(t,e){var i=t.f[e];return i?i:(i=t.c.shift())?(i.sessionId=e,t.f[e]=i):null}function Ka(t,e,i){le.call(this),this.f=t,this.h=!1,this.a=this.b=null,this.c=e,this.g=i,this.sessionId="",this.expiration=NaN,this.closed=new _,this.keyStatuses=new Xa}function qa(t,e,i){if(t.h)return Promise.reject(Error("The session is already initialized."));t.h=!0;var n;try{if("persistent-license"==t.g)if(i)n=new Uint8Array(X("LOAD_SESSION|"+i));else{var r=X("PERSISTENT|"),a=new Uint8Array(r.byteLength+e.byteLength);a.set(new Uint8Array(r),0),a.set(new Uint8Array(e),r.byteLength),n=a}else n=new Uint8Array(e)}catch(s){return Promise.reject(s)}t.b=new _;var o=Oa("generateKeyRequest");try{t.f[o](t.c,n)}catch(s){if("InvalidStateError"!=s.name)return t.b=null,Promise.reject(s);setTimeout(function(){try{this.f[o](this.c,n)}catch(t){this.b.reject(t),this.b=null}}.bind(t),10)}return t.b}function Ga(t,e){t.keyStatuses.Bb(e),t.dispatchEvent(new ae("keystatuseschange"))}function Xa(){this.size=0,this.a=void 0}function Ya(){var t=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var e=t.apply(this,arguments);return e.abort=function(){},e}}function Wa(){var t=MediaSource.prototype.endOfStream;MediaSource.prototype.endOfStream=function(){for(var e=0,i=0;i<this.sourceBuffers.length;++i)var n=this.sourceBuffers[i],n=n.buffered.end(n.buffered.length-1),e=Math.max(e,n);if(!isNaN(this.duration)&&e<this.duration)for(this.Qb=!0,i=0;i<this.sourceBuffers.length;++i)n=this.sourceBuffers[i],n.Kb=!1;return t.apply(this,arguments)};var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,arguments);return t.K=this,t.addEventListener("updateend",za,!1),this.a||(this.addEventListener("sourceclose",$a,!1),this.a=!0),t}}function za(t){var e=t.target,i=e.K;if(i.Qb){for(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),e.Kb=!0,t=0;t<i.sourceBuffers.length;++t)if(0==i.sourceBuffers[t].Kb)return;i.Qb=!1}}function $a(t){t=t.target;for(var e=0;e<t.sourceBuffers.length;++e)t.sourceBuffers[e].removeEventListener("updateend",za,!1);t.removeEventListener("sourceclose",$a,!1)}function Ja(t){if(this.c=[],this.b=[],this.wa=oo,t)try{t(this.ca.bind(this),this.a.bind(this))}catch(e){this.a(e)}}function Qa(t){var e=new Ja;return e.ca(void 0),e.then(function(){return t})}function Za(t){var e=new Ja;return e.a(t),e}function ts(t){function e(t,e,i){t.wa==oo&&(r[e]=i,n++,n==r.length&&t.ca(r))}var i=new Ja;if(!t.length)return i.ca([]),i;for(var n=0,r=Array(t.length),a=i.a.bind(i),s=0;s<t.length;++s)t[s]&&t[s].then?t[s].then(e.bind(null,i,s),a):e(i,s,t[s]);return i}function es(t){for(var e=new Ja,i=e.ca.bind(e),n=e.a.bind(e),r=0;r<t.length;++r)t[r]&&t[r].then?t[r].then(i,n):i(t[r]);return e}function is(t,e,i){ho.push(function(){if(i&&"function"==typeof i){try{var t=i(this.eb)}catch(n){return void e.a(n)}var r;try{r=t&&t.then}catch(n){return void e.a(n)}t instanceof Ja?t==e?e.a(new TypeError("Chaining cycle detected")):t.then(e.ca.bind(e),e.a.bind(e)):r?ns(t,r,e):e.ca(t)}else 1==this.wa?e.ca(this.eb):e.a(this.eb)}.bind(t)),null==uo&&(uo=as(rs))}function ns(t,e,i){try{var n=!1;e.call(t,function(t){if(!n){n=!0;var e;try{e=t&&t.then}catch(r){return void i.a(r)}e?ns(t,e,i):i.ca(t)}},i.a.bind(i))}catch(r){i.a(r)}}function rs(){for(;ho.length;){null!=uo&&(ss(uo),uo=null);var t=ho;ho=[];for(var e=0;e<t.length;++e)t[e]()}}function as(){return 0}function ss(){}function os(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function us(e,i,n){return new t.TextTrackCue(e,i,n)}function hs(e,i,n){return new t.TextTrackCue(e+"-"+i+"-"+n,e,i,n)}var cs,ds=this;ds.je=!0,s.prototype.setDefaultEstimate=function(t){this.b=t},s.prototype.getBandwidthEstimate=function(){return 128e3>this.a?this.b:Math.min(a(this.c),a(this.f))},e("shaka.util.Error",u),u.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},u.Severity={RECOVERABLE:1,CRITICAL:2},u.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9},u.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,LOAD_INTERRUPTED:7e3,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007};var ls=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;cs=h.prototype,cs.X="",cs.xa="",cs.Z="",cs.Fa=null,cs.U="",cs.qa="",cs.toString=function(){var t=[],e=this.X;if(e&&t.push(p(e,fs,!0),":"),e=this.Z){t.push("//");var i=this.xa;i&&t.push(p(i,fs,!0),"@"),t.push(encodeURIComponent(e).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e=this.Fa,null!=e&&t.push(":",String(e))}return(e=this.U)&&(this.Z&&"/"!=e.charAt(0)&&t.push("/"),t.push(p(e,"/"==e.charAt(0)?ms:ps,!0))),(e=this.a.toString())&&t.push("?",e),(e=this.qa)&&t.push("#",p(e,gs)),t.join("")},cs.resolve=function(t){var e=new h(this);"data"===e.X&&(e=new h);var i=!!t.X;i?c(e,t.X):i=!!t.xa,i?e.xa=t.xa:i=!!t.Z,i?e.Z=t.Z:i=null!=t.Fa;var n=t.U;if(i)d(e,t.Fa);else if(i=!!t.U){if("/"!=n.charAt(0))if(this.Z&&!this.U)n="/"+n;else{var r=e.U.lastIndexOf("/");-1!=r&&(n=e.U.substr(0,r+1)+n)}if(".."==n||"."==n)n="";else if(-1!=n.indexOf("./")||-1!=n.indexOf("/.")){for(var r=!n.lastIndexOf("/",0),n=n.split("/"),a=[],s=0;s<n.length;){var o=n[s++];"."==o?r&&s==n.length&&a.push(""):".."==o?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),r&&s==n.length&&a.push("")):(a.push(o),r=!0)}n=a.join("/")}}return i?e.U=n:i=""!==t.a.toString(),i?l(e,g(t.a)):i=!!t.qa,i&&(e.qa=t.qa),e};var fs=/[#\/\?@]/g,ps=/[\#\?:]/g,ms=/[\#\?]/g,vs=/[\#\?@]/g,gs=/#/g;v.prototype.a=null,v.prototype.c=null,v.prototype.toString=function(){if(this.b)return this.b;if(!this.a)return"";var t,e=[];for(t in this.a)for(var i=encodeURIComponent(t),n=this.a[t],r=0;r<n.length;r++){var a=i;""!==n[r]&&(a+="="+encodeURIComponent(n[r])),e.push(a)}return this.b=e.join("&")},e("shaka.net.NetworkingEngine",P),P.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3};var bs={};P.registerScheme=function(t,e){bs[t]=e},P.unregisterScheme=function(t){delete bs[t]},P.prototype.zd=function(t){this.b.push(t)},P.prototype.registerRequestFilter=P.prototype.zd,P.prototype.ce=function(t){var e=this.b;t=e.indexOf(t),0<=t&&e.splice(t,1)},P.prototype.unregisterRequestFilter=P.prototype.ce,P.prototype.xc=function(){this.b=[]},P.prototype.clearAllRequestFilters=P.prototype.xc,P.prototype.Ad=function(t){this.c.push(t)},P.prototype.registerResponseFilter=P.prototype.Ad,P.prototype.de=function(t){var e=this.c;t=e.indexOf(t),0<=t&&e.splice(t,1)},P.prototype.unregisterResponseFilter=P.prototype.de,P.prototype.yc=function(){this.c=[]},P.prototype.clearAllResponseFilters=P.prototype.yc,P.prototype.m=function(){this.f=!0,this.b=[],this.c=[];for(var t=[],e=0;e<this.a.length;++e)t.push(this.a[e]["catch"](T));return Promise.all(t)},P.prototype.destroy=P.prototype.m,P.prototype.request=function(e,i){if(this.f)return Promise.reject();i.method=i.method||"GET",i.headers=i.headers||{},i.retryParameters=i.retryParameters?x(i.retryParameters):C(),i.uris=x(i.uris);var n=Date.now(),r=Promise.resolve();return this.b.forEach(function(t){r=r.then(t.bind(null,e,i))}),r=r["catch"](function(t){throw new u(2,1,1006,t)}),r=r.then(function(){for(var r=Date.now()-n,a=i.retryParameters||{},s=a.maxAttempts||1,o=a.backoffFactor||2,a=null==a.baseDelay?1e3:a.baseDelay,u=this.g(e,i,0,r),h=1;h<s;h++)u=u["catch"](function(n,a,s){if(s&&1==s.severity){s=new _;var o=i.retryParameters||{};return t.setTimeout(s.resolve,n*(1+(2*Math.random()-1)*(null==o.fuzzFactor?.5:o.fuzzFactor))),s.then(this.g.bind(this,e,i,a,r))}throw s}.bind(this,a,h%i.uris.length)),a*=o;return u}.bind(this)),this.a.push(r),r.then(function(t){return 0<=this.a.indexOf(r)&&this.a.splice(this.a.indexOf(r),1),this.h&&!t.fromCache&&1==e&&this.h(t.timeMs,t.data.byteLength),t}.bind(this))["catch"](function(t){return t&&(t.severity=2),0<=this.a.indexOf(r)&&this.a.splice(this.a.indexOf(r),1),Promise.reject(t)}.bind(this))},P.prototype.request=P.prototype.request,P.prototype.g=function(t,e,i,n){if(this.f)return Promise.reject();var r=new h(e.uris[i]),a=r.X;if(a||(a=location.protocol,a=a.slice(0,-1),c(r,a),e.uris[i]=r.toString()),a=bs[a],!a)return Promise.reject(new u(2,1,1e3,r));var s=Date.now();return a(e.uris[i],e,t).then(function(e){void 0==e.timeMs&&(e.timeMs=Date.now()-s);var i=Date.now(),r=Promise.resolve();return this.c.forEach(function(i){r=r.then(function(){return Promise.resolve(i(t,e))}.bind(this))}),r=r["catch"](function(t){var e=2;throw t instanceof u&&(e=t.severity),new u(e,1,1007,t)}),r.then(function(){return e.timeMs+=Date.now()-i,e.timeMs+=n,e})}.bind(this))},D.prototype.push=function(t,e){this.a.hasOwnProperty(t)?this.a[t].push(e):this.a[t]=[e]},D.prototype.get=function(t){return(t=this.a[t])?t.slice():null},D.prototype.remove=function(t,e){var i=this.a[t];if(i)for(var n=0;n<i.length;++n)i[n]==e&&(i.splice(n,1),--n)},L.prototype.m=function(){return U(this),this.a=null,Promise.resolve()},L.prototype.ea=function(t,e){if(this.a)for(var i=this.a.get(e)||[],n=0;n<i.length;++n){var r=i[n];r.target==t&&(r.ea(),this.a.remove(e,r))}},j.prototype.ea=function(){this.target.removeEventListener(this.type,this.a,!1),
this.a=this.target=null},e("shaka.util.StringUtils.fromUTF8",K),e("shaka.util.StringUtils.fromUTF16",q),e("shaka.util.StringUtils.fromBytesAutoDetect",G),e("shaka.util.StringUtils.toUTF8",X),W.prototype.cancel=function(){null!=this.a&&(clearTimeout(this.a),this.a=null)},e("shaka.util.Uint8ArrayUtils.toBase64",$),e("shaka.util.Uint8ArrayUtils.fromBase64",J),e("shaka.util.Uint8ArrayUtils.fromHex",Q),e("shaka.util.Uint8ArrayUtils.toHex",Z),e("shaka.util.Uint8ArrayUtils.equal",tt),e("shaka.util.Uint8ArrayUtils.concat",function(t){for(var e=0,i=0;i<arguments.length;++i)e+=arguments[i].length;for(var e=new Uint8Array(e),n=0,i=0;i<arguments.length;++i)e.set(arguments[i],n),n+=arguments[i].length;return e}),cs=et.prototype,cs.m=function(){this.c=!0;var t=this.a.map(function(t){return(t.Y.close()||Promise.resolve())["catch"](T)});return this.l.reject(),this.f&&t.push(this.f.m()),this.j&&t.push(this.j.setMediaKeys(null)["catch"](T)),this.I&&(clearInterval(this.I),this.I=null),this.A&&this.A.cancel(),this.f=this.j=this.i=this.v=this.b=this.A=null,this.a=[],this.o=[],this.ia=this.g=this.h=this.ha=null,Promise.all(t)},cs.configure=function(t){this.h=t},cs.init=function(t,e){var i={},n=[];return this.ga=e,this.o=t.offlineSessionIds,st(this,t,e||0<t.offlineSessionIds.length,i,n),n.length?ot(this,i,n):(this.F=!0,Promise.resolve())},cs.keySystem=function(){return this.b?this.b.keySystem:""},cs.Wa=function(){var t=this.a.map(function(t){return t=t.Y.expiration,isNaN(t)?1/0:t});return Math.min.apply(Math,t)},cs.Uc=function(t){for(var e=new Uint8Array(t.initData),i=0;i<this.a.length;++i)if(tt(e,this.a[i].initData))return;ft(this,t.initDataType,e)},cs.bc=function(t){this.h.delayLicenseRequestUntilPlayed&&this.j.paused&&!this.fa?this.B.push(t):pt(this,t)},cs.Wb=function(t){t=t.target;var e;for(e=0;e<this.a.length&&this.a[e].Y!=t;++e);if(e!=this.a.length){var i=!1;t.keyStatuses.forEach(function(t,n){if("string"==typeof n){var r=n;n=t,t=r}if("com.microsoft.playready"==this.b.keySystem&&16==n.byteLength){var r=new DataView(n),a=r.getUint32(0,!0),s=r.getUint16(4,!0),o=r.getUint16(6,!0);r.setUint32(0,a,!1),r.setUint16(4,s,!1),r.setUint16(6,o,!1)}"com.microsoft.playready"==this.b.keySystem&&"status-pending"==t&&(t="usable"),"status-pending"!=t&&(this.a[e].loaded=!0,this.a.every(function(t){return t.loaded})&&this.l.resolve()),"expired"==t&&(i=!0),r=Z(new Uint8Array(n)),this.M[r]=t}.bind(this));var n=t.expiration-Date.now();(0>n||i&&1e3>n)&&!this.a[e].cb&&(this.a.splice(e,1),t.close()),z(this.A)}},cs.yd=function(){H(this.M,function(t,e){return"expired"==e})&&this.g(new u(2,6,6014)),this.ya(this.M)},cs.dd=function(){for(var t=0;t<this.B.length;t++)pt(this,this.B[t]);this.fa=!0,this.B=[]},cs.xd=function(){this.a.forEach(function(t){var e=t.sb,i=t.Y.expiration;isNaN(i)&&(i=1/0),i!=e&&(this.ia(t.Y.sessionId,i),t.sb=i)}.bind(this))};var ys={};e("shaka.media.TextEngine.registerParser",Tt),e("shaka.media.TextEngine.unregisterParser",function(t){delete ys[t]}),e("shaka.media.TextEngine.makeCue",wt),yt.prototype.m=function(){return this.c&&kt(this,function(){return!0}),this.c=this.f=null,Promise.resolve()},yt.prototype.remove=function(t,e){return Promise.resolve().then(function(){this.c&&(kt(this,function(i){return!(i.startTime>=e||i.endTime<=t)}),null==this.b||e<=this.b||t>=this.a||(t<=this.b&&e>=this.a?this.b=this.a=null:t<=this.b&&e<this.a?this.b=e:t>this.b&&e>=this.a&&(this.a=t)))}.bind(this))},St.prototype.parseInit=function(t){this.Ja(t,0,null,null)},St.prototype.parseMedia=function(t,e){return this.Ja(t,e.periodStart,e.segmentStart,e.segmentEnd)},cs=_t.prototype,cs.m=function(){this.h=!0;var t,e=[];for(t in this.b){var i=this.b[t],n=i[0];for(this.b[t]=i.slice(0,1),n&&e.push(n.p["catch"](T)),n=1;n<i.length;++n)i[n].p["catch"](T),i[n].p.reject()}return this.a&&e.push(this.a.m()),Promise.all(e).then(function(){this.g.m(),this.a=this.i=this.K=this.f=this.g=null,this.c={},this.b={}}.bind(this))},cs.init=function(t){for(var e in t){var i=t[e];"text"==e?Ct(this,i):(i=this.K.addSourceBuffer(i),M(this.g,i,"error",this.Yd.bind(this,e)),M(this.g,i,"updateend",this.Ea.bind(this,e)),this.c[e]=i,this.b[e]=[])}},cs.remove=function(t,e,i){return"text"==t?this.a.remove(e,i):Ot(this,t,this.fc.bind(this,t,e,i))},cs.endOfStream=function(t){return Ut(this,function(){t?this.K.endOfStream(t):this.K.endOfStream()}.bind(this))},cs.ma=function(t){return Ut(this,function(){this.K.duration=t}.bind(this))},cs.W=function(){return this.K.duration},cs.Xd=function(t,e){this.c[t].appendBuffer(e)},cs.fc=function(t,e,i){i<=e?this.Ea(t):this.c[t].remove(e,i)},cs.tc=function(t){var e=this.c[t].appendWindowEnd;this.c[t].abort(),this.c[t].appendWindowEnd=e,this.Ea(t)},cs.Dc=function(t){this.f.currentTime-=.001,this.Ea(t)},cs.Nd=function(t,e){this.c[t].timestampOffset=e,this.Ea(t)},cs.Ld=function(t,e){this.c[t].appendWindowEnd=e+.04,this.Ea(t)},cs.Yd=function(t){this.b[t][0].p.reject(new u(2,3,3014,this.f.error?this.f.error.code:0))},cs.Ea=function(t){var e=this.b[t][0];e&&(e.p.resolve(),jt(this,t))};var Ts=1,ws=2,Es={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};e("shaka.abr.SimpleAbrManager",ne),ne.prototype.stop=function(){this.f=null,this.b=!1,this.h=[],this.g=[],this.c=null},ne.prototype.stop=ne.prototype.stop,ne.prototype.init=function(t){this.f=t},ne.prototype.init=ne.prototype.init,ne.prototype.chooseStreams=function(t){var e={};if(-1<t.indexOf("audio")||-1<t.indexOf("video")){var i,n=this.h;i=re(this.i,n);var r=this.a.getBandwidthEstimate();if(n.length&&!i.length)throw new u(2,4,4012);for(var n=i[0],a=0;a<i.length;++a){var s=i[a],o=(i[a+1]||{bandwidth:1/0}).bandwidth/.85;r>=s.bandwidth/.95&&r<=o&&(n=s)}(i=n)&&i.video&&(e.video=i.video),i&&i.audio&&(e.audio=i.audio)}return-1<t.indexOf("text")&&(e.text=this.g[0]),this.c=Date.now(),e},ne.prototype.chooseStreams=ne.prototype.chooseStreams,ne.prototype.enable=function(){this.b=!0},ne.prototype.enable=ne.prototype.enable,ne.prototype.disable=function(){this.b=!1},ne.prototype.disable=ne.prototype.disable,ne.prototype.segmentDownloaded=function(t,e){var i=this.a;if(!(16e3>e)){var n=8e3*e/t,a=t/1e3;i.a+=e,r(i.c,a,n),r(i.f,a,n)}if(null!=this.c&&this.b)t:{if(this.j){if(8e3>Date.now()-this.c)break t}else{if(!(128e3<=this.a.a))break t;this.j=!0}i=this.chooseStreams(["audio","video"]),this.a.getBandwidthEstimate(),this.f(i)}},ne.prototype.segmentDownloaded=ne.prototype.segmentDownloaded,ne.prototype.getBandwidthEstimate=function(){return this.a.getBandwidthEstimate()},ne.prototype.getBandwidthEstimate=ne.prototype.getBandwidthEstimate,ne.prototype.setDefaultEstimate=function(t){this.a.setDefaultEstimate(t)},ne.prototype.setDefaultEstimate=ne.prototype.setDefaultEstimate,ne.prototype.setRestrictions=function(t){this.i=t},ne.prototype.setRestrictions=ne.prototype.setRestrictions,ne.prototype.setVariants=function(t){this.h=t},ne.prototype.setVariants=ne.prototype.setVariants,ne.prototype.setTextStreams=function(t){this.g=t},ne.prototype.setTextStreams=ne.prototype.setTextStreams,ae.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},ae.prototype.stopImmediatePropagation=function(){this.a=!0},ae.prototype.stopPropagation=function(){};var ks="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),Ss="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),Is=["loop","playbackRate"],As=["pause","play"],xs="adaptation buffering emsg error loading unloading texttrackvisibility timelineregionadded timelineregionenter timelineregionexit trackschanged".split(" "),_s="drmInfo getAudioLanguages getConfiguration getExpiration getManifestUri getPlaybackRate getPlayheadTimeAsDate getTextLanguages getTextTracks getTracks getStats getVariantTracks isBuffering isInProgress isLive isTextTrackVisible keySystem seekRange".split(" "),Ps=[["getConfiguration","configure"]],Cs=[["isTextTrackVisible","setTextTrackVisibility"]],Ns="addTextTrack cancelTrickPlay configure resetConfiguration selectAudioLanguage selectTextLanguage selectTextTrack selectTrack selectVariantTrack setTextTrackVisibility trickPlay".split(" "),Rs=["load","unload"];cs=he.prototype,cs.m=function(){return ce(this),this.a&&(this.a.leave(function(){},function(){}),this.a=null),this.F=this.B=this.l=null,this.c=this.j=this.h=!1,this.g=this.f=this.b=this.i=null,Promise.resolve()},cs.T=function(){return this.c},cs.wb=function(){return this.A},cs.init=function(){if(t.chrome&&chrome.cast&&chrome.cast.isAvailable){delete t.__onGCastApiAvailable,this.h=!0,this.l();var e=new chrome.cast.SessionRequest(this.I),e=new chrome.cast.ApiConfig(e,this.Vc.bind(this),this.fd.bind(this),"origin_scoped");chrome.cast.initialize(e,function(){},function(){})}else t.__onGCastApiAvailable=function(t){t&&this.init()}.bind(this)},cs.zb=function(t){this.i=t,this.c&&de(this,{type:"appData",appData:this.i})},cs.cast=function(t){return this.h?this.j?this.c?Promise.reject(new u(1,8,8002)):(this.g=new _,chrome.cast.requestSession(this.ub.bind(this,t),this.Ub.bind(this)),this.g):Promise.reject(new u(1,8,8001)):Promise.reject(new u(1,8,8e3))},cs.Va=function(){this.c&&(ce(this),this.a&&(this.a.stop(function(){},function(){}),this.a=null))},cs.get=function(t,e){if("video"==t){if(0<=As.indexOf(e))return this.ec.bind(this,t,e)}else if("player"==t){if(0<=Ns.indexOf(e))return this.ec.bind(this,t,e);if(0<=Rs.indexOf(e))return this.Cd.bind(this,t,e);if(0<=_s.indexOf(e))return this.cc.bind(this,t,e)}return this.cc(t,e)},cs.set=function(t,e,i){this.b[t][e]=i,de(this,{type:"set",targetName:t,property:e,value:i})},cs.ub=function(t,e){this.a=e,this.a.addUpdateListener(this.Vb.bind(this)),this.a.addMessageListener("urn:x-cast:com.google.shaka.v2",this.$c.bind(this)),this.Vb(),de(this,{type:"init",initState:t,appData:this.i}),this.g.resolve()},cs.Ub=function(t){var e=8003;switch(t.code){case"cancel":e=8004;break;case"timeout":e=8005;break;case"receiver_unavailable":e=8006}this.g.reject(new u(2,8,e,t))},cs.cc=function(t,e){return this.b[t][e]},cs.ec=function(t,e){de(this,{type:"call",targetName:t,methodName:e,args:Array.prototype.slice.call(arguments,2)})},cs.Cd=function(t,e){var i=Array.prototype.slice.call(arguments,2),n=new _,r=this.o.toString();return this.o++,this.f[r]=n,de(this,{type:"asyncCall",targetName:t,methodName:e,args:i,id:r}),n},cs.Vc=function(t){var e=this.v();this.g=new _,this.ub(e,t)},cs.fd=function(t){this.j="available"==t,this.l()},cs.Vb=function(){var t=!!this.a&&"connected"==this.a.status;if(this.c&&!t){this.F();for(var e in this.b)this.b[e]={};ce(this)}this.A=(this.c=t)?this.a.receiver.friendlyName:"",this.l()},cs.$c=function(t,e){var i=oe(e);switch(i.type){case"event":var n=i.targetName,r=i.event;this.B(n,new ae(r.type,r));break;case"update":r=i.update;for(n in r){var a,i=this.b[n]||{};for(a in r[n])i[a]=r[n][a]}break;case"asyncComplete":if(n=i.id,a=i.error,i=this.f[n],delete this.f[n],i)if(a){n=new u(a.severity,a.category,a.code);for(r in a)n[r]=a[r];i.reject(n)}else i.resolve()}},le.prototype.addEventListener=function(t,e){this.gb.push(t,e)},le.prototype.removeEventListener=function(t,e){this.gb.remove(t,e)},le.prototype.dispatchEvent=function(t){for(var e=this.gb.get(t.type)||[],i=0;i<e.length;++i){t.target=this.Oa,t.currentTarget=this.Oa;var n=e[i];try{n.handleEvent?n.handleEvent(t):n.call(this,t)}catch(r){}if(t.a)break}return t.defaultPrevented},i(fe),e("shaka.cast.CastProxy",fe),fe.prototype.m=function(t){return t&&this.a&&this.a.Va(),t=[this.h?this.h.m():null,this.b?this.b.m():null,this.a?this.a.m():null],this.a=this.h=this.i=this.j=this.b=this.c=null,Promise.all(t)},fe.prototype.destroy=fe.prototype.m,fe.prototype.Mc=function(){return this.j},fe.prototype.getVideo=fe.prototype.Mc,fe.prototype.Hc=function(){return this.i},fe.prototype.getPlayer=fe.prototype.Hc,fe.prototype.uc=function(){return!!this.a&&(this.a.h&&this.a.j)},fe.prototype.canCast=fe.prototype.uc,fe.prototype.T=function(){return!!this.a&&this.a.T()},fe.prototype.isCasting=fe.prototype.T,fe.prototype.wb=function(){return this.a?this.a.wb():""},fe.prototype.receiverName=fe.prototype.wb,fe.prototype.cast=function(){var t=this.Mb();return this.a.cast(t).then(function(){return this.b.bb()}.bind(this))},fe.prototype.cast=fe.prototype.cast,fe.prototype.zb=function(t){this.a.zb(t)},fe.prototype.setAppData=fe.prototype.zb,fe.prototype.ae=function(){var t=this.a;if(t.c){var e=t.v();chrome.cast.requestSession(t.ub.bind(t,e),t.Ub.bind(t))}},fe.prototype.suggestDisconnect=fe.prototype.ae,fe.prototype.Va=function(){this.a.Va()},fe.prototype.forceDisconnect=fe.prototype.Va,cs=fe.prototype,cs.Mb=function(){var t={video:{},player:{},playerAfterLoad:{},manifest:this.b.Ta,startTime:null};return this.c.pause(),Is.forEach(function(e){t.video[e]=this.c[e]}.bind(this)),this.c.ended||(t.startTime=this.c.currentTime),Ps.forEach(function(e){var i=e[1];e=this.b[e[0]](),t.player[i]=e}.bind(this)),Cs.forEach(function(e){var i=e[1];e=this.b[e[0]](),t.playerAfterLoad[i]=e}.bind(this)),t},cs.Td=function(){this.dispatchEvent(new ae("caststatuschanged"))},cs.Vd=function(){Ps.forEach(function(t){var e=t[1];t=this.a.get("player",t[0])(),this.b[e](t)}.bind(this));var t=this.a.get("player","getManifestUri")(),e=this.a.get("video","ended"),i=Promise.resolve(),n=this.c.autoplay,r=null;e||(r=this.a.get("video","currentTime")),t&&(this.c.autoplay=!1,i=this.b.load(t,r),i["catch"](function(t){this.b.dispatchEvent(new ae("error",{detail:t}))}.bind(this)));var a={};Is.forEach(function(t){a[t]=this.a.get("video",t)}.bind(this)),i.then(function(){Is.forEach(function(t){this.c[t]=a[t]}.bind(this)),Cs.forEach(function(t){var e=t[1];t=this.a.get("player",t[0])(),this.b[e](t)}.bind(this)),this.c.autoplay=n,t&&this.c.play()}.bind(this))},cs.ge=function(t){if("addEventListener"==t)return this.g.addEventListener.bind(this.g);if("removeEventListener"==t)return this.g.removeEventListener.bind(this.g);if(this.a.T()&&!Object.keys(this.a.b.video).length){var e=this.c[t];if("function"!=typeof e)return e}return this.a.T()?this.a.get("video",t):(e=this.c[t],"function"==typeof e&&(e=e.bind(this.c)),e)},cs.ie=function(t,e){this.a.T()?this.a.set("video",t,e):this.c[t]=e},cs.he=function(t){this.a.T()||this.g.dispatchEvent(new ae(t.type,t))},cs.vd=function(t){return"addEventListener"==t?this.f.addEventListener.bind(this.f):"removeEventListener"==t?this.f.removeEventListener.bind(this.f):"getNetworkingEngine"==t?this.b.Nb.bind(this.b):this.a.T()&&!Object.keys(this.a.b.video).length&&0<=_s.indexOf(t)||!this.a.T()?(t=this.b[t],t.bind(this.b)):this.a.get("player",t)},cs.wd=function(t){this.a.T()||this.f.dispatchEvent(t)},cs.Ud=function(t,e){this.a.T()&&("video"==t?this.g.dispatchEvent(e):"player"==t&&this.f.dispatchEvent(e))},i(me),e("shaka.cast.CastReceiver",me),me.prototype.Oc=function(){return this.i},me.prototype.isConnected=me.prototype.Oc,me.prototype.Pc=function(){return this.f},me.prototype.isIdle=me.prototype.Pc,me.prototype.m=function(){var e=this.b?this.b.m():Promise.resolve();return null!=this.h&&t.clearTimeout(this.h),this.l=this.j=this.b=this.a=null,this.i=!1,this.f=!0,this.h=this.g=this.c=null,e.then(function(){cast.receiver.CastReceiverManager.getInstance().stop()})},me.prototype.destroy=me.prototype.m,cs=me.prototype,cs.ac=function(){this.i=!!cast.receiver.CastReceiverManager.getInstance().getSenders().length,ge(this)},cs.dc=function(t,e){this.vb(),ye(this,{type:"event",targetName:t,event:e},this.c)},cs.vb=function(){null!=this.h&&t.clearTimeout(this.h),this.h=t.setTimeout(this.vb.bind(this),500);var e={video:{},player:{}};Ss.forEach(function(t){e.video[t]=this.a[t]}.bind(this)),_s.forEach(function(t){e.player[t]=this.b[t]()}.bind(this));var i=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();i&&(e.video.volume=i.level,e.video.muted=i.muted),ye(this,{type:"update",update:e},this.c)},cs.Bc=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&ye(this,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},this.c),ye(this,{type:"event",targetName:"video",event:{type:"volumechange"}},this.c)},cs.jd=function(t){var e=oe(t.data);switch(e.type){case"init":be(this,e.initState,e.appData),this.vb();break;case"appData":this.l(e.appData);break;case"set":var i=e.targetName,n=e.property,r=e.value;if("video"==i){if(e=cast.receiver.CastReceiverManager.getInstance(),"volume"==n){e.setSystemVolumeLevel(r);break}if("muted"==n){e.setSystemVolumeMuted(r);break}}this.j[i][n]=r;break;case"call":i=e.targetName,n=e.methodName,r=e.args,i=this.j[i],i[n].apply(i,r);break;case"asyncCall":i=e.targetName,n=e.methodName,r=e.args,e=e.id,t=t.senderId,i=this.j[i],i[n].apply(i,r).then(this.kc.bind(this,t,e,null),this.kc.bind(this,t,e))}},cs.Wc=function(t){var e=oe(t.data);switch(e.type){case"PLAY":this.a.play(),Te(this,0);break;case"PAUSE":this.a.pause(),Te(this,0);break;case"SEEK":t=e.currentTime;var i=e.resumeState;null!=t&&(this.a.currentTime=Number(t)),i&&"PLAYBACK_START"==i?(this.a.play(),Te(this,0)):i&&"PLAYBACK_PAUSE"==i&&(this.a.pause(),Te(this,0));break;case"STOP":this.b.bb().then(function(){Te(this,0)}.bind(this));break;case"GET_STATUS":Te(this,Number(e.requestId));break;case"VOLUME":i=e.volume,t=i.level;var i=i.muted,n=this.a.volume,r=this.a.muted;null!=t&&(this.a.volume=Number(t)),null!=i&&(this.a.muted=i),n==this.a.volume&&r==this.a.muted||Te(this,0);break;case"LOAD":i=e.media.contentId,t=e.currentTime;var a=this.o(i);this.a.autoplay=!0,this.b.load(a,t).then(function(){Te(this,0,{contentId:a,streamType:this.b.aa()?"LIVE":"BUFFERED",contentType:""})}.bind(this))["catch"](function(t){var i="LOAD_FAILED";7==t.category&&7e3==t.code&&(i="LOAD_CANCELLED"),ye(this,{requestId:Number(e.requestId),type:i},this.g)}.bind(this));break;default:ye(this,{requestId:Number(e.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.g)}},cs.kc=function(t,e,i){ye(this,{type:"asyncComplete",id:e,error:i},this.c,t)};var Ds={IDLE:"IDLE",rc:"PLAYING",pc:"BUFFERING",qc:"PAUSED"},Ls={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"};e("shaka.media.InitSegmentReference",Fe),e("shaka.media.SegmentReference",Ve);var Ms=1;e("shaka.util.Mp4Parser",Qe),Qe.prototype.C=function(t,e){var i=ii(t);return this.b[i]=0,this.a[i]=e,this},Qe.prototype.box=Qe.prototype.C,Qe.prototype.$=function(t,e){var i=ii(t);return this.b[i]=1,this.a[i]=e,this},Qe.prototype.fullBox=Qe.prototype.$,Qe.prototype.parse=function(t){for(t=new He(new DataView(t));Ke(t);)this.Za(0,t)},Qe.prototype.parse=Qe.prototype.parse,Qe.prototype.Za=function(t,e){var i=e.u,n=Xe(e),r=Xe(e);switch(n){case 0:n=e.H.byteLength-i;break;case 1:n=Ye(e)}var a=this.a[r];if(a){var s=null,o=null;1==this.b[r]&&(o=Xe(e),s=o>>>24,o&=16777215),r=i+n-e.u,r=0<r?We(e,r).buffer:new ArrayBuffer(0),r=new He(new DataView(r)),a({Ja:this,version:s,Cc:o,s:r,size:n,start:i+t})}else ze(e,i+n-e.u)},Qe.prototype.parseNext=Qe.prototype.Za,Qe.children=Ze,Qe.sampleDescription=ti,Qe.allData=ei,e("shaka.media.SegmentIndex",ai),ai.prototype.m=function(){return this.a=null,Promise.resolve()},ai.prototype.destroy=ai.prototype.m,ai.prototype.find=function(t){for(var e=this.a.length-1;0<=e;--e){var i=this.a[e];if(t>=i.startTime&&t<i.endTime)return i.position}return this.a.length&&t<this.a[0].startTime?this.a[0].position:null},ai.prototype.find=ai.prototype.find,ai.prototype.get=function(t){return this.a.length?(t-=this.a[0].position,0>t||t>=this.a.length?null:this.a[t]):null},ai.prototype.get=ai.prototype.get,ai.prototype.qb=function(t){for(var e=[],i=0,n=0;i<this.a.length&&n<t.length;){var r=this.a[i],a=t[n];r.startTime<a.startTime?(e.push(r),i++):(r.startTime>a.startTime||(.1<Math.abs(r.endTime-a.endTime)?e.push(a):e.push(r),i++),n++)}for(;i<this.a.length;)e.push(this.a[i++]);if(e.length)for(i=e[e.length-1].position+1;n<t.length;)a=t[n++],a=new Ve((i++),a.startTime,a.endTime,a.a,a.V,a.J),e.push(a);else e=t;this.a=e},ai.prototype.merge=ai.prototype.qb,ai.prototype.jb=function(t){for(var e=0;e<this.a.length&&!(this.a[e].endTime>t);++e);this.a.splice(0,e)},ai.prototype.evict=ai.prototype.jb;var Os;li.prototype.parse=function(t,e,i,n){var r;if(e=new oi(new DataView(e)),440786851!=ui(e).id)throw new u(2,3,3008);var a=ui(e);if(408125543!=a.id)throw new u(2,3,3009);for(e=a.a.byteOffset,a=new oi(a.a),r=null;Ke(a.a);){var s=ui(a);if(357149030==s.id){r=s;break}}if(!r)throw new u(2,3,3010);for(a=new oi(r.a),r=1e6,s=null;Ke(a.a);){var o=ui(a);if(2807729==o.id)r=di(o);else if(17545==o.id)if(s=o,4==s.a.byteLength)s=s.a.getFloat32(0);else{if(8!=s.a.byteLength)throw new u(2,3,3003);s=s.a.getFloat64(0)}}if(null==s)throw new u(2,3,3011);if(a=r/1e9,r=s*a,t=ui(new oi(new DataView(t))),475249515!=t.id)throw new u(2,3,3007);return fi(t,e,a,r,i,n)};var Us={},js={};e("shaka.media.ManifestParser.registerParserByExtension",function(t,e){js[t]=e}),e("shaka.media.ManifestParser.registerParserByMime",function(t,e){Us[t]=e}),e("shaka.media.PresentationTimeline",Ci),Ci.prototype.W=function(){return this.a},Ci.prototype.getDuration=Ci.prototype.W,Ci.prototype.ma=function(t){this.a=t},Ci.prototype.setDuration=Ci.prototype.ma,Ci.prototype.Jc=function(){return this.f},Ci.prototype.getPresentationStartTime=Ci.prototype.Jc,Ci.prototype.lc=function(t){this.h=t},Ci.prototype.setClockOffset=Ci.prototype.lc,Ci.prototype.nc=function(t){this.g=t},Ci.prototype.setStatic=Ci.prototype.nc,Ci.prototype.Kc=function(){return this.c},Ci.prototype.getSegmentAvailabilityDuration=Ci.prototype.Kc,Ci.prototype.mc=function(t){this.c=t},Ci.prototype.setSegmentAvailabilityDuration=Ci.prototype.mc,Ci.prototype.Da=function(t,e){e.length&&(this.b=e.reduce(function(t,e){return Math.max(t,e.endTime-e.startTime)},this.b))},Ci.prototype.notifySegments=Ci.prototype.Da,Ci.prototype.rb=function(t){this.b=Math.max(this.b,t)},Ci.prototype.notifyMaxSegmentDuration=Ci.prototype.rb,Ci.prototype.aa=function(){return 1/0==this.a&&!this.g},Ci.prototype.isLive=Ci.prototype.aa,Ci.prototype.sa=function(){return 1/0!=this.a&&!this.g},Ci.prototype.isInProgress=Ci.prototype.sa,Ci.prototype.ja=function(){return this.Aa(0)},Ci.prototype.getSegmentAvailabilityStart=Ci.prototype.ja,Ci.prototype.Aa=function(t){if(1/0==this.c)return 0;var e=this.ra();return Math.max(0,Math.min(e-this.c+t,e))},Ci.prototype.getSafeAvailabilityStart=Ci.prototype.Aa,Ci.prototype.ra=function(){return this.aa()||this.sa()?Math.min(Math.max(0,(Date.now()+this.h)/1e3-this.b-this.f),this.a):this.a},Ci.prototype.getSegmentAvailabilityEnd=Ci.prototype.ra,Ci.prototype.Xa=function(){return Math.max(0,this.ra()-(this.aa()||this.sa()?this.i:0))},Ci.prototype.getSeekRangeEnd=Ci.prototype.Xa,e("shaka.dash.DashParser",Ni),cs=Ni.prototype,cs.configure=function(t){this.b=t},cs.start=function(t,e){return this.g=[t],this.a=e,Ri(this).then(function(){return this.a&&ji(this,0),this.c}.bind(this))},cs.stop=function(){return this.b=this.a=null,this.g=[],this.c=null,this.i=[],this.j={},null!=this.f&&(t.clearTimeout(this.f),this.f=null),Promise.resolve()},cs.update=function(){Ri(this)["catch"](function(t){this.a&&this.a.onError(t)}.bind(this))},cs.onExpirationUpdated=function(){},cs.rd=function(t,e){t.P=Bi(e,t.R,null);var i=!1,n=Ee(e,"Role"),r=void 0;"text"==t.P.contentType&&(r="subtitle");for(var a=0;a<n.length;a++){var s=n[a].getAttribute("schemeIdUri");if(null==s||"urn:mpeg:dash:role:2011"==s)switch(s=n[a].getAttribute("value")){case"main":i=!0;break;case"caption":case"subtitle":r=s}}var o=null,h=!1;if(Ee(e,"EssentialProperty").forEach(function(t){"http://dashif.org/guidelines/trickmode"==t.getAttribute("schemeIdUri")?o=t.getAttribute("value"):h=!0}),h)return null;var n=Ee(e,"ContentProtection"),c=Re(n,this.b.dash.customScheme,this.b.dash.ignoreDrmInfo),n=Ft(e.getAttribute("lang")||"und"),a=Ee(e,"Representation"),r=a.map(this.ud.bind(this,t,c,r,n,i)).filter(function(t){return!!t});if(!r.length)throw new u(2,4,4003);return t.P.contentType||(t.P.contentType=Ki(r[0].mimeType,r[0].codecs),r.forEach(function(e){e.type=t.P.contentType})),r.forEach(function(t){c.drmInfos.forEach(function(e){t.keyId&&e.keyIds.push(t.keyId)})}),a=a.map(function(t){return t.getAttribute("id")}).filter(w),{id:t.P.id||"__fake__"+this.h++,contentType:t.P.contentType,language:n,ob:i,streams:r,drmInfos:c.drmInfos,Fb:o,Dd:a}},cs.ud=function(t,e,i,n,r,a){if(t.w=Bi(a,t.P,null),!Fi(t.w))return null;t.bandwidth=Se(a,"bandwidth",Pe)||void 0;var s;if(s=this.Ed.bind(this),t.w.La)s=vi(t,s);else if(t.w.la)s=yi(t,this.j);else if(t.w.Ma)s=ki(t,s,this.j,!!this.c);else{var o=t.w.S,u=t.N.duration||0;s={createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(t){return 0<=t&&t<u?1:null},getSegmentReference:function(t){return 1!=t?null:new Ve(1,0,u,function(){return o},0,null)},initSegmentReference:null,presentationTimeOffset:0}}return a=Ee(a,"ContentProtection"),a=De(a,this.b.dash.customScheme,e,this.b.dash.ignoreDrmInfo),{id:this.h++,createSegmentIndex:s.createSegmentIndex,findSegmentPosition:s.findSegmentPosition,getSegmentReference:s.getSegmentReference,initSegmentReference:s.initSegmentReference,presentationTimeOffset:s.presentationTimeOffset,mimeType:t.w.mimeType,codecs:t.w.codecs,frameRate:t.w.frameRate,bandwidth:t.bandwidth,width:t.w.width,height:t.w.height,kind:i,encrypted:0<e.drmInfos.length,keyId:a,language:n,type:t.P.contentType,primary:r,trickModeVideo:null,containsEmsgBoxes:t.w.containsEmsgBoxes}},cs.Wd=function(){this.f=null;var t=Date.now();Ri(this).then(function(){this.a&&ji(this,(Date.now()-t)/1e3)}.bind(this))["catch"](function(t){this.a&&(t.severity=1,this.a.onError(t),ji(this,0))}.bind(this))},cs.td=function(t,e,i){var n=i.getAttribute("schemeIdUri")||"",r=i.getAttribute("value")||"",a=Se(i,"timescale",Ce)||1;Ee(i,"Event").forEach(function(i){var s=Se(i,"presentationTime",Ce)||0,o=Se(i,"duration",Ce)||0,s=s/a+t,o=s+o/a;null!=e&&(s=Math.min(s,t+e),o=Math.min(o,t+e)),i={schemeIdUri:n,value:r,startTime:s,endTime:o,id:i.getAttribute("id")||"",eventElement:i},this.a.onTimelineRegionAdded(i)}.bind(this))},cs.Ed=function(t,e,i){return t=N(t,this.b.retryParameters),null!=e&&(t.headers.Range="bytes="+e+"-"+(null!=i?i:"")),this.a.networkingEngine.request(1,t).then(function(t){return t.data})},js.mpd=Ni,Us["application/dash+xml"]=Ni,Gi.prototype.toString=function(){function t(t){return t.name+'="'+t.value+'"'}return this.value?"#"+this.name+":"+this.value:0<this.a.length?"#"+this.name+":"+this.a.map(t).join(","):"#"+this.name},Gi.prototype.getAttribute=function(t){var e=this.a.filter(function(e){return e.name==t});return e.length?e[0]:null};var Bs="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-MAP EXT-X-I-FRAMES-ONLY".split(" "),Fs="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE".split(" ");e("shaka.net.DataUriPlugin",an),an.parse=function(e){var i=e.split(":");if(2>i.length||"data"!=i[0])throw new u(2,1,1004,e);if(i=i.slice(1).join(":").split(","),2>i.length)throw new u(2,1,1004,e);var n=i[0],i=t.decodeURIComponent(i.slice(1).join(",")),n=n.split(";"),r=null;if(1<n.length&&(r=n[1]),"base64"==r)e=J(i).buffer;else{if(r)throw new u(2,1,1005,e);e=X(i)}return{data:e,contentType:n[0]}},bs.data=an,e("shaka.hls.HlsParser",sn),cs=sn.prototype,cs.configure=function(t){this.b=t},cs.start=function(t,e){return this.c=e,this.j=t,this.c.networkingEngine.request(0,N([t],this.b.retryParameters)).then(function(e){return on(this,e.data,t)}.bind(this))},cs.stop=function(){return this.b=this.c=null,this.g={},Promise.resolve()},cs.update=function(){},cs.onExpirationUpdated=function(){};var Vs=[/^(avc)/,/^(hvc)/,/^(vp[8-9])$/,/^(av1)$/,/^(mp4v)/],Hs=[/^(vorbis)/,/^(opus)/,/^(mp4a)/,/^(ac-3)$/,/^(ec-3)$/],Ks={mp4:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",ts:"video/mp2t"},qs={mp4:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",ts:"video/mp2t"},Gs={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(t){if("SAMPLE-AES-CENC"!=wn(t,"METHOD"))return null;var e=wn(t,"URI"),e=an.parse(e),e=new Uint8Array(e.data),e=I("com.widevine.alpha",[{initDataType:"cenc",initData:e}]);return(t=t.getAttribute("KEYID"))&&(e.keyIds=[t.value.substr(2).toLowerCase()]),e}};js.m3u8=sn,Us["application/x-mpegurl"]=sn,Us["application/vnd.apple.mpegurl"]=sn,kn.prototype.parseInit=function(){},kn.prototype.parseMedia=function(t,e){var i=K(t),n=[],r=new DOMParser,a=null;try{a=r.parseFromString(i,"text/xml")}catch(s){throw new u(2,2,2005)}if(a){var o,h,c=a.getElementsByTagName("tt")[0];if(!c)throw new u(2,2,2005);if(r=c.getAttribute("ttp:frameRate"),a=c.getAttribute("ttp:subFrameRate"),o=c.getAttribute("ttp:frameRateMultiplier"),h=c.getAttribute("ttp:tickRate"),i=c.getAttribute("xml:space")||"default","default"!=i&&"preserve"!=i)throw new u(2,2,2005);for(i="default"==i,r=new Cn(r,a,o,h),a=Sn(c.getElementsByTagName("styling")[0]),o=Sn(c.getElementsByTagName("layout")[0]),c=Sn(c.getElementsByTagName("body")[0]),h=0;h<c.length;h++){var d,l=c[h],f=e.periodStart,p=r;d=a;var m=o,v=i;if(l.hasAttribute("begin")||l.hasAttribute("end")||!/^\s*$/.test(l.textContent)){In(l,v);var v=_n(l.getAttribute("begin"),p),g=_n(l.getAttribute("end"),p),p=_n(l.getAttribute("dur"),p),b=l.textContent;if(null==g&&null!=p&&(g=v+p),null==v||null==g)throw new u(2,2,2001);(f=wt(v+f,g+f,b))?(v=xn(l,"region",m),m=f,(g=An(l,v,d,"tts:extent"))&&(p=Qs.exec(g))&&(m.size=Number(p[1])),p=An(l,v,d,"tts:writingMode"),g=!0,"tb"==p||"tblr"==p?m.vertical="lr":"tbrl"==p?m.vertical="rl":g=!1,(p=An(l,v,d,"tts:origin"))&&(p=Qs.exec(p))&&(g?(m.position=Number(p[2]),m.line=Number(p[1])):(m.position=Number(p[1]),m.line=Number(p[2])),m.snapToLines=!1),(d=An(l,v,d,"tts:textAlign"))&&(m.align=d,"center"==d&&("center"!=m.align&&(m.align="middle"),m.position="auto"),m.positionAlign=to[d],m.lineAlign=Zs[d]),d=f):d=null}else d=null;d&&n.push(d)}}return n};var Xs=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Ys=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Ws=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,zs=/^(\d*\.?\d*)f$/,$s=/^(\d*\.?\d*)t$/,Js=/^(?:(\d*\.?\d*)h)?(?:(\d*\.?\d*)m)?(?:(\d*\.?\d*)s)?(?:(\d*\.?\d*)ms)?$/,Qs=/^(\d{1,2}|100)% (\d{1,2}|100)%$/,Zs={
left:"start",center:"center",right:"end",start:"start",end:"end"},to={left:"line-left",center:"center",right:"line-right"};Tt("application/ttml+xml",kn),Nn.prototype.parseInit=function(t){var e=!1;if((new Qe).C("moov",Ze).C("trak",Ze).C("mdia",Ze).C("minf",Ze).C("stbl",Ze).$("stsd",ti).C("stpp",function(){e=!0}).parse(t),!e)throw new u(2,2,2007)},Nn.prototype.parseMedia=function(t,e){var i=!1,n=[];if((new Qe).C("mdat",ei(function(t){i=!0,n=this.a.parseMedia(t.buffer,e)}.bind(this))).parse(t),!i)throw new u(2,2,2007);return n},Tt('application/mp4; codecs="stpp"',Nn),Rn.prototype.parseInit=function(){},Rn.prototype.parseMedia=function(t,e){var i=K(t),i=i.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n"),i=i.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(i[0]))throw new u(2,2,2e3);var n=e.segmentStart;if(0<=i[0].indexOf("X-TIMESTAMP-MAP")){var r=i[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),a=i[0].match(/MPEGTS:(\d+)/m);r&&a&&(n=Ln(new Ji(r[1])),n=e.periodStart+(Number(a[1])/9e4-n))}for(a=[],r=1;r<i.length;r++){var s,o=i[r].split("\n"),h=n;if(1==o.length&&!o[0]||/^NOTE($|[ \t])/.test(o[0]))s=null;else{s=null,0>o[0].indexOf("-->")&&(s=o[0],o.splice(0,1));var c=new Ji(o[0]),d=Ln(c),l=Qi(c,/[ \t]+--\x3e[ \t]+/g),f=Ln(c);if(null==d||!l||null==f)throw new u(2,2,2001);if(o=wt(d+h,f+h,o.slice(1).join("\n").trim())){for(Qi(c,/[ \t]+/gm),h=Zi(c);h;)Dn(o,h),Qi(c,/[ \t]+/gm),h=Zi(c);null!=s&&(o.id=s),s=o}else s=null}s&&a.push(s)}return a},Tt("text/vtt",Rn),Tt('text/vtt; codecs="vtt"',Rn),Mn.prototype.parseInit=function(t){var e=!1;if((new Qe).C("moov",Ze).C("trak",Ze).C("mdia",Ze).$("mdhd",function(t){0==t.version?(ze(t.s,4),ze(t.s,4),this.a=Xe(t.s),ze(t.s,4)):(ze(t.s,8),ze(t.s,8),this.a=Xe(t.s),ze(t.s,8)),ze(t.s,4)}.bind(this)).C("minf",Ze).C("stbl",Ze).$("stsd",ti).C("wvtt",function(){e=!0}).parse(t),!this.a)throw new u(2,2,2008);if(!e)throw new u(2,2,2008)},Mn.prototype.parseMedia=function(t,e){var i=0,n=[],r=[],a=[],s=!1,o=!1,h=!1;if((new Qe).C("moof",Ze).C("traf",Ze).$("tfdt",function(t){s=!0,i=t.version?Ye(t.s):Xe(t.s)}).$("trun",function(t){o=!0;var e=t.version,i=t.Cc;t=t.s;var r=Xe(t);1&i&&ze(t,4),4&i&&ze(t,4);for(var a=[],s=0;s<r;s++){var u={duration:null,Eb:null};if(256&i&&(u.duration=Xe(t)),512&i&&ze(t,4),1024&i&&ze(t,4),2048&i){var h,c=u;if(e){h=t;try{var d=h.H.getInt32(h.u,h.a)}catch(l){Je()}h.u+=4,h=d}else h=Xe(t);c.Eb=h}a.push(u)}n=a}).C("vtte",function(){r.push(null)}).C("vttc",ei(function(t){r.push(t.buffer)})).C("mdat",function(t){h=!0,Ze(t)}).parse(t),!h&&!s&&!o)throw new u(2,2,2008);for(var c=i,d=0;d<n.length;d++){var l=n[d],f=r[d];if(l.duration){var p=l.Eb?i+l.Eb:c,c=p+l.duration;f&&a.push(On(f,e.periodStart+p/this.a,e.periodStart+c/this.a))}}return a},Tt('application/mp4; codecs="wvtt"',Mn),cs=jn.prototype,cs.m=function(){var e=this.b.m();return this.b=null,null!=this.f&&(t.clearInterval(this.f),this.f=null),null!=this.j&&(t.clearInterval(this.j),this.j=null),this.F=this.I=this.l=this.c=this.a=null,e},cs.kb=function(){return this.g},cs.tb=function(){this.o=!0,this.Zb()},cs.ed=function(){this.a.playbackRate!=(this.h||0>this.g?0:this.g)&&Hn(this,this.a.playbackRate)},cs.Xb=function(){var t=Vn(this);.001>Math.abs(this.a.currentTime-t)?(M(this.b,this.a,"seeking",this.$b.bind(this)),M(this.b,this.a,"playing",this.Yb.bind(this))):(O(this.b,this.a,"seeking",this.gd.bind(this)),this.a.currentTime=t)},cs.gd=function(){M(this.b,this.a,"seeking",this.$b.bind(this)),M(this.b,this.a,"playing",this.Yb.bind(this))},cs.Zb=function(){if(this.a.readyState){this.a.readyState!=this.B&&(this.i=!1,this.B=this.a.readyState);var t,e=this.l.smallGapLimit,i=this.a.currentTime,n=this.a.buffered;t:{if(n&&n.length&&!(1==n.length&&1e-6>n.end(0)-n.start(0))){t=.1,/(Edge|Trident)\//.test(navigator.userAgent)&&(t=.5);for(var r=0;r<n.length;r++)if(n.start(r)>i&&(!r||n.end(r-1)-i<=t)){t=r;break t}}t=null}if(null==t){if(3>this.a.readyState&&0<this.a.playbackRate)if(this.M!=i)this.M=i,this.v=Date.now();else if(this.v<Date.now()-1e3)for(this.v=Date.now()+5e3,t=0;t<n.length;t++)if(i>=n.start(t)&&i<n.end(t)-.5){this.a.currentTime=this.a.currentTime;break}}else if((t||this.o)&&(r=n.start(t),!(r>=this.c.presentationTimeline.Xa()))){var a=r-i,e=a<=e,s=!1;e||this.i||(this.i=!0,a=new ae("largegap",{currentTime:i,gapSize:a}),a.cancelable=!0,this.F(a),this.l.jumpLargeGaps&&!a.defaultPrevented&&(s=!0)),(e||s)&&(t&&n.end(t-1),qn(this,i,r))}}},cs.$b=function(){this.o=!1;var t=this.a.currentTime,e=Kn(this,t);.001<Math.abs(e-t)?qn(this,t,e):(this.i=!1,this.I())},cs.Yb=function(){var t=this.a.currentTime,e=Kn(this,t);.001<Math.abs(e-t)&&qn(this,t,e)},Xn.prototype.m=function(){var t=this.j?this.j.m():Promise.resolve();return this.j=null,zn(this),this.B=this.h=this.l=this.A=this.g=this.a=null,this.c=[],t},Xn.prototype.v=function(t){if(!this.c.some(function(e){return e.info.schemeIdUri==t.schemeIdUri&&e.info.startTime==t.startTime&&e.info.endTime==t.endTime})){var e={info:t,status:1};this.c.push(e);var i=new ae("timelineregionadded",{detail:Yn(t)});this.h(i),this.o(!0,e)}},Xn.prototype.o=function(t,e){var i=e.info.startTime>this.a.currentTime?1:e.info.endTime<this.a.currentTime?3:2,n=2==e.status,r=2==i;i!=e.status&&((!t||n||r)&&(n||this.h(new ae("timelineregionenter",{detail:Yn(e.info)})),r||this.h(new ae("timelineregionexit",{detail:Yn(e.info)}))),e.status=i)},Xn.prototype.F=function(){this.f=null,Wn(this);var t=ee(this.g,this.a.currentTime);t!=this.i&&(-1!=this.i&&this.B(),this.i=t);var t=xt(this.a.buffered,this.a.currentTime),e=It(this.a.buffered)>=this.g.presentationTimeline.ra()-.1||this.a.ended;if(this.b){var i=1*Math.max(this.g.minBufferTime||0,this.A.rebufferingGoal);(e||t>=i)&&0!=this.b&&(this.b=!1,this.l(!1))}else!e&&.5>t&&1!=this.b&&(this.b=!0,this.l(!0));this.c.forEach(this.o.bind(this,!1))},cs=$n.prototype,cs.m=function(){for(var t in this.c)Tr(this.c[t]);return this.h=this.c=this.j=this.g=this.o=this.b=this.a=null,this.f=!0,Promise.resolve()},cs.configure=function(t){this.h=t},cs.init=function(){var t=this.a.Tb(this.b.periods[ee(this.b,Fn(this.a.Ka))]);return B(t)?Promise.reject(new u(2,5,5005)):nr(this,t).then(function(){this.a&&this.a.Xc&&this.a.Xc()}.bind(this))},cs.Zd=function(t){if(!this.f&&!t.ta&&null!=t.na&&!t.pa)if(t.na=null,t.oa)br(this,t,t.fb);else{try{var e=or(this,t);null!=e&&(yr(this,t,e),t.mb=!1)}catch(i){return void this.a.onError(i)}e=F(this.c),mr(this,t),e.every(function(t){return t.endOfStream})&&this.a.G.endOfStream().then(function(){this.b.presentationTimeline.ma(this.a.G.W())}.bind(this))}},cs.sd=function(t,e,i){var n=$e(i.s),r=$e(i.s),a=Xe(i.s),s=Xe(i.s),o=Xe(i.s),u=Xe(i.s);i=We(i.s,i.s.H.byteLength-i.s.u),t=t.startTime+e.startTime+s/a,"urn:mpeg:dash:event:2012"==n?this.a.Yc():this.a.onEvent(new ae("emsg",{detail:{startTime:t,endTime:t+o/a,schemeIdUri:n,value:r,timescale:a,presentationTimeDelta:s,eventDuration:o,id:u,messageData:i}}))},e("shaka.net.HttpPlugin",wr),bs.http=wr,bs.https=wr,cs=Er.prototype,cs.init=function(t,e){return xr(this,t,e).then(function(){var e=Object.keys(t);return Promise.all(e.map(function(t){return Ir(this,t).then(function(e){this.b[t]=e}.bind(this))}.bind(this)))}.bind(this))},cs.m=function(){return Promise.all(this.c.map(function(t){try{t.transaction.abort()}catch(e){}return t.O["catch"](T)})).then(function(){this.a&&(this.a.close(),this.a=null)}.bind(this))},cs.get=function(t,e){return Ar(this,t,"readonly",function(t){return t.get(e)})},cs.forEach=function(t,e){return Ar(this,t,"readonly",function(t){return t.openCursor()},function(t){t&&(e(t.value),t["continue"]())})},cs.remove=function(t,e){return Ar(this,t,"readwrite",function(t){return t["delete"](e)})};var eo={manifest:"key",segment:"key"};Or.prototype.m=function(){var t=this.j,e=this.l,i=this.i||Promise.resolve(),i=i.then(function(){return Promise.all(e.map(function(e){return t.remove("segment",e)}))});return this.b={},this.l=[],this.i=this.a=this.A=this.v=this.j=this.o=null,i},cs=Fr.prototype,cs.configure=function(){},cs.start=function(t){var e=/^offline:([0-9]+)$/.exec(t);if(!e)return Promise.reject(new u(2,1,9004,t));var i=Number(e[1]),n=Mr();return this.a=i,n?n.init(eo).then(function(){return n.get("manifest",i)}).then(function(t){if(!t)throw new u(2,9,9003,i);return Vr(t)}).then(function(t){return n.m().then(function(){return t})},function(t){return n.m().then(function(){throw t})}):Promise.reject(new u(2,9,9e3))},cs.stop=function(){return Promise.resolve()},cs.update=function(){},cs.onExpirationUpdated=function(t,e){var i=Mr();i.init(eo).then(function(){return i.get("manifest",this.a)}.bind(this)).then(function(n){if(n&&!(0>n.sessionIds.indexOf(t))&&(void 0==n.expiration||n.expiration>e))return n.expiration=e,kr(i,"manifest",n)})["catch"](function(){}).then(function(){return i.m()})},Us["application/x-offline-manifest"]=Fr,e("shaka.offline.OfflineScheme",Hr),bs.offline=Hr,Kr.prototype.then=function(t){return this.a=this.a.then(t).then(function(t){return this.c?(this.h(),Promise.reject(this.i)):Promise.resolve(t)}.bind(this)),this},Kr.prototype.cancel=function(t){return this.b?Promise.resolve():(this.c=!0,this.i=t,this.g)},i(Gr),e("shaka.Player",Gr),Gr.prototype.m=function(){this.I=!0;var t=Promise.resolve();return this.F&&(t=this.F.cancel(new u(2,7,7e3))),t.then(function(){var t=Promise.all([this.ia,$r(this),this.l?this.l.m():null,this.o?this.o.m():null]);return this.b=this.o=this.Hb=this.l=this.A=this.f=null,t}.bind(this))},Gr.prototype.destroy=Gr.prototype.m,Gr.version="v2.1.1";var io={};Gr.registerSupportPlugin=function(t,e){io[t]=e},Gr.isBrowserSupported=function(){return!!(t.Promise&&t.Uint8Array&&Array.prototype.forEach&&t.MediaSource&&t.MediaKeys&&t.navigator&&t.navigator.requestMediaKeySystemAccess&&t.MediaKeySystemAccess&&t.MediaKeySystemAccess.prototype.getConfiguration)},Gr.probeSupport=function(){return vt().then(function(t){var e=_i(),i=Pt();t={manifest:e,media:i,drm:t};for(var n in io)t[n]=io[n]();return t})},Gr.prototype.load=function(t,e,i){var n=this.bb(),r=new Kr;this.F=r,this.dispatchEvent(new ae("loading"));var a=Date.now();return qr(r.then(function(){return n}).then(function(){return this.i=ta(),M(this.l,this.f,"playing",this.Na.bind(this)),M(this.l,this.f,"pause",this.Na.bind(this)),M(this.l,this.f,"ended",this.Na.bind(this)),Pi(t,this.o,this.b.manifest.retryParameters,i)}.bind(this)).then(function(e){return this.h=new e,this.h.configure(this.b.manifest),e={networkingEngine:this.o,filterPeriod:this.$a.bind(this),onTimelineRegionAdded:this.ld.bind(this),onEvent:this.ab.bind(this),onError:this.ua.bind(this)},2<this.h.start.length?this.h.start(t,this.o,e.filterPeriod,e.onError,e.onEvent):this.h.start(t,e)}.bind(this)).then(function(e){if(0==e.periods.length)throw new u(2,4,4014);return this.c=e,this.Ta=t,this.j=new et(this.o,this.ua.bind(this),this.Qd.bind(this),this.Pd.bind(this)),this.j.configure(this.b.drm),this.j.init(e,!1)}.bind(this)).then(function(){return this.c.periods.forEach(this.$a.bind(this)),this.Pa=Date.now()/1e3,this.fa=this.b.preferredAudioLanguage,this.ya=this.b.preferredTextLanguage,Promise.all([it(this.j,this.f),this.Ra])}.bind(this)).then(function(){return this.b.abr.manager.init(this.Cb.bind(this)),this.g=new jn(this.f,this.c,this.b.streaming,e||null,this.Rd.bind(this),this.ab.bind(this)),this.v=new Xn(this.f,this.c,this.b.streaming,this.oc.bind(this),this.ab.bind(this),this.Od.bind(this)),this.ga=new _t(this.f,this.K,this.A),this.a=new $n(this.c,{Ka:this.g,G:this.ga,Sc:this.o,Tb:this.Tc.bind(this),Sb:this.vc.bind(this),onError:this.ua.bind(this),onEvent:this.ab.bind(this),Yc:this.Zc.bind(this),tb:this.hd.bind(this)}),this.a.configure(this.b.streaming),this.a.init()}.bind(this)).then(function(){if(this.b.streaming.startAtSegmentBoundary){var t=na(this,Fn(this.g));Bn(this.g,t)}this.c.periods.forEach(this.$a.bind(this)),oa(this),sa(this);var t=Jn(this.a),e=$t(t,this.fa);this.b.abr.manager.setVariants(e),t.variants.some(function(t){return t.primary}),this.Sa.forEach(this.v.v.bind(this.v)),this.Sa=[],O(this.l,this.f,"loadeddata",function(){this.i.loadLatency=(Date.now()-a)/1e3}.bind(this)),this.F=null}.bind(this)))["catch"](function(t){return this.F==r&&(this.F=null,this.dispatchEvent(new ae("unloading"))),Promise.reject(t)}.bind(this))},Gr.prototype.load=Gr.prototype.load,Gr.prototype.configure=function(t){t.abr&&t.abr.manager&&t.abr.manager!=this.b.abr.manager&&(this.b.abr.manager.stop(),t.abr.manager.init(this.Cb.bind(this))),A(this.b,t,Zr(this),Qr(),""),Yr(this)},Gr.prototype.configure=Gr.prototype.configure,Gr.prototype.getConfiguration=function(){var t=Zr(this);return A(t,this.b,Zr(this),Qr(),""),t},Gr.prototype.getConfiguration=Gr.prototype.getConfiguration,Gr.prototype.Fd=function(){var t=Zr(this);t.abr&&t.abr.manager&&t.abr.manager!=this.b.abr.manager&&(this.b.abr.manager.stop(),t.abr.manager.init(this.Cb.bind(this))),this.b=Zr(this),Yr(this)},Gr.prototype.resetConfiguration=Gr.prototype.Fd,Gr.prototype.Gc=function(){return this.f},Gr.prototype.getMediaElement=Gr.prototype.Gc,Gr.prototype.Nb=function(){return this.o},Gr.prototype.getNetworkingEngine=Gr.prototype.Nb,Gr.prototype.Fc=function(){return this.Ta},Gr.prototype.getManifestUri=Gr.prototype.Fc,Gr.prototype.aa=function(){return!!this.c&&this.c.presentationTimeline.aa()},Gr.prototype.isLive=Gr.prototype.aa,Gr.prototype.sa=function(){return!!this.c&&this.c.presentationTimeline.sa()},Gr.prototype.isInProgress=Gr.prototype.sa,Gr.prototype.Hd=function(){var t=0,e=0;return this.c&&(e=this.c.presentationTimeline,t=e.ja(),e=e.Xa()),{start:t,end:e}},Gr.prototype.seekRange=Gr.prototype.Hd,Gr.prototype.keySystem=function(){return this.j?this.j.keySystem():""},Gr.prototype.keySystem=Gr.prototype.keySystem,Gr.prototype.drmInfo=function(){return this.j?this.j.b:null},Gr.prototype.drmInfo=Gr.prototype.drmInfo,Gr.prototype.Wa=function(){return this.j?this.j.Wa():1/0},Gr.prototype.getExpiration=Gr.prototype.Wa,Gr.prototype.Nc=function(){return this.ha},Gr.prototype.isBuffering=Gr.prototype.Nc,Gr.prototype.bb=function(){if(this.I)return Promise.resolve();this.dispatchEvent(new ae("unloading"));var t=Promise.resolve();return this.F&&(t=this.F.cancel(new u(2,7,7e3))),t.then(function(){return this.ia||(this.ia=Jr(this).then(function(){this.ia=null}.bind(this))),this.ia}.bind(this))},Gr.prototype.unload=Gr.prototype.bb,Gr.prototype.kb=function(){return this.g?this.g.kb():0},Gr.prototype.getPlaybackRate=Gr.prototype.kb,Gr.prototype.be=function(t){this.g&&Hn(this.g,t),this.a&&tr(this.a,1!=t)},Gr.prototype.trickPlay=Gr.prototype.be,Gr.prototype.wc=function(){this.g&&Hn(this.g,1),this.a&&tr(this.a,!1)},Gr.prototype.cancelTrickPlay=Gr.prototype.wc,Gr.prototype.getTracks=function(){return this.Pb().concat(this.Ob())},Gr.prototype.getTracks=Gr.prototype.getTracks,Gr.prototype.Kd=function(t,e){"text"==t.type?this.ic(t):(this.configure({abr:{enabled:!1}}),this.jc(t,e))},Gr.prototype.selectTrack=Gr.prototype.Kd,Gr.prototype.Pb=function(){if(!this.c)return[];var t=ee(this.c,Fn(this.g)),e=this.M[t]||{};return Gt(this.c.periods[t],e.audio,e.video)},Gr.prototype.getVariantTracks=Gr.prototype.Pb,Gr.prototype.Ob=function(){if(!this.c)return[];var t=ee(this.c,Fn(this.g));return Xt(this.c.periods[t],(this.M[t]||{}).text).filter(function(t){return 0>this.Qa.indexOf(t.id)}.bind(this))},Gr.prototype.getTextTracks=Gr.prototype.Ob,Gr.prototype.ic=function(t){if(this.a&&(t=Wt(Jn(this.a),t))){Wr(this,t,!1);var e={};e.text=t,ea(this,e,!0)}},Gr.prototype.selectTextTrack=Gr.prototype.ic,Gr.prototype.jc=function(t,e){if(this.a){var i={},n=Yt(Jn(this.a),t),r=Qn(this.a);if(n){if(!n.allowedByApplication||!n.allowedByKeySystem)return;n.audio&&(zr(this,n.audio),n.audio!=r.audio&&(i.audio=n.audio)),n.video&&(zr(this,n.video),n.video!=r.video&&(i.video=n.video))}F(i).forEach(function(t){Wr(this,t,!1)}.bind(this)),(n=r.text)&&(i.text=n),ea(this,i,e)}},Gr.prototype.selectVariantTrack=Gr.prototype.jc,Gr.prototype.Ec=function(){return this.a?zt(Jn(this.a).variants).map(function(t){return t.language}).filter(k):[]},Gr.prototype.getAudioLanguages=Gr.prototype.Ec,Gr.prototype.Lc=function(){return this.a?Jn(this.a).textStreams.map(function(t){return t.language}).filter(k):[]},Gr.prototype.getTextLanguages=Gr.prototype.Lc,Gr.prototype.Id=function(t){if(this.a){var e=Jn(this.a);this.fa=t,aa(this,e)}},Gr.prototype.selectAudioLanguage=Gr.prototype.Id,Gr.prototype.Jd=function(t){if(this.a){var e=Jn(this.a);this.ya=t,aa(this,e)}},Gr.prototype.selectTextLanguage=Gr.prototype.Jd,Gr.prototype.Qc=function(){return"showing"==this.A.mode},Gr.prototype.isTextTrackVisible=Gr.prototype.Qc,Gr.prototype.Md=function(t){this.A.mode=t?"showing":"hidden",ua(this)},Gr.prototype.setTextTrackVisibility=Gr.prototype.Md,Gr.prototype.Ic=function(){return this.c?new Date(1e3*this.c.presentationTimeline.f+1e3*this.f.currentTime):null},Gr.prototype.getPlayheadTimeAsDate=Gr.prototype.Ic,Gr.prototype.getStats=function(){ia(this),this.Na();var t=null,e=null,i=this.f&&this.f.getVideoPlaybackQuality?this.f.getVideoPlaybackQuality():{};return this.g&&this.c&&(t=ee(this.c,Fn(this.g)),e=this.M[t],e=Zt(e.audio,e.video,this.c.periods[t].variants),t=e.video||{}),t||(t={}),e||(e={}),{width:t.width||0,height:t.height||0,streamBandwidth:e.bandwidth||0,decodedFrames:Number(i.totalVideoFrames),droppedFrames:Number(i.droppedVideoFrames),estimatedBandwidth:this.b.abr.manager.getBandwidthEstimate(),loadLatency:this.i.loadLatency,playTime:this.i.playTime,bufferingTime:this.i.bufferingTime,switchHistory:x(this.i.switchHistory),stateHistory:x(this.i.stateHistory)}},Gr.prototype.getStats=Gr.prototype.getStats,Gr.prototype.addTextTrack=function(t,e,i,n,r){if(!this.a)return Promise.reject();for(var a,s=Jn(this.a),o=0;o<this.c.periods.length;o++)if(this.c.periods[o]==s){if(o==this.c.periods.length-1){if(a=this.c.presentationTimeline.W()-s.startTime,1/0==a)return Promise.reject()}else a=this.c.periods[o+1].startTime-s.startTime;break}var u={id:this.sc++,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(e){return 1!=e?null:new Ve(1,0,a,function(){return[t]},0,null)},initSegmentReference:null,presentationTimeOffset:0,mimeType:n,codecs:r||"",kind:i,encrypted:!1,keyId:null,language:e,type:"text",primary:!1,trickModeVideo:null,containsEmsgBoxes:!1};return this.Qa.push(u.id),s.textStreams.push(u),Zn(this.a,u).then(function(){if(!this.I)return this.Qa.splice(this.Qa.indexOf(u.id),1),aa(this,s),oa(this),{id:u.id,active:!1,type:"text",bandwidth:0,language:e,kind:i,width:null,height:null}}.bind(this))},Gr.prototype.addTextTrack=Gr.prototype.addTextTrack,Gr.prototype.Ab=function(t,e){this.hb.width=t,this.hb.height=e},Gr.prototype.setMaxHardwareResolution=Gr.prototype.Ab,cs=Gr.prototype,cs.$a=function(t){var e=this.a?Qn(this.a):{};if(Kt(this.j,e,t),e=0<zt(t.variants).length,Ht(t,this.b.restrictions,this.hb)&&this.a&&Jn(this.a)==t&&oa(this),t=1>zt(t.variants).length,!e)throw new u(2,4,4011);if(t)throw new u(2,4,4012)},cs.Sd=function(t,e){this.b.abr.manager.segmentDownloaded(t,e)},cs.oc=function(t){if(ia(this),this.ha=t,this.Na(),this.g){var e=this.g;t!=e.h&&(e.h=t,Hn(e,e.g))}this.dispatchEvent(new ae("buffering",{buffering:t}))},cs.Od=function(){oa(this)},cs.Na=function(){if(!this.I){var t;t=this.ha?"buffering":this.f.ended?"ended":this.f.paused?"paused":"playing";var e=Date.now()/1e3;if(this.i.stateHistory.length){var i=this.i.stateHistory[this.i.stateHistory.length-1];if(i.duration=e-i.timestamp,t==i.state)return}this.i.stateHistory.push({timestamp:e,state:t,duration:0})}},cs.Rd=function(){if(this.v){var t=this.v;t.c.forEach(t.o.bind(t,!0))}this.a&&ir(this.a)},cs.Tc=function(t){this.Ua=!0,this.b.abr.manager.disable();var e=$t(t,this.fa),i=Jt(t,this.ya);t=ra(this,t,e,i,!0);for(var n in this.B)t[n]=this.B[n].stream;this.B={};for(n in t)Wr(this,t[n],!0);return t},cs.vc=function(){this.Ua=!1,this.b.abr.enabled&&this.b.abr.manager.enable();for(var t in this.B){var e=this.B[t];er(this.a,t,e.stream,e.zc)}this.B={}},cs.Zc=function(){this.h&&this.h.update&&this.h.update()},cs.hd=function(){this.g&&this.g.tb()},cs.Cb=function(t,e){var i,n=Qn(this.a);for(i in t){var r=t[i];n[i]!=r?Wr(this,r,!0):delete t[i]}if(!B(t)&&this.a){for(i in t)er(this.a,i,t[i],e||!1);sa(this)}},cs.ua=function(t){this.I||this.dispatchEvent(new ae("error",{detail:t}))},cs.ld=function(t){this.v?this.v.v(t):this.Sa.push(t)},cs.ab=function(t){this.dispatchEvent(t)},cs.md=function(){if(this.f.error){var t=this.f.error.code;if(1!=t){var e=this.f.error.msExtendedCode;e&&(0>e&&(e+=Math.pow(2,32)),e=e.toString(16)),this.ua(new u(2,3,3016,t,e))}}},cs.Qd=function(t){var e=["output-restricted","internal-error"],i=Jn(this.a),n=!1;i.variants.forEach(function(i){var r=[];i.audio&&r.push(i.audio),i.video&&r.push(i.video),r.forEach(function(r){var a=i.allowedByKeySystem;r.keyId&&(r=t[r.keyId],i.allowedByKeySystem=!!r&&0>e.indexOf(r)),a!=i.allowedByKeySystem&&(n=!0)})});var r=Qn(this.a);(r=Qt(r.audio,r.video,i.variants))&&!r.allowedByKeySystem&&aa(this,i),n&&oa(this)},cs.Pd=function(t,e){this.h&&this.h.onExpirationUpdated&&this.h.onExpirationUpdated(t,e),this.dispatchEvent(new ae("expirationupdated"))},e("shaka.offline.Storage",ha),ha.support=ca,ha.prototype.m=function(){var t=this.a,e=this.h?this.h.m()["catch"](function(){}).then(function(){if(t)return t.m()}):Promise.resolve();return this.i=this.f=this.h=this.a=null,e},ha.prototype.destroy=ha.prototype.m,ha.prototype.configure=function(t){A(this.i,t,la(this),{},"")},ha.prototype.configure=ha.prototype.configure,ha.prototype.$d=function(t,e,i){function n(t){a=t}if(this.v)return Promise.reject(new u(2,9,9006));this.v=!0;var r,a=null;return fa(this).then(function(){return ga(this),da(this,t,n,i)}.bind(this)).then(function(i){if(ga(this),this.c=i.manifest,this.b=i.Ac,this.c.presentationTimeline.aa()||this.c.presentationTimeline.sa())throw new u(2,9,9005,t);this.c.periods.forEach(this.o.bind(this)),this.g=this.a.b.manifest++,this.l=0,i=this.c.periods.map(this.B.bind(this));var n=this.b.b,a=at(this.b);if(n){if(!a.length)throw new u(2,9,9007,t);n.initData=[]}return r={key:this.g,originalManifestUri:t,duration:this.l,size:0,expiration:this.b.Wa(),periods:i,sessionIds:a,drmInfo:n,appMetadata:e},jr(this.h,r)}.bind(this)).then(function(){if(ga(this),a)throw a;return pa(this)}.bind(this)).then(function(){return Pr(r)}.bind(this))["catch"](function(t){return pa(this)["catch"](T).then(function(){throw t})}.bind(this))},ha.prototype.store=ha.prototype.$d,ha.prototype.remove=function(t){function e(t){6013!=t.code&&(s=t)}var i=t.offlineUri,n=/^offline:([0-9]+)$/.exec(i);if(!n)return Promise.reject(new u(2,9,9004,i));var r,a,s=null,o=Number(n[1]);return fa(this).then(function(){return ga(this),this.a.get("manifest",o)}.bind(this)).then(function(t){if(ga(this),!t)throw new u(2,9,9003,i);return r=t,t=Vr(r),a=new et(this.f.o,e,function(){},function(){}),a.configure(this.f.getConfiguration().drm),a.init(t,!0)}.bind(this)).then(function(){return nt(a,r.sessionIds)}.bind(this)).then(function(){return a.m()}.bind(this)).then(function(){if(ga(this),s)throw s;var e=r.periods.map(function(t){return t.streams.map(function(t){var e=t.segments.map(function(t){return t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(t.uri),Number(t[1])});return t.initSegmentUri&&(t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(t.initSegmentUri),e.push(Number(t[1]))),e}).reduce(y,[])}).reduce(y,[]),i=0,n=e.length,a=this.i.progressCallback;return Sr(this.a,function(r){return r=e.indexOf(r.key),0<=r&&(a(t,i/n),i++),0<=r}.bind(this))}.bind(this)).then(function(){return ga(this),this.i.progressCallback(t,1),this.a.remove("manifest",o)}.bind(this))},ha.prototype.remove=ha.prototype.remove,ha.prototype.list=function(){var t=[];return fa(this).then(function(){return ga(this),this.a.forEach("manifest",function(e){t.push(Pr(e))})}.bind(this)).then(function(){return t})},ha.prototype.list=ha.prototype.list,ha.prototype.A=function(t){for(var e,i=[],n=Ft(this.f.getConfiguration().preferredAudioLanguage),r=[0,Ts,ws],a=t.filter(function(t){return"variant"==t.type}),r=r.map(function(t){return a.filter(function(e){return e=Ft(e.language),Bt(t,n,e)})}),s=0;s<r.length;s++)if(r[s].length){e=r[s];break}e||(r=a.filter(function(t){return t.primary}),r.length&&(e=r)),e||(e=a,a.map(function(t){return t.language}).filter(k));var o=e.filter(function(t){return t.height&&480>=t.height});return o.length&&(o.sort(function(t,e){return e.height-t.height}),e=o.filter(function(t){return t.height==o[0].height})),e.sort(function(t,e){return t.bandwidth-e.bandwidth}),e.length&&i.push(e[Math.floor(e.length/2)]),i.push.apply(i,t.filter(function(t){return"text"==t.type})),i},ha.prototype.o=function(t){var e={};if(this.j){var i=this.j.filter(function(t){return"variant"==t.type}),n=null;i.length&&(n=Yt(t,i[0])),n&&(n.video&&(e.video=n.video),n.audio&&(e.audio=n.audio))}Kt(this.b,e,t),Ht(t,this.f.getConfiguration().restrictions,{width:1/0,height:1/0})},ha.prototype.B=function(t){var e=Gt(t,null,null),i=Xt(t,null),e=this.i.trackSelectionCallback(e.concat(i));for(this.j||(this.j=e,this.c.periods.forEach(this.o.bind(this))),i=e.length-1;0<i;--i){for(var n=!1,r=i-1;0<=r;--r)if(e[i].type==e[r].type&&e[i].kind==e[r].kind&&e[i].language==e[r].language){n=!0;break}if(n)break}for(n=[],i=0;i<e.length;i++){var a=Yt(t,e[i]);a?(a.audio&&((r=n.filter(function(t){return t.id==a.audio.id})[0])?r.variantIds.push(a.id):(r=a.video?a.bandwidth/2:a.bandwidth,n.push(va(this,t,a.audio,r,a.id)))),a.video&&((r=n.filter(function(t){return t.id==a.video.id})[0])?r.variantIds.push(a.id):(r=a.audio?a.bandwidth/2:a.bandwidth,n.push(va(this,t,a.video,r,a.id))))):n.push(va(this,t,Wt(t,e[i]),0))}return{startTime:t.startTime,streams:n}},io.offline=ca,e("shaka.polyfill.installAll",function(){for(var t=0;t<no.length;++t)no[t]()});var no=[];e("shaka.polyfill.register",ba),ba(function(){if(t.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitExitFullscreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",ya),document.addEventListener("webkitfullscreenerror",ya),document.addEventListener("mozfullscreenchange",ya),document.addEventListener("mozfullscreenerror",ya),document.addEventListener("MSFullscreenChange",ya),document.addEventListener("MSFullscreenError",ya)}}),ba(function(){var e=navigator.userAgent;e&&0<=e.indexOf("CrKey")&&delete t.indexedDB}),Ta.prototype.c=function(t){if(!(1<t.version)){var e=Z(We(t.s,16)),i=[];if(0<t.version)for(var n=Xe(t.s),r=0;r<n;++r){var a=Z(We(t.s,16));i.push(a)}n=Xe(t.s),ze(t.s,n),this.b.push.apply(this.b,i),this.f.push(e),this.a.push({start:t.start,end:t.start+t.size-1})}},Ea.prototype.createMediaKeys=function(){var t=new Sa(this.keySystem);return Promise.resolve(t)},Ea.prototype.getConfiguration=function(){return this.a},Sa.prototype.createSession=function(t){if("temporary"!=(t||"temporary"))throw new TypeError("Session type "+t+" is unsupported on this platform.");return new Aa(this.a)},Sa.prototype.setServerCertificate=function(){return Promise.resolve(!1)},i(Aa),cs=Aa.prototype,cs.generateRequest=function(t,e){this.a=new _;try{this.c=this.g.createSession("video/mp4",new Uint8Array(e),null),M(this.f,this.c,"mskeymessage",this.cd.bind(this)),M(this.f,this.c,"mskeyadded",this.ad.bind(this)),M(this.f,this.c,"mskeyerror",this.bd.bind(this)),Pa(this,"status-pending")}catch(i){this.a.reject(i)}return this.a},cs.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},cs.update=function(t){this.b=new _;try{this.c.update(new Uint8Array(t))}catch(e){this.b.reject(e)}return this.b},cs.close=function(){try{this.c.close(),this.closed.resolve(),U(this.f)}catch(t){this.closed.reject(t)}return this.closed},cs.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},cs.cd=function(t){this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new ae("message",{messageType:void 0==this.keyStatuses.lb()?"licenserequest":"licenserenewal",message:t.message.buffer}))},cs.ad=function(){this.a?(Pa(this,"usable"),this.a.resolve(),this.a=null):this.b&&(Pa(this,"usable"),this.b.resolve(),this.b=null)},cs.bd=function(){var t=Error("EME PatchedMediaKeysMs key error");if(t.errorCode=this.c.error,this.a)this.a.reject(t),this.a=null;else if(this.b)this.b.reject(t),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:Pa(this,"output-not-allowed");default:Pa(this,"internal-error")}};var ro;cs=Ca.prototype,cs.Bb=function(t){this.size=void 0==t?0:1,this.a=t},cs.lb=function(){return this.a},cs.forEach=function(t){this.a&&t(this.a,ro)},cs.get=function(t){if(this.has(t))return this.a},cs.has=function(t){var e=ro;return!(!this.a||!tt(new Uint8Array(t),new Uint8Array(e)))},cs.keys=function(){},Da.prototype.createSession=function(){},Da.prototype.setServerCertificate=function(){},La.prototype.getConfiguration=function(){},La.prototype.createMediaKeys=function(){};var ao="";Ba.prototype.createMediaKeys=function(){var t=new Fa(this.a);return Promise.resolve(t)},Ba.prototype.getConfiguration=function(){return this.b},cs=Fa.prototype,cs.createSession=function(t){var e=t||"temporary";if("temporary"!=e&&"persistent-license"!=e)throw new TypeError("Session type "+t+" is unsupported on this platform.");return t=this.b||document.createElement("video"),t.src||(t.src="about:blank"),e=new Ka(t,this.g,e),this.c.push(e),e},cs.setServerCertificate=function(){return Promise.resolve(!1)},cs.qd=function(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("encrypted",!1,!1,null),e.initDataType="webm",e.initData=t.initData,this.b.dispatchEvent(e)},cs.pd=function(t){var e=Ha(this,t.sessionId);e&&(t=new ae("message",{messageType:void 0==e.keyStatuses.lb()?"licenserequest":"licenserenewal",message:t.message}),e.b&&(e.b.resolve(),e.b=null),e.dispatchEvent(t))},cs.nd=function(t){(t=Ha(this,t.sessionId))&&(Ga(t,"usable"),t.a&&t.a.resolve(),t.a=null)},cs.od=function(t){var e=Ha(this,t.sessionId);if(e){var i=Error("EME v0.1b key error");i.errorCode=t.errorCode,i.errorCode.systemCode=t.systemCode,!t.sessionId&&e.b?(i.method="generateRequest",45==t.systemCode&&(i.message="Unsupported session type."),e.b.reject(i),e.b=null):t.sessionId&&e.a?(i.method="update",e.a.reject(i),e.a=null):(i=t.systemCode,t.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Ga(e,"output-restricted"):1==i?Ga(e,"expired"):Ga(e,"internal-error"))}},i(Ka),cs=Ka.prototype,cs.Db=function(t,e){if(this.a)this.a.then(this.Db.bind(this,t,e))["catch"](this.Db.bind(this,t,e));else{this.a=t;var i,n;"webkit-org.w3.clearkey"==this.c?(i=K(e),n=JSON.parse(i),"oct"!=n.keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),i=J(n.keys[0].k),n=J(n.keys[0].kid)):(i=new Uint8Array(e),n=null);var r=Oa("addKey");try{this.f[r](this.c,i,n,this.sessionId)}catch(a){this.a.reject(a),this.a=null}}},cs.generateRequest=function(t,e){return qa(this,e,null)},cs.load=function(t){return"persistent-license"==this.g?qa(this,null,t):Promise.reject(Error("Not a persistent session."))},cs.update=function(t){var e=new _;return this.Db(e,t),e},cs.close=function(){if("persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var t=Oa("cancelKeyRequest");try{this.f[t](this.c,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},cs.remove=function(){return"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close();
};var so;cs=Xa.prototype,cs.Bb=function(t){this.size=void 0==t?0:1,this.a=t},cs.lb=function(){return this.a},cs.forEach=function(t){this.a&&t(this.a,so)},cs.get=function(t){if(this.has(t))return this.a},cs.has=function(t){var e=so;return!(!this.a||!tt(new Uint8Array(t),new Uint8Array(e)))},cs.keys=function(){},ba(function(){!t.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(HTMLMediaElement.prototype.webkitGenerateKeyRequest?Ma("webkit"):HTMLMediaElement.prototype.generateKeyRequest?Ma(""):t.MSMediaKeys?(ro=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ka,t.MediaKeys=Sa,t.MediaKeySystemAccess=Ea,navigator.requestMediaKeySystemAccess=wa):(navigator.requestMediaKeySystemAccess=Na,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Ra,t.MediaKeys=Da,t.MediaKeySystemAccess=La))}),ba(function(){if(t.MediaSource){var e=navigator.vendor,i=navigator.appVersion;!e||!i||0>e.indexOf("Apple")||(0<=i.indexOf("Version/8")?t.MediaSource=null:0<=i.indexOf("Version/9")?Ya():0<=i.indexOf("Version/10")&&(Ya(),Wa()))}});var oo=0;Ja.prototype.then=function(t,e){var i=new Ja;switch(this.wa){case 1:is(this,i,t);break;case 2:is(this,i,e);break;case oo:this.c.push({O:i,ib:t}),this.b.push({O:i,ib:e})}return i},Ja.prototype["catch"]=function(t){return this.then(void 0,t)},Ja.prototype.ca=function(t){if(this.wa==oo){for(this.eb=t,this.wa=1,t=0;t<this.c.length;++t)is(this,this.c[t].O,this.c[t].ib);this.c=[],this.b=[]}},Ja.prototype.a=function(t){if(this.wa==oo){for(this.eb=t,this.wa=2,t=0;t<this.b.length;++t)is(this,this.b[t].O,this.b[t].ib);this.c=[],this.b=[]}};var uo=null,ho=[];ba(function(e){t.setImmediate?(as=function(e){return t.setImmediate(e)},ss=function(e){return t.clearImmediate(e)}):(as=function(e){return t.setTimeout(e,0)},ss=function(e){return t.clearTimeout(e)}),t.Promise&&!e||(t.Promise=Ja,t.Promise.resolve=Qa,t.Promise.reject=Za,t.Promise.all=ts,t.Promise.race=es,t.Promise.prototype.then=Ja.prototype.then,t.Promise.prototype["catch"]=Ja.prototype["catch"])}),ba(function(){if(t.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in e&&(e.getVideoPlaybackQuality=os)}}),ba(function(){if(!t.VTTCue&&t.TextTrackCue){var e=TextTrackCue.length;if(3==e)t.VTTCue=us;else if(6==e)t.VTTCue=hs;else{var i;try{i=!!us(1,2,"")}catch(n){i=!1}i&&(t.VTTCue=us)}}})}).call(r,this),"undefined"!=typeof t&&t.exports?t.exports=r.shaka:(n=function(){return r.shaka}.call(e,i,e,t),!(void 0!==n&&(t.exports=n)))}()}});